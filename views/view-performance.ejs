<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <meta name="author" content="Webpixels" />
  <title>Trainity - Admin Panel</title>
  <!-- Favicon -->
  <link rel="icon" href="../img/custom/favicon-32x32.jpg" type="image/png" />
  <!-- Purpose CSS -->

  <!-- Font Awesome 5 -->
  <link rel="stylesheet" href="../libs/@fortawesome/fontawesome-free/css/all.min.css" />
  <link rel="stylesheet" href="../libs/fullcalendar/dist/fullcalendar.min.css" />
  <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../../assets/libs/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="//cdn.quilljs.com/1.3.6/quill.bubble.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../css/purpose.css" id="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/progressbar.js/1.0.0/progressbar.min.js"></script>

  <style>
    .activePerformanceInsightsMonth{
      border-radius: var(--Radius-medium, 8px);
background: var(--Success-25, #F6FEF9);
box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);
border-bottom:5px solid #48BF84;
    }
    .disabled{
      pointer-events: none; /* Disable click events */
    opacity: 0.5;
    }
    .SPActive{
      border: 1px solid var(--Brand-Primary, #48BF84);
background: var(--Success-25, #F6FEF9);
    }
    .SPInActive{
      border: 1px solid var(--Gray-300, #D0D5DD);
background: white;
    }
   
    .SPCheckbox{
      display: flex;
width: 24px;
height: 24px;
padding: 3.6px;
justify-content: center;
align-items: center;
border-radius: 7.2px;
    }
      .frameGraph {
        display: inline-flex;
padding: 24px;
flex-direction: column;
align-items: flex-start;
gap: 24px;
border-radius: var(--Radius-medium, 8px);
background: #FFF;
box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.06), 0px 1px 3px 0px rgba(16, 24, 40, 0.10);
    }

    .frameGraph .heading-wrapper {
      display: flex;
      align-items: center;
      gap: 4px;
      position: relative;
      align-self: stretch;
      width: 100%;
      flex: 0 0 auto;
    }

    .frameGraph .heading {
      position: relative;
      width: fit-content;
      margin-top: -1px;
      
      font-weight: 600;
      font-size: 18px;
      letter-spacing: 0;
      line-height: 24px;
      white-space: nowrap;
    }

    .frameGraph .group {
      position: relative;
      width:100%;
      height: 417.39px;

      border-left: 3px solid #667085;
      border-bottom: 3px solid #667085;
    }

    .frameGraph .overlap {
      position: absolute;
      width: 100%;
      height: 389px;
      top: 0;
      left: -1px;
      background-image: url(./img/line-199.svg);
      background-size: 100% 100%;
    }

    .frameGraph .div {
      display: inline-flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 6px;
      position: relative;
      left: 2px;
    }

    .frameGraph .group-2 {
      position: relative;
      width: 100%;
      height: 108px;
      margin-right: -2px;
    }

    .frameGraph .overlap-group {
      position: absolute;
      width: 100%;
      height: 48px;
      top: 40px;
      left: 0;
      background: linear-gradient(270deg, rgb(72, 191, 132) -0.04%, rgb(209, 250, 223) 100%);
    }

    .frameGraph .img {
      position: absolute;
      width: 32px;
      height: 32px;
      top: 8px;
      left: 90%;
    }

    .frameGraph .text {
      position: absolute;
      top: 88px;
      left: 6px;
      font-weight: 500;
      font-size: 16px;
      letter-spacing: 0;
      line-height: 20px;
      white-space: nowrap;
    }

    .frameGraph .tooltip {
      left: 564px;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: absolute;
      top: 0;
      border-radius: 8px;
      box-shadow: var(--shadow-lg);
    }

    .frameGraph .content {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      padding: 8px 12px;
      position: relative;
      align-self: stretch;
      width: 100%;
      flex: 0 0 auto;
      background-color: var(--gray-50);
      border-radius: 8px;
    }

    .frameGraph .text-wrapper {
      position: relative;
      width: fit-content;
      margin-top: -1px;
      font-size: var(--text-xs-medium-font-size);
      text-align: center;
      line-height: var(--text-xs-medium-line-height);
      font-weight: var(--text-xs-medium-font-weight);
      color: var(--gray-700);
      letter-spacing: var(--text-xs-medium-letter-spacing);
      white-space: nowrap;
      font-style: var(--text-xs-medium-font-style);
    }

    .frameGraph .tooltip-2 {
      position: relative;
      width: 16px;
      height: 6px;
    }

    .frameGraph .group-3 {
      position: relative;
      width: 100%;
      height: 108.86px;
    }

    .frameGraph .avatar-wrapper {
      position: absolute;
      width: 100%;
      height: 48px;
      top: 41px;
      left: 0;
         }

    .frameGraph .avatar {
      position: relative;
      width: 32px;
      height: 32px;
      top: 8px;
      left: 477px;
      border-radius: 290.91px;
      background-image: url(./img/avatar.png);
      background-size: cover;
      background-position: 50% 50%;
    }

    .frameGraph .text-2 {
      position: absolute;
      top: 89px;
      left: 6px;
      font-size: 16px;
      line-height: 20px;
      font-weight: 500;
      color: var(--gray-700);
      letter-spacing: 0;
      white-space: nowrap;
    }

    .frameGraph .tooltip-3 {
      left: 100%;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: absolute;
      top: 0;
      border-radius: 8px;
      box-shadow: var(--shadow-lg);
    }

    .frameGraph .div-wrapper {
      background-color: var(--success-50);
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      padding: 8px 12px;
      position: relative;
      align-self: stretch;
      width: 100%;
      flex: 0 0 auto;
      border-radius: 8px;
    }

    .frameGraph .group-4 {
      position: relative;
      width: 100%;
      height: 107.71px;
    }

    .frameGraph .overlap-2 {
      position: absolute;
      width: 100%;
      height: 88px;
      top: 0;
      left: 0;
    }

    .frameGraph .rectangle {
      position: absolute;
      width: 100%;
      height: 48px;
      top: 40px;
      left: 0;
    }

    .frameGraph .avatar-2 {
      position: absolute;
      width: 32px;
      height: 32px;
      top: 48px;
      left: 100%;
      border-radius: 290.91px;
      background-image: url(./img/avatar.svg);
      background-size: cover;
      background-position: 50% 50%;
    }

    .frameGraph .tooltip-4 {
      left: 100%;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: absolute;
      top: 0;
      border-radius: 8px;
      box-shadow: var(--shadow-lg);
    }

    .frameGraph .content-2 {
      background-color: var(--warning-50);
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      padding: 8px 12px;
      position: relative;
      align-self: stretch;
      width: 100%;
      flex: 0 0 auto;
      border-radius: 8px;
    }

    .frameGraph .navbar {
      display: flex;
      width: 100%;
      align-items: flex-start;
      justify-content: space-between;
      position: absolute;
      top: 407px;
      left: 0;
    }

    .frameGraph .text-wrapper-2 {
      position: relative;
      width: fit-content;
      margin-top: -1px;
      font-weight: 500;
      color: var(--gray-800);
      font-size: 16px;
      letter-spacing: 0;
      line-height: 20px;
      white-space: nowrap;
    }


    .semicircle {
	position:relative;
	margin: 0 auto;
	text-align:center;
	display: flex;
	justify-content:center;
	align-items:center;
	
	svg {
		height: 100%;
		max-width: 568px;
		width: 100%;
		display:block;
	}
}
    .text-gray-14-500 {
      color: var(--gray-600, #475467);
      font-size: 14px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px;
    }

    #TeamTitles::-webkit-scrollbar {
      width: 12px;
    }

    #TeamTitles::-webkit-scrollbar-track {
      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
      border-radius: 10px;
    }

    #TeamTitles::-webkit-scrollbar-thumb {
      border-radius: 10px;
      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);
    }


    .dragging {
      opacity: .5;
      cursor: move;
    }

    .teamTab {

      cursor: pointer;
    }

    .selected {
      border-radius: 4px;
      background: var(--success-50, #ECFDF3);
    }



    .activeTeam {
      border-bottom: 4px solid #48BF84;
      background: var(--success-50, #ECFDF3);
      color: #48bf84;
    }



    .fullsubmitted {
      background: radial-gradient(closest-side, white 79%, transparent 80% 100%),
            conic-gradient(#48bf84 calc(100%), #F2F4F7 0);
    }

    .halfsubmitted {
      background: radial-gradient(closest-side, white 79%, transparent 80% 100%),
            conic-gradient(#FDB022 calc(50%), #F2F4F7 0);
    }

    .semi-halfsubmitted {
     background: radial-gradient(closest-side, white 79%, transparent 80% 100%),
            conic-gradient(#475467 calc(25%), #F2F4F7 0);
    }

    .nosubmitted {
      background: radial-gradient(closest-side, white 79%, transparent 80% 100%),
            conic-gradient(#FF6565 calc(100%), #F2F4F7 0);  }

    .normalText {
      color: var(--gray-500, #667085);
    }

    .activeText {
      color: #48BF84
    }

    .activeemployee {
      display: flex;
      padding: 24px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 20px;
      border-bottom: 4px solid #48BF84;
      background: var(--success-50, #ECFDF3)
    }

    .normalemployee {
      display: flex;
      padding: 16px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 20px;
    }

    body {
      font-family: 'Manrope', sans-serif !important;
    }

    tr {
      display: flex;

      align-items: center;
      width: 100%;
    }

    .activeButton {
      display: flex;
      padding: 10px 16px;
      justify-content: center;
      align-items: center;
      gap: 8px;
      background: white;
      border-radius: var(--radius-medium, 8px);
      border: 1px solid #48BF84;
      color: #48BF84;
      text-align: center;
      font-size: 14px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px;
      /* 142.857% */
      letter-spacing: 0.1px;
    }

    .disableButton {
      display: flex;
      padding: 10px 16px;
      justify-content: center;
      align-items: center;
      gap: 8px;
      border-radius: var(--radius-medium, 8px);
      border: 1px solid var(--gray-300, #D0D5DD);
      color: var(--gray-300, #D0D5DD);
      text-align: center;
      font-size: 14px;
      font-style: normal;
      pointer-events: none;
      font-weight: 500;
      line-height: 20px;
      /* 142.857% */
      letter-spacing: 0.1px;
    }

    .activeTaskImage {
      border: 8px solid var(--success-50, #ECFDF3);
      background: var(--success-100, #D1FADF);
    }

    .disableTaskImage {
      border: 8px solid var(--gray-50, #F9FAFB);
      background: var(--gray-100, #F2F4F7);
    }

    .text-16-700 {
      color: var(--gray-800, #1D2939);
      font-size: 18px;
      font-style: normal;
      font-weight: 500;
      line-height: normal;
      letter-spacing: 0.09px;
    }

    .text-24-700 {
      color: #000;
      font-size: 24px;
      font-style: normal;
      font-weight: 700;
      line-height: normal;
    }

    .fontsize34 {
      font-size: 34px;
    }

    .streak-dates-box {
      display: flex;
      padding: 16px;
      justify-content: space-between;
      align-self: stretch;
      border-radius: var(--radius-medium, 8px);
      background: #FFF;
      box-shadow: 0px 2px 4px -2px rgba(16, 24, 40, 0.06), 0px 4px 8px -2px rgba(16, 24, 40, 0.10);
    }


    .daily-task-card {
      border: 1px solid #ececec;
      border-radius: 14px;
      padding: 20px 24px;
    }

    .modal-box {
      display: flex;
      padding: 16px;
      justify-content: center;
      align-items: flex-start;
      gap: 8px;
      flex: 1 0 0;
      border-radius: 12px;
      border: 1px solid var(--stroke-secondary, #DCDCDC);
      background: var(--surface-primary, #FFF);
    }

    .heading {

      color: #48BF84;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
      line-height: 24px;
      /* 150% */
    }

    .active {
      color: #48bf84;
      width: 100px;
      display: flex;
      border-bottom: 2px solid #48bf84;
      align-items: center;
      justify-content: center;
    }

    .modal-heading {
      color: var(--text-content-primary, #181818);
      font-size: 24px;

      font-style: normal;
      font-weight: 700;
      line-height: 100%;
    }

    .months {
      display: flex;
      padding: 10px 14px;
      align-items: center;
      gap: 8px;
      align-self: stretch;
      border-radius: var(--radius-medium, 8px);
      border: 1px solid var(--gray-300, #D0D5DD);
      background: var(--White, #FFF);
      box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);

    }

    .rating-status {
      display: flex;
      padding: 4px 8px;
      justify-content: center;
      align-items: center;
      gap: 5px;
      margin-top: 10px;
      color: black;
    }

    #sliderValue {
      color: var(--pill-text-blue, #3B82F6);
      font-size: 12px;
      font-style: normal;
      width: 7%;
      font-weight: 700;
      line-height: 158.6%;
      /* 19.032px */
    }

    .golden-rating-status {
      border-radius: 14px;
      background: linear-gradient(129deg, #FBE6A2 0%, #FFFCF3 34.55%, #FBEECA 66.59%, #FEFAEB 100%);
    }

    .skyblue-rating-status {
      border-radius: 14px;
      background: var(--pill-surface-trainity, #F2FAF6);
    }

    .orange-rating-status {
      border-radius: 14px;
      background: var(--pill-surface-orange, #FFFBEB);
    }

    .red-rating-status {
      border-radius: 14px;
      background: var(--pill-text-red, #FF6565);
    }

    .streakcount-line {
      flex: 1;
      height: 1px;
      min-width: 50px;
      margin-top: 70px;
      border: 1px dashed #999;
      margin-bottom: 10px;
    }

    .roadmap {
      display: flex;
      align-items: center;
    }

    .checkpoint {
      display: flex;
      flex-direction: column;
    }

    .checkpoint img {
      width: 40px;
      height: 40px;
    }

    .checkpoint-title {
      margin-top: 10px;
    }

    .dotted-rule {
      flex: 1;
      border-bottom: 2px dashed #D0D5DD;
      height: 2px;
      margin-top: -15px;
    }

    .current-rule {
      border-bottom: 2px dashed #D0D5DD;
      height: 2px;
      margin-top: -15px;
      width: var(--value)px;
    }

    .solid-rule {
      flex: 1;
      height: 6px;
      flex-shrink: 0;
      margin: 0px -5px;
      background: #fff;
    }

    .circle {
      display: flex;
      padding: 10px;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      width: 50px;
      align-self: stretch;
      border-radius: 8px;
    }

    .avatar-group {
      display: flex;
      align-items: center;
    }

    .avatar-container {
      display: flex;
      align-items: center;
      gap: 8px;
      /* Adjust the spacing between avatars */
    }


    .avatar-container img {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 2px solid #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      position: relative;
      margin-left: -20px;
      /* Adjust this value to control the overlap */
    }

    .more-avatar {
      background-color: #e1e1e1;
      /* Set the background color of the "+7" tag */
      border-radius: 50%;
      width: 24px;
      /* Set the size of the "+7" tag */
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #111;
      font-weight: bold;
      cursor: pointer;
      font-size: 14px;
      ;
    }
   
    th,
    td {
      display: flex;
      justify-content: center;
      padding: 12px 24px;
      align-items: center;
      gap: 4px;
      align-self: stretch;
      color: var(--gray-600, #475467);
      font-size: 12px;
      font-style: normal;
      font-weight: 500;
      line-height: 18px;
      height:42px;
    }

    th:first-child,
    td:first-child {
      display: flex;
      justify-content: flex-start;
    }

    th:last-child,
    td:last-child {
      display: flex;
      justify-content: flex-end;
    }

    .big {
      border-radius: 8px;
      border: 1px solid #48BF84;
      background: var(--pill-surface-trainity, #F2FAF6);
    }
.FaPencil{
  display: inline-flex;
padding: 4px;
color:black;
justify-content: center;
align-items: center;
gap: 4px;
}
.FaPencil:hover{
border-radius: 4px;
background: var(--Gray-200, #EAECF0);
cursor: pointer;
}
    .small {
      border-radius: 8px;
      border: 1px dashed var(--stroke-primary, #ECECEC);
      background: var(--surface-primary, #FFF);
    }

    .streak-green {
      background-color: #48bf84;
      color: white
    }

    .streak-count {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      padding: 0px;
      gap: 8px;
      width: 100%;
      overflow-x: hidden;
      margin-top: 10px;
      flex: none;
      order: 1;
      align-self: stretch;
      flex-grow: 0;
      overflow: auto;
    }

    .bonus {
      font-size: 17px;
      font-weight: bold;
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 2px 4px;
      margin-bottom: -25px;
      background: linear-gradient(105.25deg, #087941 16.01%, #1AF287 103.85%);
      border: 1px solid #DCDCDC;
      border-radius: 8px;
    }

    .words {
      overflow: hidden;
      max-width: 120px;
      text-overflow: ellipsis;
      font-size: 14px;
      font-style: normal;
      line-height: normal;
      max-height: 30px;
      margin: 10px 0px;
      display: flex;

      justify-content: space-between;
    }

    .notes {
      margin-left: 30px;
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 8px 16px;
      gap: 8px;
      width: 737px;
      height: 54px;
      background: #FFFBEB;
      border-radius: 8px;
    }

    .dotted-line {
      width: 2px;
      height: 50px;
      margin-top: -20px;
      margin-left: 50px;
      position: relative;
    }

    .green {
      background-color: #48bf84;
      color: white;
    }

    .text-green {
      color: #48bf84;
    }

    .dotted-line::before {
      content: "";
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 1px;
      height: 100%;
      background: repeating-linear-gradient(to bottom, transparent, transparent 3px, black 3px, black 6px);
    }

    .graph {
      display: flex;
      padding: 0px 4px;
      justify-content: center;
      align-items: center;
      gap: 2px;
      width: 40px;
    }

    .decrease {
      border-radius: 8px;
      background: var(--pill-text-red, #FF6565);
    }

    .increase {
      border-radius: 8px;
      background: var(--pill-text-blue, #3B82F6);
    }

    .current_day {
      border: 1px dashed var(--warning-400, #FDB022);
      background: var(--warning-25, #FFFCF5);
    }

    .perv_day {
      border: 1px dashed var(--pill-text-red, #FF6565);
      background: var(--error-50, #FEF3F2);
    }

    .complete_day {
      border: 1px dashed var(--ref-primary-primary-60-brand, #48BF84);
      background: var(--ref-primary-primary-99, #F5FFF5);
    }

    .text-red-14-700 {
      color: #FF6565;
      font-size: 14px;
      font-style: normal;
      font-weight: 700;
      line-height: normal;
    }

    .frameLevelProgress {
      display: flex;
      padding: 24px 32px;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      flex: 1 0 0;
    }

    .frameLevelProgress .div {
      display: flex;
      align-items: center;
      gap: 16px;

    }

    .frameLevelProgress .featured-icon {
      position: relative;
      width: 56.57px;
      height: 56.57px;
      margin-top: -4.29px;
      margin-bottom: -4.29px;
      margin-left: -4.29px;
      background-color: var(--success-100);
      border-radius: 24px;
      border: 8.57px solid;
      border-color: var(--success-50);
    }

    .frameLevelProgress .noun-mission {
      position: relative;
      width: 25px;
      height: 27px;
      top: 11px;
      left: 11px;
      overflow: hidden;
    }

    .frameLevelProgress .layer {


      display: flex;
      width: 48px;
      height: 48px;
      padding: 10.605px 11.462px 10.604px 11.422px;
      justify-content: center;
      align-items: center;
      border-radius: 24px;
      border: 8.571px solid var(--success-50, #ECFDF3);
      background: var(--success-100, #D1FADF);

    }

    .frameLevelProgress .overlap-group {
      width: 50px;
      height: 9px;
      top: 32px;
      position: absolute;
      left: 0;
    }

    .frameLevelProgress .text-wrapper {
      position: absolute;
      top: 0;
      left: 0;

      font-weight: 700;
      color: var(--brandprimary);
      font-size: 3.9px;
      letter-spacing: 0;
      line-height: normal;
    }

    .frameLevelProgress .text-wrapper-2 {
      position: absolute;
      top: 4px;
      left: 0;

      font-weight: 700;
      color: var(--brandprimary);
      font-size: 3.9px;
      letter-spacing: 0;
      line-height: normal;
    }

    .frameLevelProgress .text-wrapper-3 {
      position: relative;
      width: fit-content;
      font-weight: 700;
      color: black;
      font-size: 18px;
      letter-spacing: 0;
      line-height: normal;
    }

    .frameLevelProgress .div-2 {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      gap: 40px;
      align-self: stretch;
    }

    .div-3 {
      height: 105.6px;
      align-self: stretch;
      background: #FFF;
    }

    .overlap {
      flex: 1;
      height: 127px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .frameLevelProgress .progress-bar {
      width: 818px;
      top: 45px;
      left: 47px;
      display: flex;
      align-items: center;
      gap: 12px;
      position: absolute;
    }

    .frameLevelProgress .progress-bar-2 {
      position: relative;
      flex: 1;
      flex-grow: 1;
      height: 8px;
      border-radius: 8px;
    }

    .frameLevelProgress .progress {
      width: 1px;
      height: 8px;
      background-color: var(--brandprimary);
    }

    .element {
      display: inline-flex;
      padding: 2.07px 0px 4.48px 0px;
      flex-direction: column;

      justify-content: flex-end;
      align-items: center;
      gap: 3.85px;
    }



    .frameLevelProgress .check {
      position: absolute;
      width: 23px;
      height: 23px;
      top: 13px;
      left: 13px;
    }

    .level {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .div-4 {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 3px;
      position: relative;
      flex: 0 0 auto;
    }

    .frameLevelProgress .gem {
      position: relative;
      width: 14px;
      height: 14px;
      object-fit: cover;
    }

    .frameLevelProgress .text-wrapper-4 {
      position: relative;
      width: fit-content;
      margin-top: -1px;
      font-weight: 600;
      color: var(--gray-400);
      font-size: 11.1px;
      text-align: center;
      letter-spacing: 0;
      line-height: normal;
    }

    .button {
      display: inline-flex;
      height: 22.6px;
      align-items: center;
      justify-content: center;
      padding: 5.4px 5.7px 6.2px 5.8px;
      position: relative;
      background-color: #181818;
      border-radius: 800px;
    }

    .text-wrapper-5 {
      position: relative;
      width: 43px;
      height: 9.95px;
      margin-top: -0.47px;
      font-weight: 700;
      color: #ffffff;
      font-size: 11px;
      text-align: center;
      letter-spacing: 0;
      line-height: 11px;
      white-space: nowrap;
    }

    .frameLevelProgress .progress-bar-wrapper {
      width: 774px;
      top: 44px;
      left: 53px;
      display: flex;
      align-items: center;
      gap: 12px;
      position: absolute;
    }

    .frameLevelProgress .line {
      position: absolute;
      width: 713px;
      height: 1px;
      top: 8px;
      left: 143px;
    }

    .frameLevelProgress .progress-2 {
      position: absolute;
      width: 106px;
      height: 8px;
      top: 0;
      left: 0;
      background-color: var(--brandprimary);
    }

    .div-5 {
      display: flex;
      flex-direction: column;
      height: 100%;
      justify-content: flex-start;
      align-items: center;
      gap: 20px;
    }


    .frameLevelProgress .img {
      position: relative;
      width: 35px;
      height: 35px;
    }


    .frameLevelProgress .img-2 {
      position: absolute;
      width: 49px;
      height: 49px;
      top: 0;
      left: 0;
    }

    .frameLevelProgress .img-wrapper {
      position: absolute;
      width: 49px;
      height: 99px;
      top: 22px;
      left: 601px;
    }

    .frameLevelProgress .element-2 {
      position: absolute;
      width: 77px;
      height: 106px;
      top: 0;
      left: 893px;
    }

    .frameLevelProgress .level-2 {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
      position: absolute;
      top: 59px;
      left: 0;
    }

    .frameLevelProgress .overlap-group-wrapper {
      position: absolute;
      width: 56px;
      height: 56px;
      top: -1px;
      left: 10px;
    } 
    .fa-trash:hover{
        color:#FF6565 !important
    }
    .delete-button:hover{
      color:#FF6565 !important
    }

    .frameLevelProgress .lock-wrapper {
      position: relative;
      width: 49px;
      height: 49px;
      top: 4px;
      left: 3px;
      border-radius: 24.67px;
      border: 3.34px solid;
      border-color: var(--brandprimary);
    }

    .frameLevelProgress .lock {
      position: absolute;
      width: 26px;
      height: 26px;
      top: 8px;
      left: 9px;
    }

    .frameLevelProgress .div-6 {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      position: relative;
      flex: 0 0 auto;
    }

    .frameLevelProgress .ph-path-bold {
      position: relative;
      width: 24px;
      height: 24px;
    }

    .frameLevelProgress .heading-2 {
      position: relative;
      width: fit-content;
      margin-top: -1px;

      font-weight: 700;
      color: var(--brandprimary);
      font-size: 16px;
      letter-spacing: 0;
      line-height: 24px;
      white-space: nowrap;
    }

    .progressTask {
      height: 8px;
      flex-shrink: 0;
      width: 75%;
      border-radius: 4px;
      background: var(--success-100, #D1FADF);
    }

    .progress__fill {
      width: 30%;
      height: 100%;
      background: #48bf84;
      transition: all 0.2s;
      border-radius: 4px;
    }


    [role="progressbar"] {
      --percentage: var(--value);
      --primary: #48bf84;
      --secondary: #F2F4F7;
      --width: 280px;
      --height: 154px;
      animation: progress 2s 0.5s forwards;
      width: var(--width);
      height: var(--height);
      aspect-ratio: 2 / 1;
      border-radius: 50% / 100% 100% 0 0;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }

    [role="progressbar"]::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: conic-gradient(from 0.75turn at 50% 100%, var(--primary) calc(var(--percentage) * 1% / 2), var(--secondary) calc(var(--percentage) * 1% / 2 + 0.1%));
      mask: radial-gradient(at 50% 100%, white 55%, transparent 55.5%);
      mask-mode: alpha;
      -webkit-mask: radial-gradient(at 50% 100%, #0000 55%, #000 55.5%);
      -webkit-mask-mode: alpha;
    }
    [role="progressbar"].x.x {
    background: conic-gradient(
        from 0.75turn at 50% 100%,
        #D92D20 0% 50%,     /* 0% to 50% - Red */
        #FDB022 51% 80%,    /* 50% to 80% - Orange */
        #2E90FA 81% 90%,    /* 80% to 90% - Blue */
        #48bf84 91% 100%    /* 90% to 100% - Green */
    );
}


    .greenLine {
      flex: 1;
      height: 8px;
      margin: 0px -20px;
      margin-top: -19px;
      flex-shrink: 0;
      background: #48BF84;
    }

    .current-greenLine {
      height: 8px;
      margin: 0px -20px;
      margin-top: -19px;
      flex-shrink: 0;
      background: #48BF84;
    }


    .dottedLine {
      flex: 1;
      border: 8px #D0D5DD dotted;
    }
    @media screen and (max-width: 1370px) {
  .PMgmtContainer {
    flex-direction: column;
  }
  .PMgmtContainer1 {
    width: 100% !important;
  }
  .PMgmtContainer2 {
    width: 500px !important;
  }
}


  </style>


</head>

<body class="application application-offset" style="margin-left:300px;width: calc(100vw - 300px);background: #fafafa;display: flex;
padding:10px 32px;
flex-direction: column;
align-items: flex-start;
gap: 24px;
flex: 1 0 0;padding-top: 0px;" id="MainPageContent">
  <!-- Chat modal -->
  <!-- Sidenav -->
  <%- include('partials/sidepanel'); -%>
  <!-- Content -->
  <div class="main-content position-relative" style="margin-top:0px;display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding-right: 20px;
    gap: 24px;">
    <%- include('partials/TeamManager.ejs'); -%>
    <div style="display: flex;align-items: flex-start;width: 100%;gap:4px;flex-direction: column;">
      <div style="color: var(--gray-900, #101828);
      font-size: 24px;
      font-style: normal;
      font-weight: 600;
      line-height: 38px;">
        Performance Board - <%=user.displayName%>
      </div>
    </div>


    <%- include('partials/utility-modals'); -%>
    <!-- Level Map -->


    <div style="display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 12px;
        align-self: stretch;">
      <div style="display: flex;
        width: 213px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 16px;" onclick="openmodal('<%=today.date%>')" data-toggle='modal' data-target='#managerModalRating'>
        <img src="<%=employee.image%>" style="display: flex;
    width: 90px;
    height: 90px;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border-radius: 225px;">
        <div style="display: flex;flex-direction: column;justify-content: center;align-items: center;gap: 4px;">
          <div style="color: var(--text-content-primary, #181818);
        
        font-size: 18px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;"><%=employee.displayName%></div>
          <div style="color: var(--text-content-secondary, #898989);
        
        font-size: 18px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;"><%=employee.team%></div>
          <div style="display: flex;
        height: 22.6px;
        padding: 5.4px 5.7px 6.2px 5.8px;
        justify-content: center;
        align-items: center;
        border-radius: 800px;
        display: flex;
width: 50px;
flex-direction: column;
color: #FFF;
text-align: center;
font-size: 11px;
font-style: normal;
font-weight: 700;
line-height: 11px;
        background: #181818;">Level <%=employee.currentLevel%></div>

        </div>
        <div style="color: #48BF84;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: 24px; /* 150% */">View Daily Update</div>
      </div>
      <div class="frameLevelProgress container_Style">
        <div class="div">
          <div class="layer">
            <img src="../Performance dashboard Icons/Levels UI/layer.svg" style="width: 22.66px;
              height: 20.416px;
              flex-shrink: 0;" />
          </div>
          <div class="text-wrapper-3">Your progress</div>
        </div>
        <div class="div-2">
          <div class="div-3">
            <div class="overlap">
              <% for(let i=0; i<levels.length; i++) { %>
              <%if(levels[i].state==1){%>
              <div class="element" style="padding: 0px;gap:0px;">
                <div style="height: 20px;"></div>
                <img src="https://dvfkpf9qxfl09.cloudfront.net/EmployeeProject/Your%20progress%20-%20Completed%20Level-805a5563-3bb4-43ec-916c-4f2fcf6f9d75.svg%20xml" />
                <div class="level">
                  <div class="div-4">
                    <img class="gem" src="../img/gem.svg" />
                    <div class="text-wrapper-4"><%=levels[i-1]?.badges%> </div>
                  </div>
                  <div class="button" data-target="#levelModal-<%= i-1 %>" data-toggle="modal">
                    <div class="text-wrapper-5">LEVEL <%=i%></div>
                  </div>
                </div>
              </div>
              <% let percbadges =(((user.badges - levels[i-1]?.badges) / (levels[i]?.badges - levels[i-1]?.badges)) * 100).toFixed(2); %>


              <%if(percbadges<33){%>

              <div class="current-greenLine" style="width:<%=percbadges%>%"></div>
              <div class="div-5">
                <div class="heading" style="width: 30px;"><%=percbadges%>%</div>
                <img style="margin-top: -10px;z-index:2" src="../Performance dashboard Icons/Levels UI/Your progress- Runner.svg" />
              </div>
              <div class="current-rule" style="width:<%=(33-percbadges)%>%"></div>

              <img src="../Performance dashboard Icons/Levels UI/Your progress - surprise.svg" style="margin-top: -20px;;z-index:2" />
              <div class="dotted-rule"></div>
              <img src="../Performance dashboard Icons/Levels UI/Your progress - surprise.svg" style="margin-top: -20px;;z-index:2" />
              <div class="dotted-rule"></div>
              <%}else if(percbadges<66){%>
              <div class="greenLine"></div>
              <img src="../Performance dashboard Icons/Levels UI/Your progress - Badge.svg" style="margin-top: -20px;;z-index:2" />

              <div class="current-greenLine" style="width:<%=percbadges-33%>%"></div>
              <div class="div-5">
                <div class="heading" style="width: 30px;"><%=percbadges%>%</div>
                <img style="margin-top: -10px;z-index:2" src="../Performance dashboard Icons/Levels UI/Your progress- Runner.svg" />
              </div>
              <div class="current-rule" style="width:<%=(66-percbadges)%>%"></div>

              <img src="../Performance dashboard Icons/Levels UI/Your progress - surprise.svg" style="margin-top: -20px;z-index:2" />
              <div class="dotted-rule"></div>
              <%}else{%>
              <div class="greenLine"></div>
              <img src="../Performance dashboard Icons/Levels UI/Your progress - Badge.svg" style="margin-top: -20px;z-index:2" />
              <div class="greenLine"></div>
              <img src="../Performance dashboard Icons/Levels UI/Your progress - Badge.svg" style="margin-top: -20px;z-index:2" />

              <div class="current-greenLine" style="width:<%=percbadges-66%>%"></div>
              <div class="div-5">
                <div class="heading" style="width: 30px;"><%=percbadges%>%</div>
                <img style="margin-top: -20px;z-index:2" src="../Performance dashboard Icons/Levels UI/Your progress- Runner.svg" />
              </div>
              <div class="current-rule" style="width:<%=(100-percbadges)%>%"></div>

              <%}%>
          <div class="element" style="padding: 0px;gap:0px;">
            <div style="height: 20px;"></div>
            <img src="../Performance dashboard Icons/Levels UI/Your progress- Locked level.svg" />
            <div class="level">
              <div class="div-4">
                <img class="gem" src="../img/gem.svg" />
                <div class="text-wrapper-4" ><%=levels[i].badges%>
            </div>
          </div>
          <div class="button" data-target="#levelModal-<%= i %>" data-toggle="modal">
            <div class="text-wrapper-5">LEVEL <%=i+1%></div>
          </div>
        </div>
      </div>


      <%}%>
         <%}%>
    </div>
  </div>
  <div style="display: flex;
  justify-content: center;
  align-items: center;
  gap: 24px;">
    <a href="/editlevel/<%= user._id %>" style="display: flex;
  padding: 10px 16px;
  justify-content: center;
  align-items: center;
  gap: 8px;
  border: 1px solid #48BF84;" class="container_Style">
      <img src="../Performance dashboard Icons/edit_levels.svg">
      <div style="color: #48BF84;
font-size: 16px;
font-style: normal;
font-weight: 700;
line-height: 24px; /* 150% */">Edit Levels</div>
    </a>

    <div class="div-6" data-target="#ShowRoadmap" data-toggle="modal" style="cursor: pointer;">
      <img src="../Performance dashboard Icons/Levels UI/View Roadmap.svg" />
      <div class="heading-2" style="color: #48bf48;
    color: #48bf84;">View Roadmap</div>
    </div>
  </div>
  </div>
  </div>
  </div>
  <div style="display: flex;
  align-items: flex-start;
  gap: 25px;
 width: 100%;
  align-self: stretch;" class="PMgmtContainer">
    <div  style="width: calc(100% - 440px);;display: flex;
  flex-direction: column;
 flex-grow: 1;
  align-items: flex-start;
  gap: 16px;
  align-self: stretch;" class="PMgmtContainer1">
      <div style="display: flex;gap:24px;align-items:center; color: var(--gray-600, #475467);">
        <div style="display: flex;
  flex-direction: column;
font-size: 16px;
font-style: normal;
cursor: pointer;
padding-bottom: 10px;
font-weight: 600;
line-height: 20px; /* 125% */
  justify-content: center;
  align-items: center;" class="active" onclick="ChangeTab()" id="InitiativesTab"> Initiatives</div>
        <div style="display: flex;
  flex-direction: column;
font-size: 16px;
cursor: pointer;
padding-bottom: 10px;
font-style: normal;
font-weight: 600;
line-height: 20px; /* 125% */
  justify-content: center;
  align-items: center;" onclick="ChangeTab()" id="ProjectsTab" >Projects</div>
      </div>
      <%- include('partials/Task_Manager_PerformanceBoard.ejs'); -%>
      <%- include('partials/Project_Manager_PerformanceBoard.ejs'); -%>
      <% let day = 0 %>
      <% let streakCount=0; %>
      <% let targetdate %>
      <% for (let i = 0; i < streakDays.length; i++) { %>
      <% if (streakDays[i].date>=currentday.date) { %>
      <%if(streakDays[i].date==currentday.date) {%>
      <% streakCount=day;%>
      <%}%>
   <% if (!streakDays[i].isdone) { %>
      <% day += 1; %>
      <% }else { %>
      <% day = 0; %>
      <% }%>

      <% if (day === 3) { %>
      <% targetdate = streakDays[i].date.slice(-2) %>
      <% day = 3 %>
      <% break; %>
      <% } else if (day === 5) { %>
      <% targetdate = streakDays[i].date.slice(-2) %>
      <% day = 7 %>
      <% break; %>
      <% }else if (day === 10) { %>
      <% targetdate = streakDays[i].date.slice(-2) %>
      <% day = 15 %>
      <% break; %>
      <% } else if (day=== 15) { %>
      <% targetdate = streakDays[i].date.slice(-2) %>
      <% day = 22 %>
      <% break; %>
      <% } else if (day === 23) { %>
      <% targetdate = streakDays[i].date.slice(-2) %>
      <% day = 35 %>
      <% break; %>
      <% } %>
      <% } else if (streakDays[i].isdone) { %>
      <% day += 1; %>
      <% }else { %>
      <% day = 0; %>
      <% }%>
      <%}%>
      <% let datel=currentday.date%>
    <% let currentmonth=new Date(datel).getMonth();%>
<ul class="nav nav-tabs" style="margin-top: 20px;">
  <li class="nav-item">
    <a class="nav-link active" id="tab_streak_rating" style="padding:0px">
      <h6 style="display:flex;gap:5px;align-items: center;justify-content: center;">
        Streak & ratings
      </h6>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="tab_daily_summary" style="padding:0px">
      <h6 style="display:flex;gap:5px;align-items: center;justify-content: center;">
       Daily Summaries
      </h6>
    </a>
  </li>
</ul>
<div id="DailySummaryBody" style="display: none;
padding: 24px 32px;
flex-direction: column;
align-items: flex-start;
gap: 18px;
align-self: stretch;
border-radius: 14px;" class="container_Style">
  <%- include('partials/Daily-Summary-Manager'); -%>
    </div>
    <div style="display: flex;
padding: 36px 32px;
flex-direction: column;
align-items: flex-start;
gap: 18px;
align-self: stretch;
border-radius: 14px;" class="container_Style" id="monthly-overview">
      <div style="display:flex;gap:20px;align-items: center;justify-content: space-between;width: 100%;">
        <div style="display: flex;
 align-items: center;
 gap: 16px;">

          <input type="month" id="monthSelect" style="width: 120px;
            padding: 10px;
             color: var(--gray-900, #101828);
   font-size: 16px;
   font-style: normal;
   font-weight: 400;
   line-height: 24px;border-radius: var(--radius-medium, 8px);
border: 1px solid var(--gray-300, #D0D5DD);
background: var(--White, #FFF);
/* Shadow/xs */
box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);" value="<%= (new Date(datel)).toISOString().substr(0, 7) %>">

          <div style="
font-style: normal;
font-weight: 700;
font-size: 18px;
line-height: 25px;
color: #181818;" id="streakHeader">Current Streak: <span style="color:#48bf84;margin-left:5px"><%=streakCount%> Days <img src='../img/icons performance mgmt/desktop/Streak states.svg' /></span>
          </div>
        </div>

        <div style="display: flex;
height: 29px;
padding: 0px 16px;
justify-content: center;
align-items: center;
gap: 4px;color: var(--content-on-light-primary, #181818);
font-size: 12px;
font-style: normal;
font-weight: 400;
line-height: normal;
border-radius: var(--radius-medium, 8px);
background: #D9FDEB;" id="streakHeaderStreak">Continue 4.5+ <img src="../img/Star.svg" width="17px" /> streak till<span style="font-size:17px; font-weight: 700"> <%=targetdate%> </span> to get +<span style="font-size:17px; font-weight: 700;"><%=day%></span> <img src="../img/gem.svg" style="width: 17px;" />
        </div>
        <i class="fa fa-angle-up" id="Streakicons" onclick="CloseBox('.StreakBox','Streakicons','flex')" style="width: 40px;
height: 40px;border-radius: 40px;background: var(--surface-fourth, #EBEBEB);    display: flex;
align-items: center;
justify-content: center;"></i>
      </div>
      <div style="display: flex;
align-items: center;
gap: 10px;
margin-left:-20px;
justify-content: space-between;
width: 105%;" class='StreakBox'>
        <i class="fa fa-angle-left" onclick="MoveWeekStreak(-1,'streak-count')"></i>
        <div id="streak-count" style="margin-top: 10px;width: 95%;">


        </div>
        <i class="fa fa-angle-right" onclick="MoveWeekStreak(1,'streak-count')"></i>
      </div>
      <div class='StreakBox' style="color: #48BF84;
cursor: pointer;
font-size: 16px;
font-style: normal;
font-weight: 700;
line-height: 24px; /* 150% */" data-target="#modal-monthly-overview" data-toggle="modal">Monthly Overview </div>

    </div>
    <div style="display: flex;
padding: 32px;
flex-direction: column;
align-items: flex-start;
gap: 20px;
align-self: stretch;
border-radius: 14px;
" class="container_Style">
      <div style="display: flex;
padding: 2px 0px;
justify-content: space-between;
align-items: center;
align-self: stretch;">
        <div style="flex-direction: column;display: flex;gap:4px;">
          <div style="color: var(--content-on-light-primary, #181818);
font-size: 20px;
font-style: normal;
font-weight: 700;
line-height: normal;">Weekly Performance</div>
          <div style="display: flex;gap:4px;align-items: center;">
            <% if(performanceRecord.submittedAt[0] != '' ){%>
            <img src="../Performance dashboard Icons/signin.svg" style="display: flex;
    width: 20px;
    height: 20px;
    padding: 2.5px;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 2.5px;
    border-radius: 625px;
    background: var(--gray-500, #667085);">
            <%}%>
    <div style="
color: var(--gray-500, #667085);
font-size: 14px;
font-style: normal;
font-weight: 700;
line-height: 24px; /* 171.429% */"> <%= performanceRecord.submittedAt[0] == '' ? 'Not Logged In Today' : 'Logged In Today @' + performanceRecord.submittedAt[0] %>
          </div>
        </div>
      </div>
      <%
   function getpervday(date) {
      const currentDate = new Date(date);
      currentDate.setDate(currentDate.getDate() - 1);

      const year = currentDate.getFullYear();
      const month = String(currentDate.getMonth() + 1).padStart(2, '0');
      const day = String(currentDate.getDate()).padStart(2, '0');

      const previousDateString = `${year}-${month}-${day}`;
      return previousDateString;
   } %>
      <% let pervdaydate=getpervday(today.date)%>
      <div style="display: flex;gap:24px;align-items: center;">
        <div style="display: flex;
align-items: center;
gap: 8px;
cursor: pointer;
border-radius: var(--radius-medium, 8px);
background: var(--gray-50, #F9FAFB);">
          <div style="display: flex;
padding: 10px 14px;
justify-content: center;
align-items: center;
gap: 8px;
font-size: 16px;
font-style: normal;
font-weight: 600;
line-height: 24px; 
border-radius: 6px;" onclick="changeLocation('<%=today.date%>')" class="<%=selectedDate==today.date?'container_Style activeText':'normalText'%>">
            Today
          </div>
          <div style="display: flex;
padding: 10px 14px;
justify-content: center;
align-items: center;
gap: 8px;
font-size: 16px;
font-style: normal;
font-weight: 600;
line-height: 24px; 
border-radius: 6px;
border-radius: 6px;" onclick="changeLocation('<%=pervdaydate%>')" class="<%=selectedDate==pervdaydate?'container_Style activeText':'normalText'%>">
            Yesterday
          </div>
        </div>

        <input type="date" style="display: flex;
padding: 10px 16px;
justify-content: center;
align-items: center;
gap: 8px;
border: none;
" class="datePicker container_Style" onchange="changeLocation(event.target.value)">
      </div>
    </div>
    <div style="display: flex;
gap: 16px;
justify-content: space-between;
align-items: center;
width: 100%;">
      <% let time=new Date()%>
      <% let TaskTitle=['Tasks for Today','Update on Tasks',"Today's Execution"];%>
      <% let TaskImages=[{submitted:'../Performance dashboard Icons/Weekly perfromance/Morning Loom - Submitted.svg',missed:'../Performance dashboard Icons/Weekly perfromance/Morning Loom - Not submitted.svg'}, {submitted:'https://dvfkpf9qxfl09.cloudfront.net/EmployeeProject/Noon Loom - submitted-b9867ed3-32ba-467d-8b7d-5b7967d658e1.svg xml',missed:'../Performance dashboard Icons/Weekly perfromance/Noon Loom - Not submitted.svg'},{submitted:' https://dvfkpf9qxfl09.cloudfront.net/EmployeeProject/EOD Loom - submitted-75ee716e-54e7-4f70-9dad-20cf497d9cec.svg xml',missed:'../Performance dashboard Icons/Weekly perfromance/EOD Loom - Not submitted.svg'}  ]%>
      <% for(let i=1; i<Math.min(4,dailyTaskList.length); i++) { %>
      <% let taskDeadline=new Date(performanceRecord.date) %>
      <% taskDeadline=new Date(taskDeadline.getTime() + dailyTaskList[i].deadline) %>
      <% taskDeadline.setHours(taskDeadline.getHours()-5, taskDeadline.getMinutes()-30) %>
      <% let buttonClass='disableButton',TaskImage=TaskImages[i-1].missed,TaskImageClass='disableTaskImage',taskStatusText='Submit' %>

      <% if(taskDeadline>=time || performanceRecord.links[i].length>0) {%>
      <%  buttonClass='activeButton'%>
      <% TaskImage=TaskImages[i-1].submitted%>
      <% TaskImageClass='activeTaskImage'%>
      <% taskStatusText=performanceRecord.links[i].length>0?'Check':'Submit';%>
      <%  }%>
      <% if(performanceRecord.rating>0 || performanceRecord.onLeave) {%>
      <% taskStatusText='';%>
      <%  buttonClass='disableButton'%>
      <%}%>
<% let taskmodalname=i==3?'#tasksubmiteodmodal':'#tasksubmitmodal' %>
      <div style="display: flex;
padding: 24px;
flex-direction: column;
justify-content: space-between;
align-items: flex-start;
gap: 24px;
flex: 1 0 0;
align-self: stretch;
border-radius: 12px;" class="container_Style">
        <div style="display: flex;align-items: flex-start;flex-direction: column;gap:24px;">
          <div style="display: flex;
padding: 8px;
align-items: flex-start;
gap: 4px;
border-radius: 28px;" class="TaskImageClass">
            <img src="<%=TaskImage%>">
          </div>
          <div style="display: flex;gap:4px;flex-direction: column;">
            <div style="color: var(--gray-900, #101828);
font-size: 18px;
font-style: normal;
font-weight: 600;
line-height: 28px; "><%=TaskTitle[i-1]%></div>
            <div class="text-gray-14-500"> <%= dailyTaskList[i].description %></div>
          </div>
        </div>
        <% if(performanceRecord.links[i].length > 0) {%>
        <div style="display: flex;
    justify-content: space-between;
    align-items: center;
    align-self: stretch;">
          <div style="display: flex;gap:4px;align-items: center;">
            <img src="../Performance dashboard Icons/Weekly perfromance/Loom Submited.svg">
            <div class="text-gray-14-500" style="
   text-align: center;
    letter-spacing: 0.1px;">Submitted</div>
          </div>
          <a href='<%=performanceRecord.links[i]%>' target="_blank" class="<%=buttonClass%>" style="border: none;padding: 0px;"><%=taskStatusText%></a>
        </div>
        <%}else{%>
        <button class="<%=buttonClass%>" onclick="showtaskno('<%=i%>','<%=performanceRecord.links[i]%>')" data-toggle="modal" data-target="<%=taskmodalname%>"><%=taskStatusText%></button>
        <%}%>
</div>
<% } %>
      </div>
      <a href="/editdailyTask/<%= employee._id %>" style="display: flex;
  padding: 10px 16px;
  justify-content: center;
  align-items: center;
  gap: 8px;
  border: 1px solid #48BF84;" class="container_Style">
        <img src="../Performance dashboard Icons/edit_levels.svg">
        <div style="color: #48BF84;
font-size: 16px;
font-style: normal;
font-weight: 700;
line-height: 24px; /* 150% */">Edit Daily Tasks</div>
      </a>
    </div>
    <% const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];%>
   
  </div>
  <div style="display: flex;flex-direction: column;gap:24px;width:min(100%,440px);margin-top: 40px;border-radius: var(--radius-medium, 8px);
 " class="PMgmtContainer2">
    <div style="display: flex;
     padding: 16px;
     flex-direction: column;
     align-items: flex-start;
     gap: 16px;
     align-self: stretch;" class="container_Style">
      <div style="color: var(--content-on-light-primary, #181818);
   font-size: 20px;
   font-style: normal;
   font-weight: 700;
   line-height: normal;">Your Metrics - <%=months[currentmonth]%></div>
      <div style="display: flex;gap:16px;width: 100%;flex-wrap: wrap;">
        <div style="display: flex;
   padding: 24px 20px;
   flex-direction: column;
   align-items: flex-start;
   gap: 24px;
   flex: 1 0 0;
   border-radius: var(--radius-medium, 8px);

background: var(--White, #FFF);
/* Shadow/sm */
box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.06), 0px 1px 3px 0px rgba(16, 24, 40, 0.10);">
          <div style="display: flex;
flex-direction: column;
align-items: flex-start;
gap: 20px;
align-self: stretch;">
            <div style="flex: 1 0 0;
         display: flex;
         justify-content: space-between;
         align-items: center;
         width: 100%;
         color: var(--gray-900, #101828);
         font-size: 16px;
         font-style: normal;
         font-weight: 600;
         line-height: 24px; /* 150% */"> Badges
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink" style="
          color: var(--gray-700, #344054);
          font-size: 14px;
         flex-direction: column;
          font-style: normal;
          font-weight: 500;
          line-height: 20px;
          width: 150px;
          cursor: pointer;
          overflow: hidden;
          border-radius: var(--radius-medium, 8px);
          border: 1px solid var(--gray-300, #D0D5DD);
          background: var(--White, #FFF);
          margin-left:-170px
      ">
                <div style="display: flex; justify-content: center; align-items: center; height: 44px;" data-target="#BadgesLogs" data-toggle="modal">
                  Badge Logs
                </div>
                <div style="display: flex; justify-content: center; align-items: center; border-top: 1px solid #D0D5DD; height: 44px;" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false" onclick="OpenCard('BadgesOverview')">
                  Badge Overview

                </div>

              </div>


              <img src="../Performance dashboard Icons/three_dot.svg" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false" id="dropdownMenuLink">

            </div>

            <div style="display: none;
     padding: 20px 16px;
     flex-direction: column;
     margin-top: 40px;
         right: 19.5%;
     align-items: flex-start;
     gap: 20px;
     position: absolute;
     z-index: 99;
     " class="container_Style" id="BadgesOverview" onclick="OpenCard('BadgesOverview')">
              <div style="display: flex;
             align-items: center;
             gap: 20px;
             justify-content: space-between;
             flex: 1 0 0;">
                <div style="display: flex;align-items: center;gap:20px">
                  <% if(avgpervbadges<=avgbadges){%>
                  <div style="display: flex;
               width: 48px;
               height: 48px;
               padding: 12px;
               justify-content: center;
               align-items: center;
               border-radius: 28px;
               border: 8px solid var(--success-50, #ECFDF3);
               background: var(--success-100, #D1FADF);">
                    <img src='../Performance dashboard Icons/increase.svg'>
                  </div>
                  <%}else{%>
                  <div style="display: flex;
                               width: 48px;
                               height: 48px;
                               padding: 12px;
                               justify-content: center;
                               align-items: center;
                               border-radius: 28px;
               border: 8px solid var(--error-50, #FEF3F2);
               background: var(--error-100, #FEE4E2);
               ">
                    <img src='../Performance dashboard Icons/decrease.svg'>
                  </div>

                  <%}%>
                             <div style="color: var(--gray-900, #101828);
             font-size: 16px;
             font-style: normal;
             font-weight: 500;
             line-height: 24px; /* 150% */
             letter-spacing: 0.24px;">
                               <%=avgpervbadges==0?'0':(100* Math.abs(avgbadges-avgpervbadges)/avgpervbadges).toFixed(1)%>% Badges <%=avgbadges-avgpervbadges>0?'Increased':'Decreased'%>
                </div>
              </div>
              <div>
                <img src="../Performance dashboard Icons/Cross_icons_faded.svg" style="width:24px">
              </div>
            </div>
            <div style="display: flex;
     align-items: flex-end;
     gap: 4px;
     align-self: stretch;">
              <img src="../img/gem.svg" style="width: 38px;height: 38px;">
              <div style="color: var(--gray-900, #101828);
     font-size: 30px;
     font-style: normal;
     font-weight: 700;
     line-height: 38px; 
     "><%=Monthlybadges+earnedBadgesThisMonth%></div>
              <div style="width: 91px;
     height: 22.203px;
     white-space: nowrap;
     color: var(--gray-500, #667085);
     font-size: 14px;
     font-style: normal;
     font-weight: 500;
     line-height: 18px;
     letter-spacing: 0.21px;">
                + <%=user.recent.badges%> Yesterday</div>
            </div>
            <% avgbadges+=earnedBadgesThisWeek%>
<% avgpervbadges+=earnedBadgesLastWeek%>
            <div style="display: flex;gap:4px;align-items: center;">
              <img src="<%=(avgpervbadges-avgbadges)<=0?'../Performance dashboard Icons/increase_arrow.svg':'../Performance dashboard Icons/decrease_arrow.svg'%>">
              <% let color = (avgpervbadges - avgbadges) <= 0 ? '#48BF84' : '#F44336'; %>
              <div style="
               text-align: center;
               font-size: 14px;
               font-style: normal;
               font-weight: 500;
               line-height: 20px;
               color: <%= color %>;
             "><%= Math.abs(avgbadges - avgpervbadges).toFixed(1) %></div>

              <div style="width: 260px;
     color: var(--gray-500, #667085);
     font-size: 14px;
     font-style: normal;
     font-weight: 500;
     line-height: 20px; /* 142.857% */
     letter-spacing: 0.21px;">
                Vs last week</div>
            </div>

            <div style="display: flex;flex-direction: column;gap:4px;width: 100%;">
              <div style="display: flex;align-items: center;justify-content: space-between;width: 100%;">

                <div style="color: var(--gray-700, #344054);
               font-size: 14px;
               font-style: normal;
               font-weight: 600;
               line-height: 20px; /* 142.857% */
     ">Current Badges</div>
                <div style="display: flex;align-items: center;gap:4px;">
                  <img src="../img/gem.svg" style="width: 24px;height: 24px;">
                  <div style="color: var(--gray-700, #344054);
     text-align: center;
     font-size: 14px;
     font-style: normal;
     font-weight: 500;
     line-height: normal;"><%=user.badges- user.usedBadges%></div>
                </div>

              </div>
              <div style="display: flex;align-items: center;justify-content: space-between;width: 100%;">

                <div style="color: var(--gray-700, #344054);
               font-size: 14px;
               font-style: normal;
               font-weight: 600;
               line-height: 20px; /* 142.857% */
     ">Total Earned</div>
                <div style="display: flex;align-items: center;gap:4px;">
                  <img src="../img/gem.svg" style="width: 24px;height: 24px;">
                  <div style="color: var(--gray-700, #344054);
     text-align: center;
     font-size: 14px;
     font-style: normal;
     font-weight: 500;
     line-height: normal;"><%=user.badges%></div>
                </div>

              </div>
            </div>

          </div>




          <div style="display: flex;
                         flex-direction: column;
                         align-items: flex-start;
                         gap: 12px;">
            <div style="display: flex;
                       gap:8px;">
              <img src="../img/gem.svg" style="width: 32px;">
              <div style="color: var(--gray-800, #1D2939);
                       font-size: 30px;
                       font-style: normal;
                       font-weight: 700;
                       line-height: 38px; /* 126.667% */">
                <%=Monthlybadges+earnedBadgesThisMonth%>
                <!-- <span style="color: var(--gray-400, #98A2B3);">/50</span>   -->
              </div>
            </div>
            <div style="color: var(--gray-500, #667085);
                       font-size: 12px;
                       font-style: normal;
                       font-weight: 500;
                       white-space: nowrap;
                       line-height: 20px; /* 166.6">+ <%=user.recent.badges%> Yesterday</div>
          </div>



          <div style="display: flex;
justify-content: space-between;
align-items: center;
align-self: stretch;">
            <div class="text-gray-14-500">Total</div>
            <div style="display: flex;gap:4px;align-items: center;"><img src="../img/gem.svg" style="width: 32px;"><span class="text-gray-14-500" style="
text-align: center;
line-height: normal;"><%=user.badges%></span></div>
          </div>


        </div>
      </div>
      <div style="display: flex;
   padding: 24px 20px;
   flex-direction: column;
   align-items: flex-start;
   gap: 24px;
   flex: 1 0 0;
   border-radius: var(--radius-medium, 8px);

background: var(--White, #FFF);
/* Shadow/sm */
box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.06), 0px 1px 3px 0px rgba(16, 24, 40, 0.10);">
        <div style="display: flex;
 flex-direction: column;
 align-items: flex-start;
 gap: 20px;
 align-self: stretch;">
          <div style="display: flex;justify-content: space-between;">
            <div style="flex: 1 0 0;
color: var(--gray-900, #101828);
font-size: 16px;
font-style: normal;
cursor: pointer;
font-weight: 600;
line-height: 24px; /* 150% */" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <%=months[currentmonth].length>5?months[currentmonth].substr(0,3):months[currentmonth]%> Avg. Rating <img src="../Performance dashboard Icons/down chevron.svg">
              <div class="dropdown-menu" style="
padding: 20px 16px;
margin-left: -158px;
flex-direction: column;
align-items: flex-start;
gap: 20px;
" class="container_Style">
                <div style="display: flex;
 align-items: center;
 gap: 20px;
 justify-content: space-between;
 flex: 1 0 0;">
                  <div style="display: flex;align-items: center;gap:20px">
                    <% if(avgpervrating<=avgrating){%>
                    <div style="display: flex;
width: 48px;
height: 48px;
padding: 12px;
justify-content: center;
align-items: center;
border-radius: 28px;
border: 8px solid var(--success-50, #ECFDF3);
background: var(--success-100, #D1FADF);">
                      <img src='../Performance dashboard Icons/increase.svg'>
                    </div>
                    <%}else{%>
                    <div style="display: flex;
    width: 48px;
    height: 48px;
    padding: 12px;
    justify-content: center;
    align-items: center;
    border-radius: 28px;
border: 8px solid var(--error-50, #FEF3F2);
background: var(--error-100, #FEE4E2);
">
                      <img src='../Performance dashboard Icons/decrease.svg'>
                    </div>

                    <%}%>
  <div style="color: var(--gray-900, #101828);
font-size: 16px;
font-style: normal;
font-weight: 500;
line-height: 24px; /* 150% */
letter-spacing: 0.24px;">
    <%=avgpervrating==0?'100%':(100* Math.abs(avgpervrating-avgrating)/avgpervrating).toFixed(1)%> % Rating <%=(avgpervrating-avgrating)>0?'Decreased':'Increased'%>
                  </div>
                </div>
                <div>
                  <img src="../Performance dashboard Icons/Cross_icons_faded.svg" style="width:24px">
                </div>
              </div>
              <div style="display: flex;
align-items: flex-end;
gap: 4px;
align-self: stretch;">
                <img src="../img/filled-star.svg" style="width: 38px;height: 38px;">
                <div style="color: var(--gray-900, #101828);
font-size: 30px;
font-style: normal;
font-weight: 700;
line-height: 38px; /* 126.667% */
"><%=avgMonthlyrating%></div>
                <div style="width: 91px;
height: 22.203px;
color: var(--gray-500, #667085);
font-size: 14px;
font-style: normal;
font-weight: 500;
white-space: nowrap;
line-height: 18px; /* 128.571% */
letter-spacing: 0.21px;">
                  <%=user.recent.rating%> Yesterday</div>
              </div>
              <div style="display: flex;gap:4px;align-items: center;">
                <img src="<%=(avgpervrating-avgrating)<=0?'../Performance dashboard Icons/increase_arrow.svg':'../Performance dashboard Icons/decrease_arrow.svg'%>">
                <%  color = (avgpervrating-avgrating) <= 0 ? '#48BF84' : '#F44336'; %>
                <div style="
      text-align: center;
      font-size: 14px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px;
      color: <%= color %>;
    "><%= Math.abs(avgpervrating-avgrating).toFixed(1) %></div>
                <div style="width: 260px;
color: var(--gray-500, #667085);
font-size: 14px;
font-style: normal;
font-weight: 500;
line-height: 20px; /* 142.857% */
letter-spacing: 0.21px;">
                  Vs last week</div>
              </div>
            </div>
          </div>

        </div>

      </div>

      <div style="display: flex;
flex-direction: column;
align-items: flex-start;
gap: 12px;">
        <div style="display: flex;
gap:8px;">
          <img src="../img/filled-star.svg" style="width: 32px;">
          <div style="color: var(--gray-800, #1D2939);
font-size: 30px;
font-style: normal;
font-weight: 700;
line-height: 38px; /* 126.667% */"><%=avgMonthlyrating%></div>
        </div>
        <div style="color: var(--gray-500, #667085);
font-size: 12px;
font-style: normal;
white-space: nowrap;
font-weight: 500;
line-height: 20px; /* 166.6"><%=user.recent.rating%> Yesterday</div>
      </div>
      <div style="display: flex;
justify-content: space-between;
align-items: center;
align-self: stretch;">
        <div class="text-gray-14-500">Average rating </div>
        <div class="text-gray-14-500" style="display: flex;gap:4px;
line-height: normal;">
          <img src="../img/filled-star.svg" style="width: 16px;
height: 19px;">
          <% if(user.rating.cnt===0) { %>
          0.0
          <% } else { %>
          <%= Math.round((user.rating.value/user.rating.cnt)*100)/100 %>
          <% } %>
        </div>
      </div>

    </div>
  </div>
  </div>
  <div style="display: flex;
padding: 24px;
flex-direction: column;
gap: 2rem;
align-self: stretch;
font-size: 14px;
" class="container_Style">
    <div style="display: flex;gap:4px;align-items: center;width: 100%;">
      <div style="flex: 1 0 0;
color: var(--gray-900, #101828);
font-size: 20px;
font-style: normal;
font-weight: 700;
line-height: normal;"><%=user.firstName%>'s Performance Score </div>
      <!-- <div style="display: none;
position: absolute;
align-items: center;
z-index: 90;
transition: all 1s ease 0.5s;
margin-right:75px;
flex: 1 0 0;
" class="PerformanceScoreDetails">
        <div style="display: flex;
 padding: 12px;
 flex-direction: column;
 align-items: flex-start;
 gap: 12px;
 flex: 1 0 0;
 border-radius: var(--radius-medium, 8px);
 background: var(--gray-900, #101828)">
          <div style="display: flex;
 flex-direction: column;
 align-items: flex-start;
 gap: 6px;
 align-self: stretch;">
            <div style="align-self: stretch;
color: var(--White, #FFF);

font-size: 14px;
font-style: normal;
font-weight: 600;
line-height: 18px; /* 128.571% */
">
              Performance Score Details
            </div>
            <div style="align-self: stretch;
color: var(--White, #FFF);

font-size: 14px;
font-style: normal;
font-weight: 400;
line-height: 18px; /* 128.571% */
letter-spacing: 0.14px;
">
              Your score is based on task quality, speed, ratings, task badges, monthly ratings, LOOM badges, leaves taken, and daily LOOM updates. Keep excelling to boost your score!
            </div>
          </div>
          <div style="display: flex;align-items:center;justify-content: space-between;
width: 100%;">
            <div>
              <div style="align-self: stretch;
color: var(--White, #FFF);

font-size: 14px;
font-style: normal;
font-weight: 700;
line-height: 18px; /* 128.571% */">
                Top Performer
              </div>
              <div style="align-self: stretch;
color: var(--White, #FFF);

font-size: 12px;
font-style: normal;
font-weight: 400;
line-height: 18px; /* 150% */
">
                topPerformer.name
              </div>
            </div>
            <div style="color: var(--White, #FFF);

font-size: 14px;
font-style: normal;
font-weight: 700;
line-height: 18px; /* 128.571% */
">topPerformer.performanceScore</div>
          </div>
          <div style="display: flex;align-items: center;justify-content: space-between;
width: 100%;">
            <div style="align-self: stretch;
color: var(--White, #FFF);

font-size: 14px;
font-style: normal;
font-weight: 700;
line-height: 18px; /* 128.571% */
">Expected performance</div>
            <div style="color: var(--White, #FFF);

font-size: 14px;
font-style: normal;
font-weight: 700;
line-height: 18px; /* 128.571% */
">90</div>
          </div>
        </div>
        <img src="../Performance dashboard Icons/Tooltip.svg" style="margin-left: -2px;">
      </div>
      <img src="../Performance dashboard Icons/alert.svg" onmouseover="showIcons('.PerformanceScoreDetails')" onmouseleave="removeIcons('.PerformanceScoreDetails')"> -->
      <div style="display: flex;align-items: center;justify-content: center;" class="FaPencil" data-toggle="modal" data-target="#ConfigurePerformanceScore">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" >
          <path d="M16 1.82843C16.2626 1.56578 16.5744 1.35744 16.9176 1.2153C17.2608 1.07316 17.6286 1 18 1C18.3714 1 18.7392 1.07316 19.0824 1.2153C19.4256 1.35744 19.7374 1.56578 20 1.82843C20.2626 2.09107 20.471 2.40287 20.6131 2.74603C20.7553 3.0892 20.8284 3.45699 20.8284 3.82843C20.8284 4.19986 20.7553 4.56766 20.6131 4.91082C20.471 5.25398 20.2626 5.56578 20 5.82843L6.5 19.3284L1 20.8284L2.5 15.3284L16 1.82843Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
    <!-- onmouseover="SetHoverState(); showIcons('.onhover'); removeIcons('.offhover');"
    onmouseleave="removeIcons('.onhover'); showIcons('.offhover');" -->
    <div
    id="points-progress"
    class="semicircle"
   
  >   <svg width="100%" height="100%" viewBox="-5 -5 110 63" xmlns="http://www.w3.org/2000/svg" class="PIndicator">
        <path id="placeholder"  class="offhover"d="M 50,50 m -47,0 a 47,47 0 1 1 94,0" stroke="#eeeeee" stroke-width="10" stroke-linecap="round" fill-opacity="0"></path>
         <path id="sports"  class="offhover" d="M 50,50 m -47,0 a 47,47 0 1 1 94,0" stroke="#113D6B" stroke-linecap="round" stroke-width="10" fill-opacity="0"></path>
         </svg>
       <div style="margin-top: 80px;position:absolute;display: flex;flex-direction: column;align-items: center;justify-content: center;">
        <div style="color: var(--Gray-500, #667085);
        text-align: center;
        font-size: 14px;
        font-style: normal;
        font-weight: 600;
        line-height: 20px; /* 142.857% */
        ">Performance Score</div>
        <div id="performanceScoreText" style="color: var(--Gray-900, #101828);
        text-align: center;
        font-size: 48px;
        font-style: normal;
        font-weight: 600;
        line-height: 60px; /* 125% */
        letter-spacing: -0.96px;
        "></div>

       </div>
      </div>

    <div style="    text-align: center;
    color: #48BF84;
    font-size: 16px;
    display: flex;
    justify-content: center;
    gap: 8px;
    align-items: center;"> View Breakdown  <i class="fa fa-angle-down "  style="font-size: 24px;"id="viewBreakDownIcon" onclick="CloseBox('.performanceBox','viewBreakDownIcon','flex')"></i></div>

    <div style="width: 100%; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 24px; display: none" class="performanceBox">
      <div style="align-self: stretch; padding-top: 12px; padding-bottom: 12px; justify-content: center; align-items: flex-start; gap: 32px; display: inline-flex">
        <div style="flex: 1 1 0; flex-direction: column; justify-content: center; align-items: center; gap: 8px; display: inline-flex">
          <div class="progresscircle-bar" style="width: 64px; height: 64px; position: relative;background: radial-gradient(closest-side, white 79%, transparent 80% 100%), conic-gradient(#48bf84 calc(<%=avgQuality%> * 10%), #F2F4F7 0); animation: html-progresscircle 2s 1 forwards;" >
            <div style="top: 22px;left:26px; position: absolute; text-align: center; color: #344054; font-size: 16px;  font-weight: 600; line-height: 20px; word-wrap: break-word"><%=avgQuality%></div>
            <progress id="progresstask" min="0" max="10" value="<%=avgQuality%>"></progress>
        </div>
          
          <div style="text-align: center; color: #667085; font-size: 12px;  font-weight: 500; line-height: 18px; word-wrap: break-word">Average Quality score</div>
        </div>
        <div style="flex: 1 1 0; flex-direction: column; justify-content: center; align-items: center; gap: 8px; display: inline-flex">
          <div class="progresscircle-bar" style="width: 64px; height: 64px; position: relative;background: radial-gradient(closest-side, white 79%, transparent 80% 100%), conic-gradient(#48bf84 calc(<%=avgSpeed%> * 10%), #F2F4F7 0); animation: html-progresscircle 2s 1 forwards;" >
            <div style="top: 22px;left:26px; position: absolute; text-align: center; color: #344054; font-size: 16px;  font-weight: 600; line-height: 20px; word-wrap: break-word"><%=avgSpeed%></div>
            <progress id="progresstask" min="0" max="10" value="<%=avgSpeed%>"></progress>
        </div>
          <div style="text-align: center; color: #667085; font-size: 12px;  font-weight: 500; line-height: 18px; word-wrap: break-word">Average Speed score</div>
        </div>
      </div>
      <div style="align-self: stretch;flex-direction: column; justify-content: flex-start; align-items: center; gap: 24px; display: flex">
        <!-- <div style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex">
          <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Average Tasks rating</div>
          <div style="justify-content: center; align-items: center; gap: 4px; display: flex">
              <img src="../img/filled-star.svg" style="width: 24px; height: 24px;" />
            <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word">4.2</div>
          </div>
        </div> -->
        <div style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex">
          <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Total Badges earned for tasks</div>
          <div style="justify-content: flex-start; align-items: flex-start; gap: 4px; display: flex">
            <div style="width: 24px; height: 24px; justify-content: center; align-items: center; display: flex">
              <div style="flex: 1 1 0; align-self: stretch;  padding-left: 3.91px; padding-right: 3.89px; justify-content: center; align-items: center; display: inline-flex">
                <img src="../img/gem.svg" style="width: 21px; height: 21px;">
              </div>
            </div>
            <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=earnedBadgesThisMonth%></div>
          </div>
        </div>
        <div style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex">
          <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Average monthly rating</div>
          <div style="justify-content: center; align-items: center; gap: 4px; display: flex">
            <img src="../img/filled-star.svg" style="width: 24px; height: 24px;" />
            <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=avgMonthlyrating%></div>
          </div>
        </div>
        <div style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex">
          <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Total Badges earned for Looms</div>
          <div style="justify-content: flex-start; align-items: flex-start; gap: 4px; display: flex">
            <div style="width: 24px; height: 24px; justify-content: center; align-items: center; display: flex">
              <div style="flex: 1 1 0; align-self: stretch; padding-top: 3.91px; padding-bottom: 3.89px; padding-left: 3.91px; padding-right: 3.89px; justify-content: center; align-items: center; display: inline-flex">
                <img src="../img/gem.svg" style="width: 21px; height: 21px;">
              </div>
            </div>
            <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=Monthlybadges%></div>
          </div>
        </div>
        <div style="align-self: stretch; justify-content: flex-start; align-items: center; gap: 4px; display: inline-flex">
          <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Leaves Taken</div>
          <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=leavesTaken%></div>
        </div>
        <div style="align-self: stretch; justify-content: flex-start; align-items: center; gap: 4px; display: inline-flex">
          <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Looms missed</div>
          <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=loomsMissed%></div>
        </div>
        <div style="align-self: stretch; justify-content: flex-start; align-items: center; gap: 4px; display: inline-flex">
          <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Performance Level</div>
          <div style="justify-content: flex-start; align-items: center; gap: 4px; display: flex" id="PerformanceLevel">
             
             
        
          </div>
        </div>
      </div>
    </div>

    <div style="display: flex;
    justify-content: space-between;
    align-items: flex-start;
    align-self: stretch;
    color: var(--Gray-700, #344054);
    text-align: center;
    
    font-size: 14px;
    font-style: normal;
    font-weight: 600;
    line-height: 20px;
    ">
       <div style="display: flex;
       flex-direction: column;
       align-items: center;
       gap: 4px;"
       >
       <span style="color: var(--Error-500, #EF4444); background: var(--Error-50, #FEF3F2); padding: 2px 8px 2px 6px; border-radius: 16px;">
         <svg xmlns="http://www.w3.org/2000/svg" width="8" height="9" viewBox="0 0 8 9" fill="none"><circle cx="4" cy="4.1582" r="3" fill="var(--Error-500, #EF4444)" /></svg> Poor    </span>
   
       <div>
         0-50
       </div>
       </div>
       <div style="display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;"
        >
        <span style="color: var(--Warning-500, #FDB022); background: var(--Warning-50, #FFFAEB); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.33203" cy="4" r="3" fill="#FDB022"/></svg> Fair
             </span>
        <div>
          51-80
        </div>
        </div>
        <div style="display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;"
        >
        <span style="color: #2E90FA; background: var(--Blue-50, #EFF8FF); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.66797" cy="4" r="3" fill="#2E90FA"/></svg> Great
            </span>
        <div>
          81-90
        </div>
        <div style="color: var(--Gray-600, #475467);
        text-align: center;
        
        font-size: 12px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px;">
          Expected
        </div>
        </div>
        <div style="display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        "
        
        >
       
        
       <span style="color: #48bf84; background: var(--Success-50, #ECFDF3); padding: 2px 8px 2px 6px; border-radius: 16px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8" fill="none"><circle cx="4" cy="4" r="3" fill="#48BF84"/></svg> Superb
    </span>
        <div>
          91-100
        </div>
        </div>
    </div>
    <div id="NudegFeedbackBody" style="display: flex;flex-direction:column ;gap:12px;">
   
  </div>

    <div style="display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
    align-self: stretch;">
      <div style="display: flex;
      align-items: flex-start;
      gap: 1rem;
      align-self: stretch;">
        <img style="display: flex;
        width: 40px;
        height: 40px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 200px;
        background: var(--Avatar-user-square-Olivia-Rhye, url(<path-to-image>), lightgray 50% / cover no-repeat);
        "
        src="<%=managerVisitingInfo.image%>">
          <textarea style="display: flex;
          padding: 12px 16px;
          align-items: flex-start;
          gap: 4px;
          flex: 1 0 0;
          border-radius: var(--Radius-medium, 8px);
          border: 1.5px solid var(--Gray-300, #D0D5DD);
          background: #FFF;"
          placeholder="Provide critical feedback, appreciation, or suggestions here..."
          id="feedback-textarea"
          onchange="ChangeFeedback(event.target.value)"
          type="text"></textarea>
      </div>

      <div
        style="display: flex;
        justify-content: end;
        align-items: flex-start;
        gap: 16px;
        align-self: stretch;
        padding-left: 56px;"
      >
      <button style="display: flex;
      background-color: #fff;
      padding: 8px 16px;
      justify-content: center;
      align-items: center;
      gap: 37px;
      align-self: stretch;
      border-radius: var(--Radius-medium, 8px);
      border: 1px solid var(--Brand-Primary, #48BF84);
      color: var(--Brand-Primary, #48BF84);
      text-align: center;
      
      font-size: 14px;
      font-style: normal;
      font-weight: 600;
      line-height: normal;
      "
      onclick="submitFeedback()"
      >Add Comment</button>
      <button style="display: flex;
      background-color: #fff;
      height: 46px;
      padding: 8px 16px;
      justify-content: center;
      align-items: center;
      gap: 8px;
      flex: 1 0 0;
      border-radius: var(--Radius-medium, 8px);
      border: 1px solid var(--Gray-300, #D0D5DD);
      "
      onclick="SetNudgeInfo('','')"
      data-toggle="modal"
      data-target="#customnudge"
      >
      Custom Nudge
      </button>
    
    </div>


    </div>

<div data-target="#modal-view-performance" data-toggle="modal" style="display: flex;
justify-content: flex-end;
padding-top:16px;
border-top:1px solid #EAECF0;
align-items: center;
gap: 16px;
cursor: pointer;
color: #48bf84;
align-self: stretch;
" class="heading" onclick="PerformanceViewStreakModal('PerformanceReportStreakBody')">View Performance report</div>
  </div>
  <a href="/rewards/<%=employee._id%>" style="display: flex;
padding: 20px 24px;
justify-content: center;
align-items: center;
gap: 16px;
align-self: stretch;" class="container_Style">
    <div style="display: flex;
flex-direction: column;
justify-content: space-between;
align-items: flex-start;
flex: 1 0 0;
gap:10px;
align-self: stretch;">
      <div style="color: var(--gray-900, #101828);
font-size: 16px;
font-style: normal;
font-weight: 600;
line-height: 24px; /* 150% */">Next reward</div>
      <div style="display: flex;gap:4px;align-items: center;">
        <img src="../img/gem.svg" style="width: 28.5px;
height: 28.5px;
flex-shrink: 0;">
        <div style="color: var(--gray-900, #101828);
font-size: 22px;
font-style: normal;
font-weight: 700;
line-height: 28.5px; /* 129.545% */"><%=user.badges-user.usedBadges%>/<%=rewards[0][2]%></div>
      </div>
      <div style="flex: 1 0 0;
color: var(--gray-500, #667085);
font-size: 14px;
font-style: normal;
font-weight: 500;
line-height: 20px; /* 142.857% */
letter-spacing: 0.21px;
"><%=rewards[0][0]%></div>
      <div style="color: #48BF84;
font-size: 16px;
font-style: normal;
font-weight: 700;
line-height: 24px; /* 150% */">View All Rewards</div>
    </div>
    <div style="display: flex;
padding: 8px;
flex-direction: column;
justify-content: center;
align-items: flex-start;
gap: 16px;
border-radius: var(--radius-medium, 8px);
background: radial-gradient(295.3% 157.83% at 100% 102.56%, #1AF287 0%, #FFF 100%);">
      <img src="<%=rewards[0][3]%>" style="width: 132.466px;
height: 132.466px;
border-radius: 8px;
">
    </div>
  </a>


  <% if (bonusInfo) { %>
    <div style="display: flex;
    padding: 1.5rem;
    flex-direction: column;
    gap: 16px;
    align-self: stretch;" class="container_Style">
    <div style="flex: 1 0 0;
      color: var(--gray-900, #101828);
      font-size: 20px;
      font-style: normal;
      font-weight: 700;
      line-height: normal;">Joining and Retention Bonuses
    </div>
    <div 
    style="display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    gap: 24px;
    align-self: stretch;"
    >
  
  
      <div style="display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      gap: 12px;
      align-self: stretch;"
      >
        <div style="color: var(--gray-700, #344054);
        
        font-size: 16px;
        font-style: normal;
        font-weight: 600;
        line-height: 24px; /* 150% */"
        > 
        Total Bonus Amount
      </div>
      <div style="display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 12px;">
      <div style="color: var(--gray-700, #344054);
      
      font-size: 30px;
      font-style: normal;
      font-weight: 700;
      line-height: 38px; /* 126.667% */">
      ₹<%= totalBonusAmount %>
    </div>
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 24px; /* 171.429% */">
    (available after <%= bonusInfo?.vestingPeriod %> yr)
    </div>
    </div>
    </div>
  
  
      <div style="display: flex;
      justify-content: space-between;
      align-items: center;
      align-self: stretch;">
      <div style="color: var(--gray-500, #667085);
      
      font-size: 16px;
      font-style: normal;
      font-weight: 600;
      line-height: 24px;">Current Bonus Balance
      </div>
    <div style="color: var(--gray-700, #344054);
    
    font-size: 16px;
    font-style: normal;
    font-weight: 700;
    line-height: 24px; /* 150% */">
    ₹<%= currBonusValue %>
    </div>
  
    </div>
  <% if (isMonthPassed > 0) { %>
  <div style="display: flex;align-items: center;gap:8px">
  
  <div style="display: flex;
  width: 24px;
  height: 24px;
  padding: 6px;
  justify-content: center;
  align-items: center;
  border-radius: 14px;
  border: 4px solid var(--success-50, #ECFDF3);
  background: var(--success-100, #D1FADF);">
    <img src='../Performance dashboard Icons/increase.svg' style="width: 12px;
    height: 12px;">
  </div>
  <div style="color: var(--gray-500, #667085);
  
  font-size: 16px;
  font-style: normal;
  font-weight: 600;
  line-height: 24px; /* 150% */">
  ₹<%= lastMonthBonus%> last month
  </div>
  </div>
  <% } %>
  </div>
  
  <div style="display: flex;
  padding: 4px 0px;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  align-self: stretch;">
    <div class="progressTask" style="width: 100%;">
      <div class="progress__fill" style="width: <%= bonusPercentageTime %>%;" ></div>
    </div>
    
    <div style="display: flex;
    justify-content: space-between;
    align-items: center;
    align-self: stretch;color: var(--gray-500, #667085);
  font-size: 14px;
  width: 100%;
  font-style: normal;
  font-weight: 500;
  line-height: 24px;">
  <span >
  M0  
  </span>  
  <% let monthNo=1%>
    <% for(let monthInfo of bonusInfo.monthlyDistribution||[]) {%>
     <% for(let i=monthNo;i<=monthInfo.monthNo-1;i++){%>
      <span style="visibility: hidden;">M<%= i %></span>
      <%}%>
      <span >M<%= monthInfo.monthNo %></span>
      <% monthNo=monthInfo.monthNo+1%>
      <%}%>
      <% for(let i=monthNo;i<=12;i++){%>
        <span style="visibility: hidden;">M<%= i %></span>
        <%}%>
  <% if(bonusInfo?.vestingPeriod > 1) { %>
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */">
    2Y  
    </div>
  <% } %>
  </div>
  
  
  
  </div>
  
  <div style="display: flex;
  border-top: 1px solid #EAECF0;
  justify-content: flex-end;
  align-items: center;
  gap: 16px;
  padding-top:16px ;
  align-self: stretch;">
      <a  href='/admin/bonus?employeeId=<%= employee._id %>' style="color: var(--brand-primary, #48BF84);
        
        font-size: 14px;
        font-style: normal;
        font-weight: 600;
        line-height: 20px; /* 142.857% */">View Bonuses</a>
    </div>
  
  </div>
  <% } else { %>
    <div style="display: flex;
    padding: 1.5rem;
    flex-direction: column;
    gap: 16px;
    align-self: stretch;" class="container_Style">
    <div style="flex: 1 0 0;
      color: var(--gray-900, #101828);
      font-size: 20px;
      font-style: normal;
      font-weight: 700;
      line-height: normal;">Joining and Retention Bonuses
    </div>
    <div
      style="display: grid; place-items: center"
      >
                <div class="content">
                  <div style="text-align: center; font-size: 50px">
                    <img src="../img/icons/gift.svg">
                  </div>
                  <div class="mt-2">
                    <h2
                      style="
                        text-align: center;
                        color: var(--gray-800, #1d2939);
                        text-align: center;
                        
                        font-size: 16px;
                        font-style: normal;
                        font-weight: 600;
                        line-height: 24px; /* 150% */
                        letter-spacing: 0.24px;
                      "
                    >
                      Bonus for <%= firstName %> is not set up yet.
                    </h2>
                  </div>
                  <div style="text-align: center" class="mt-4">
                    <button
                      class="btn btn-success"
                      onclick="window.location.href='/admin/bonus?employeeId=<%= employee._id %>'"
                    >
                      Set Up Bonuses
                    </button>
                  </div>
                </div>

            
              </div>
              
    </div>
    <% } %>
  
  <% if (esopInfo) { %>
    <div style="display: flex;
    padding: 24px;
    flex-direction: column;
    gap: 24px;
    align-self: stretch;" class="container_Style">
    <div style="flex: 1 0 0;
    color: var(--gray-900, #101828);
    font-size: 20px;
    font-style: normal;
    font-weight: 700;
    line-height: normal;"> ESOPs</div>
    <div style="display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
    align-self: stretch;">
    <div style="display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    gap: 8px;
    align-self: stretch;">
  
    <div style="display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    gap: 12px;
    align-self: stretch;">
    <div style="color: var(--gray-700, #344054);
    
    font-size: 16px;
    font-style: normal;
    font-weight: 600;
    line-height: 24px; /* 150% */">
    Total Units Granted
    </div>
    <div style="display: flex;
    justify-content: center;
    align-items: flex-end;
    gap: 12px;">
    <div style="color: var(--gray-700, #344054);
    
    font-size: 30px;
    font-style: normal;
    font-weight: 700;
    line-height: 38px; /* 126.667% */">
   <%= esopInfo.units %> units
    </div>
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 24px; /* 171.429% */">
    (over <%= esopInfo?.vestingPeriod %> years)
    </div>
    </div>
    </div>
    <div style="display: flex;
    justify-content: space-between;
    align-items: center;
    align-self: stretch;">
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */">
    Current Value  
    </div>
    <div style="color: var(--gray-700, #344054);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 700;
    line-height: 24px; /* 171.429% */">
    ₹<%= currTotalValue %>
    </div>
    </div>
    </div>
    <div style="display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    align-self: stretch;">
    <div style="display: flex;
    justify-content: space-between;
    align-items: center;
    align-self: stretch;">
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */">
    Total ESOPs Currently Held
    </div>
    <div style="color: var(--gray-700, #344054);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 600;
    line-height: 24px; /* 171.429% */">
    <%= unitsAlloted %> units
    </div>
    </div>
    <div style="display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: -7px;
    align-self: stretch;">
    <div style="display: flex;
    justify-content: space-between;
    align-items: center;
    align-self: stretch;">
    <div style="color: var(--gray-700, #344054);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 600;
    line-height: 24px; /* 171.429% */">
      Current value of ESOPs Held 
    </div>
    <div style="color: var(--gray-700, #344054);
    
    font-size: 16px;
    font-style: normal;
    font-weight: 700;
    line-height: 38px; /* 237.5% */">
    ₹
    <%if (unitsAlloted > 0) {%>
      <%= currValue %>
      <%} else { %>
      -
      <% } %>
    </div>
    
    </div>
    <div style="color: var(--gray-500, #667085);
    text-align: right;
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */
    letter-spacing: 0.21px;
    margin-left: auto;">
    ₹<%= unitValue %>/unit   <!-- TODO: -->
  </div>
  </div>
    </div>
  
    <div style="display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    width: 100%;">
  
    <div style="display: flex;align-items: center;justify-content: space-between;width: 100%;">
    </div>
  
    <div style="display: flex;
    padding: 4px 0px;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
    align-self: stretch;">
  
    <div class="progressTask" style="width: 100%;">
    <div class="progress__fill" style="width: <%=esopsPercentageTime%>%;"></div>
    </div>
    <div style="display: flex;
    justify-content: space-between;
    align-items: center;
    align-self: stretch;">
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */">
  
    </div>  
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */">
    1Y
    </div>  
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */">
    2Y  
    </div>  
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */">
    3Y  
    </div>  
    <div style="color: var(--gray-500, #667085);
    
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 171.429% */">
    4Y  
    </div>  
    </div>
    </div>
    </div>
    </div>
    <div style="display: flex;
    border-top: 1px solid #EAECF0;
    justify-content: flex-end;
    align-items: center;
    gap: 16px;
    padding-top:1rem ;
    align-self: stretch;">
    <a  href='/admin/bonus?employeeId=<%= employee._id %>'style="color: var(--brand-primary, #48BF84);
      
      font-size: 14px;
      font-style: normal;
      font-weight: 600;
      line-height: 20px; /* 142.857% */">View ESOPs</a>
    </div>
    </div>
    <% } else { %>
      <div style="display: flex;
    padding: 1.5rem;
    flex-direction: column;
    gap: 16px;
    align-self: stretch;" class="container_Style">
    <div style="flex: 1 0 0;
    color: var(--gray-900, #101828);
    font-size: 20px;
    font-style: normal;
    font-weight: 700;
    line-height: normal;">ESOPs
  </div>
      <div
                style="display: grid; place-items: center"
              >
                <div class="content">
                  <div style="text-align: center; font-size: 50px">
                    <img src="../img/icons/gift.svg">
                  </div>
                  <div class="mt-2">
                    <h2
                      style="
                        text-align: center;
                        color: var(--gray-800, #1d2939);
                        text-align: center;
                        
                        font-size: 16px;
                        font-style: normal;
                        font-weight: 600;
                        line-height: 24px; /* 150% */
                        letter-spacing: 0.24px;
                      "
                    >
                      ESOPs for <%= firstName %> are not set up yet.
                    </h2>
                  </div>
                  <div style="text-align: center" class="mt-4">
                    <button
                      class="btn btn-success"
                      onclick="window.location.href='/admin/bonus?employeeId=<%= employee._id %>'"
                    >
                      Configure ESOPs
                    </button>
                  </div>
                </div>
              </div>
              </div>
      <% } %>

  </div>
  </div>


  <!--  Show RoadMap levels modal-->

  <div class="modal fade" id="ShowRoadmap" tabindex="-1" role="dialog" aria-labelledby="modal-change-username" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
      <div class="modal-content model-xl">
        <div class="modal-header" style="display: flex;width: 100%;justify-content: space-between;align-items: center;">
          <div style="color: var(--content-on-light-primary, #181818);
            display: flex;
            gap:10px;align-items: center;
          
            font-size: 18px;
            font-style: normal;
            font-weight: 700;
            line-height: normal;">
            <div class="layer"> <img src="../Performance dashboard Icons/Levels UI/View Roadmap.svg" style="width: 22.66px;
                        height: 20.416px;
                        flex-shrink: 0;" />
            </div>
            RoadMap
          </div>
          <img src="../img/icons performance mgmt/desktop/close_40x40.svg" data-dismiss="modal">
        </div>
        <div class="modal-body">
          <div class="div-3" style="height: 150px;">
            <div class="overlap" style="height: 140px;">
              <% for(let i=0; i<levels.length; i++) { %>

              <% if(levels[i].state<=1) { %>
              <% if(levels[i].state==1){%>
              <% let percbadges =(((user.badges - levels[i-1]?.badges) / (levels[i ].badges - levels[i-1]?.badges)) * 100).toFixed(2); %>
              <div class="current-greenLine" style="width:<%=percbadges*1.5%>px"></div>
              <div class="div-5">
                <div class="heading" style="width: 30px;font-size: 16px;font-weight: 500;"><%=percbadges +'%'%></div>
                <img style="width: 35px;" src="../Performance dashboard Icons/Levels UI/Your progress- Runner.svg" />
              </div>
              <div class="current-rule" style="width:<%=(100-percbadges) *1.5%>px"></div>
              <%}%>
                  <div class="element" style="padding: 0px;gap:0px;">
                    <div style="height: 20px;"></div>
                    <img src="../Performance dashboard Icons/Levels UI/Your progress- Locked level.svg" />
                    <div class="level">
                      <div class="div-4">
                        <img class="gem" src="../img/gem.svg" />
                        <div class="text-wrapper-4" style="font-size: 11.077px;
                        font-style: normal;
                        font-weight: 600;"><%=levels[i].badges%>
            </div>
          </div>
          <div class="button" data-target="#levelModal-<%= i %>" data-toggle="modal">
            <div class="text-wrapper-5">LEVEL <%=i+1%></div>
          </div>
        </div>
      </div>
      <% if(i<levels.length-1) {%>
      <div class="dotted-rule"></div>
      <%}%>
            <%} else{%>
      <% if(i>0) {%>
      <div class="greenLine"></div>
      <%}%>
              <div class="element" style="padding: 0px;gap:0px;">
                <div style="height: 20px;"></div>
                <img src="https://dvfkpf9qxfl09.cloudfront.net/EmployeeProject/Your%20progress%20-%20Completed%20Level-805a5563-3bb4-43ec-916c-4f2fcf6f9d75.svg%20xml" />
                <div class="level">
                  <div class="div-4">
                    <img class="gem" src="../img/gem.svg" />
                    <div class="text-wrapper-4" style="font-size: 11.077px;
                    font-style: normal;
                    font-weight: 600;"><%=levels[i].badges%>
    </div>
  </div>
  <div class="button" data-target="#levelModal-<%= i %>" data-toggle="modal">
    <div class="text-wrapper-5">LEVEL <%=i+1%></div>
  </div>
  </div>
  </div>
  <%}%>
        
  <%}%>
  </div>
  </div>
  <a href="/editlevel/<%= user._id %>" style="display: flex;
            padding: 10px 16px;
            max-width: 200px;
            margin-top: 20px;
            justify-content: center;
            align-items: center;
            gap: 8px;
            border: 1px solid #48BF84;" class="container_Style">
    <img src="../Performance dashboard Icons/edit_levels.svg">
    <div style="color: #48BF84;
          font-size: 16px;
          font-style: normal;
          
          
          font-weight: 700;
          line-height: 24px; /* 150% */">Edit Levels</div>
  </a>
  </div>

  </div>
  </div>
  </div>

   <!--  View Performance Details-->

   <div class="modal fade" id="modal-view-performance" tabindex="-1" role="dialog" aria-labelledby="modal-view-performance" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
      <div class="modal-content model-xl" style="max-height: 90vh;
      overflow: auto;">
        <div class="modal-header text-16-700" style="display: flex;width: 100%;justify-content: space-between;align-items: center;flex-direction: row;">
            Performance Insights - <%=months[currentmonth]%>
          <img src="../img/icons performance mgmt/desktop/close_40x40.svg" data-dismiss="modal">
        </div>
        <div class="modal-body" style="display: flex;flex-direction: column;gap:24px;">
          <div style="display: flex;
          width: 100%;
          overflow: auto;
          padding-left: 24px;
          align-items: flex-start;
          gap: 16px;" id="PerformanceInsightsMonths">
          
          </div>
     <div style="display: flex;gap:10px;flex-wrap: wrap;">
      <div style="display: flex;
      padding: 24px;
      flex-direction: column;
      gap: 2rem;
      align-self: stretch;
      font-size: 14px;
      width:min(400px,100%);
      " class="container_Style">
          <div style="display: flex;gap:4px;align-items: center;width: 100%;">
            <div style="flex: 1 0 0;
      color: var(--gray-900, #101828);
      font-size: 20px;
      font-style: normal;
      font-weight: 700;
      line-height: normal;"><%=user.firstName%>'s Performance Score </div>
     
               </div>
          <!-- onmouseover="SetHoverState(); showIcons('.onhover'); removeIcons('.offhover');"
          onmouseleave="removeIcons('.onhover'); showIcons('.offhover');" -->
          <div
          id="points-progress"
          class="semicircle"
         
        >   <svg width="100%" height="100%" viewBox="-5 -5 110 63" xmlns="http://www.w3.org/2000/svg">
              <path id="placeholder"  class="offhover"d="M 50,50 m -47,0 a 47,47 0 1 1 94,0" stroke="#eeeeee" stroke-width="10" stroke-linecap="round" fill-opacity="0"></path>
               <path id="sportsm"  class="offhover" d="M 50,50 m -47,0 a 47,47 0 1 1 94,0" stroke="#113D6B" stroke-linecap="round" stroke-width="10" fill-opacity="0"></path>
               </svg>
             <div style="margin-top: 80px;position:absolute;display: flex;flex-direction: column;align-items: center;justify-content: center;">
              <div style="color: var(--Gray-500, #667085);
              text-align: center;
              font-size: 14px;
              font-style: normal;
              font-weight: 600;
              line-height: 20px; /* 142.857% */
              ">Performance Score</div>
              <div id="performanceScoreTextm" style="color: var(--Gray-900, #101828);
              text-align: center;
              font-size: 48px;
              font-style: normal;
              font-weight: 600;
              line-height: 60px; /* 125% */
              letter-spacing: -0.96px;
              "></div>
      
             </div>
            </div>
      
          <div style="width: 100%; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 24px; display: flex" class="performanceBox">
            <div style="align-self: stretch; padding-top: 12px; padding-bottom: 12px; justify-content: center; align-items: flex-start; gap: 32px; display: inline-flex">
              <div style="flex: 1 1 0; flex-direction: column; justify-content: center; align-items: center; gap: 8px; display: inline-flex">
                <div class="progresscircle-bar" style="width: 64px; height: 64px; position: relative;background: radial-gradient(closest-side, white 79%, transparent 80% 100%), conic-gradient(#48bf84 calc(<%=avgQuality%> * 10%), #F2F4F7 0); animation: html-progresscircle 2s 1 forwards;" >
                  <div style="top: 22px;left:26px; position: absolute; text-align: center; color: #344054; font-size: 16px;  font-weight: 600; line-height: 20px; word-wrap: break-word"><%=avgQuality%></div>
                  <progress id="progresstask" min="0" max="10" value="<%=avgQuality%>"></progress>
              </div>
                
                <div style="text-align: center; color: #667085; font-size: 12px;  font-weight: 500; line-height: 18px; word-wrap: break-word">Average Quality score</div>
              </div>
              <div style="flex: 1 1 0; flex-direction: column; justify-content: center; align-items: center; gap: 8px; display: inline-flex">
                <div class="progresscircle-bar" style="width: 64px; height: 64px; position: relative;background: radial-gradient(closest-side, white 79%, transparent 80% 100%), conic-gradient(#48bf84 calc(<%=avgSpeed%> * 10%), #F2F4F7 0); animation: html-progresscircle 2s 1 forwards;" >
                  <div style="top: 22px;left:26px; position: absolute; text-align: center; color: #344054; font-size: 16px;  font-weight: 600; line-height: 20px; word-wrap: break-word"><%=avgSpeed%></div>
                  <progress id="progresstask" min="0" max="10" value="<%=avgSpeed%>"></progress>
              </div>
                <div style="text-align: center; color: #667085; font-size: 12px;  font-weight: 500; line-height: 18px; word-wrap: break-word">Average Speed score</div>
              </div>
            </div>
            <div style="align-self: stretch;flex-direction: column; justify-content: flex-start; align-items: center; gap: 24px; display: flex">
              <!-- <div style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex">
                <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Average Tasks rating</div>
                <div style="justify-content: center; align-items: center; gap: 4px; display: flex">
                    <img src="../img/filled-star.svg" style="width: 24px; height: 24px;" />
                  <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word">4.2</div>
                </div>
              </div> -->
              <div style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex">
                <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Total Badges earned for tasks</div>
                <div style="justify-content: flex-start; align-items: flex-start; gap: 4px; display: flex">
                  <div style="width: 24px; height: 24px; justify-content: center; align-items: center; display: flex">
                    <div style="flex: 1 1 0; align-self: stretch;  padding-left: 3.91px; padding-right: 3.89px; justify-content: center; align-items: center; display: inline-flex">
                      <img src="../img/gem.svg" style="width: 21px; height: 21px;">
                    </div>
                  </div>
                  <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=earnedBadgesThisMonth%></div>
                </div>
              </div>
              <div style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex">
                <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Average monthly rating</div>
                <div style="justify-content: center; align-items: center; gap: 4px; display: flex">
                  <img src="../img/filled-star.svg" style="width: 24px; height: 24px;" />
                  <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=avgMonthlyrating%></div>
                </div>
              </div>
              <div style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex">
                <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Total Badges earned for Looms</div>
                <div style="justify-content: flex-start; align-items: flex-start; gap: 4px; display: flex">
                  <div style="width: 24px; height: 24px; justify-content: center; align-items: center; display: flex">
                    <div style="flex: 1 1 0; align-self: stretch; padding-top: 3.91px; padding-bottom: 3.89px; padding-left: 3.91px; padding-right: 3.89px; justify-content: center; align-items: center; display: inline-flex">
                      <img src="../img/gem.svg" style="width: 21px; height: 21px;">
                    </div>
                  </div>
                  <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=Monthlybadges%></div>
                </div>
              </div>
              <div style="align-self: stretch; justify-content: flex-start; align-items: center; gap: 4px; display: inline-flex">
                <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Leaves Taken</div>
                <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=leavesTaken%></div>
              </div>
              <div style="align-self: stretch; justify-content: flex-start; align-items: center; gap: 4px; display: inline-flex">
                <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Looms missed</div>
                <div style="text-align: center; color: #181818; font-size: 16px;  font-weight: 600; line-height: 20.80px; word-wrap: break-word"><%=loomsMissed%></div>
              </div>
              <div style="align-self: stretch; justify-content: flex-start; align-items: center; gap: 4px; display: inline-flex">
                <div style="flex: 1 1 0; color: #282B28; font-size: 16px;  font-weight: 400; line-height: 20.80px; word-wrap: break-word">Performance Level</div>
                <div style="justify-content: flex-start; align-items: center; gap: 4px; display: flex" id="PerformanceLevelm">
                   
                   
                    
                
                </div>
              </div>
            </div>
          </div>
      
          <div style="display: flex;
          justify-content: space-between;
          align-items: flex-start;
          align-self: stretch;
          color: var(--Gray-700, #344054);
          text-align: center;
          
          font-size: 14px;
          font-style: normal;
          font-weight: 600;
          line-height: 20px;
          ">
           <div style="display: flex;
           flex-direction: column;
           align-items: center;
           gap: 4px;"
           >
           <span style="color: var(--Error-500, #EF4444); background: var(--Error-50, #FEF3F2); padding: 2px 8px 2px 6px; border-radius: 16px;">
             <svg xmlns="http://www.w3.org/2000/svg" width="8" height="9" viewBox="0 0 8 9" fill="none"><circle cx="4" cy="4.1582" r="3" fill="var(--Error-500, #EF4444)" /></svg> Poor    </span>
       
           <div>
             0-50
           </div>
           </div>
           <div style="display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;"
            >
            <span style="color: var(--Warning-500, #FDB022); background: var(--Warning-50, #FFFAEB); padding: 2px 8px 2px 6px; border-radius: 16px;">
              <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.33203" cy="4" r="3" fill="#FDB022"/></svg> Fair
                 </span>
            <div>
              51-80
            </div>
            </div>
            <div style="display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;"
            >
            <span style="color: #2E90FA; background: var(--Blue-50, #EFF8FF); padding: 2px 8px 2px 6px; border-radius: 16px;">
              <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.66797" cy="4" r="3" fill="#2E90FA"/></svg> Great
                </span>
            <div>
              81-90
            </div>
            <div style="color: var(--Gray-600, #475467);
            text-align: center;
            
            font-size: 12px;
            font-style: normal;
            font-weight: 500;
            line-height: 20px;">
              Expected
            </div>
            </div>
            <div style="display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            "
            
            >
           
            
           <span style="color: #48bf84; background: var(--Success-50, #ECFDF3); padding: 2px 8px 2px 6px; border-radius: 16px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8" fill="none"><circle cx="4" cy="4" r="3" fill="#48BF84"/></svg> Superb
        </span>
            <div>
              91-100
            </div>
            </div>
          </div>
          <div id="NudegFeedbackBodym" style="display: flex;flex-direction:column ;gap:12px;">
         
        </div>
      
          <div style="display: flex;
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
          align-self: stretch;">
            <div style="display: flex;
            align-items: flex-start;
            gap: 1rem;
            align-self: stretch;">
              <img style="display: flex;
              width: 40px;
              height: 40px;
              flex-direction: column;
              justify-content: center;
              align-items: center;
              border-radius: 200px;
              background: var(--Avatar-user-square-Olivia-Rhye, url(<path-to-image>), lightgray 50% / cover no-repeat);
              "
              src="<%=managerVisitingInfo.image%>">
                <textarea style="display: flex;
                padding: 12px 16px;
                align-items: flex-start;
                gap: 4px;
                flex: 1 0 0;
                border-radius: var(--Radius-medium, 8px);
                border: 1.5px solid var(--Gray-300, #D0D5DD);
                background: #FFF;"
                placeholder="Provide critical feedback, appreciation, or suggestions here..."
                id="feedback-textaream"
                onchange="ChangeFeedback(event.target.value)"
                type="text"></textarea>
            </div>
      
            <div
              style="display: flex;
              justify-content: end;
              align-items: flex-start;
              gap: 16px;
              align-self: stretch;
              padding-left: 56px;"
            >
            <button style="display: flex;
            background-color: #fff;
            padding: 8px 16px;
            justify-content: center;
            align-items: center;
            gap: 37px;
            align-self: stretch;
            border-radius: var(--Radius-medium, 8px);
            border: 1px solid var(--Brand-Primary, #48BF84);
            color: var(--Brand-Primary, #48BF84);
            text-align: center;
            font-size: 14px;
            font-style: normal;
            font-weight: 600;
            line-height: normal;
            "
            onclick="submitFeedback()"
            >Add Comment</button>
            <button style="display: flex;
            background-color: #fff;
            height: 46px;
            padding: 8px 16px;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex: 1 0 0;
            border-radius: var(--Radius-medium, 8px);
            border: 1px solid var(--Gray-300, #D0D5DD);
            "
            onclick="SetNudgeInfo('','')"
            data-toggle="modal"
            data-target="#customnudge"
            >
            Custom Nudge
            </button>
          
          </div>
      
      
          </div>
      
        </div>
       
        <div style="display: flex;flex-direction: column;gap:32px;flex:1">
          <div class="frameGraph">
            <div class="heading-wrapper ">
              <div class="heading">Performance comparisions</div>
            </div>
            <div class="group">
              <div class="overlap">
                <div class="div" style="width: 100%;" id="SetGraphm">
                 
                </div>
              </div>
              <div class="navbar">
                <div class="text-wrapper-2">0</div>
                <div class="text-wrapper-2">10</div>
                <div class="text-wrapper-2">20</div>
                <div class="text-wrapper-2">30</div>
                <div class="text-wrapper-2">40</div>
                <div class="text-wrapper-2">50</div>
                <div class="text-wrapper-2">60</div>
                <div class="text-wrapper-2">70</div>
                <div class="text-wrapper-2">80</div>
                <div class="text-wrapper-2">90</div>
                <div class="text-wrapper-2">100</div>
              </div>
            </div>
          </div>
          <div class="frameGraph">
            <div class="modal-heading">Monthly Overview</div>
            <div class="streak-count"style="margin-top:20px;
           gap: 12px 0px;
           align-self: stretch;
           flex-wrap: wrap;" id="PerformanceReportStreakBody">
   
               </div>
          </div>
        </div>
    </div>
  </div>

  </div>
  </div>
  </div>

  <% for(let i=0; i<levels.length; i++) { %>
  <div class="modal fade" id="levelModal-<%= i %>" tabindex="-1" role="dialog" aria-labelledby="levelModal-<%= i %>Label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="levelModal-<%= i %>Label">LEVEL <%= i+1 %></h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="card bg-gradient-info px-4 py-5">
            <div class="card-body">
              <h5 class="h4 text-white"><%= levels[i].title %></h5>
              <p class="mt-4 mb-0 text-white">
                <%= levels[i].description %>
              </p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <%}%>
 <!-- Add Link -->
 <div class="modal fade docs-example-modal-lg" tabindex="-1" role="dialog" id="AddLink" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" >
      <div class="modal-header" style="display: flex;width: 100%;justify-content: space-between;align-items: center;">
        <div style="color: var(--gray-900, #101828);
font-size: 24pxpx;
font-style: normal;
font-weight: 700;
line-height: normal;">Add Link</div>
        <img src="../img/icons performance mgmt/desktop/close_40x40.svg" data-dismiss="modal">
      </div>
      <div class="modal-body" style="display: inline-flex;
      padding-top: 24px;
      flex-direction: column;
      align-items: flex-start;
      gap: 22px;
      border-radius: 12px;">
        <div style="display: flex;
       width: 100%;
       align-items: center;
       gap: 22px;">
          <div style="color: var(--content-on-light-primary, #181818);
       width: 100px;
       font-size: 16px;
       font-style: normal;
       font-weight: 600;
       line-height: normal;" >Link Title</div>
          <input type="text" id="link-title" placeholder="Design_draft1" style="width:100%;padding:10px;margin:15px 0px;border-radius: var(--radius-medium, 8px);
          border: 1px solid var(--stroke-secondary, #DCDCDC);
          background: var(--surface-primary, #FFF);" onchange="ChangeLinkContent('title',event.target.value)">
        </div>
        <div style="display: flex;
width: 100%;
align-items: center;
gap: 22px;">
          <div style="color: var(--content-on-light-primary, #181818);
width: 100px;
font-size: 16px;
font-style: normal;
font-weight: 600;
line-height: normal;">Link </div>
          <input type="link" id="link-link" placeholder="www.figma.com/file/4E5bk36Ib1giid=4861%3A134681&m"style="width:100%;padding:10px;margin:15px 0px;border-radius: var(--radius-medium, 8px);
          border: 1px solid var(--stroke-secondary, #DCDCDC);
          background: var(--surface-primary, #FFF);" onchange="ChangeLinkContent('url',event.target.value)" required>
        </div>
      </div>
      <div class="modal-footer" style="padding:0.5rem">

        <button type="button" style="display: flex;
        height: 48px;
        padding: 8px 16px;
        align-items: center;
        gap: 8px;
        border-radius: 12px;" class="btn btn-outline-primary" data-dismiss="modal">
          Cancel
        </button>

        <button type="button"  data-dismiss="modal" class="btn btn-primary"  style="display: flex;
        height: 48px;
        padding: 8px 16px;
        align-items: center;
        gap: 8px;
        border-radius: 12px;" onclick="AddLink()" id="AddLinkButton" disabled>
          Add
        </button>
      </div>
    </div>
  </div>
</div>

<!--delete comment modal -->


<div class="modal docs-example-modal" tabindex="-1" id="delete-comment" role="dialog"
    aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal">
        <div class="modal-content" id="myModalsm" style="border-radius: 12px;">
            <div class="modal-header">
                <div style="
                  color: var(--text-content-primary, #181818);
                  font-size: 16px;
                  font-style: normal;
                  font-weight: 600;
                  line-height: 130%;
                ">
                    Confirm Deletion
                </div>
            </div>
            <div class="modal-body">
               
                <div style="color: var(--gray-600, #475467);
            font-size: 14px;
            font-style: normal;
            font-weight: 500;
            line-height: 135%; /* 18.9px */
            letter-spacing: 0.14px;"> Are you sure you want to delete this comment? 
This action cannot be undone.
                </div>
            </div>
            <div style="display: flex; flex-direction: row; gap: 10px;padding:0.7rem;" class="modal-footer">
                <button type="button" class="btn btn-outline-secondary heading" style="display: flex;
            padding: 8px 16px;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex: 1 0 0;
            align-self: stretch;
            border-radius: var(--radius-medium, 8px);
            color: var(--gray-700, #344054);
  text-align: center;
  font-size: 14px;
  font-style: normal;
  font-weight: 600;
  line-height: normal;
  
            border: 1px solid var(--gray-300, #D0D5DD);" data-dismiss="modal">
                    Cancel
                </button>
                <button type="button" class="btn" style="
                display: flex;
  height: 46px;
  padding: 10px 16px;
  justify-content: center;
  align-items: center;
  gap: 8px;
  color: var(--content-inverted-primary, #FFF);
  text-align: center;
  font-size: 14px;
  font-style: normal;
  font-weight: 600;
  line-height: 20px; /* 142.857% */
  letter-spacing: 0.1px;
  flex: 1 0 0;
  border-radius: var(--radius-medium, 8px);
  background: var(--Red, #FF6565);
                " data-dismiss="modal" onclick="deleteFeedback()">
                    Delete Comment
                </button>
            </div>
        </div>
    </div>
</div>

<!--delete nudge modal -->
<div class="modal docs-example-modal" tabindex="-1" id="delete-nudge" role="dialog"
    aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal">
        <div class="modal-content" id="myModalsm" style="border-radius: 12px;">
            <div class="modal-header">
                <div style="
                  color: var(--text-content-primary, #181818);
                  font-size: 16px;
                  font-style: normal;
                  font-weight: 600;
                  line-height: 130%;
                ">
                    Confirm Deletion
                </div>
            </div>
            <div class="modal-body">
               
                <div style="color: var(--gray-600, #475467);
            font-size: 14px;
            font-style: normal;
            font-weight: 500;
            line-height: 135%; /* 18.9px */
            letter-spacing: 0.14px;"> Are you sure you want to delete this nudge? 
This action cannot be undone.
                </div>
            </div>
            <div style="display: flex; flex-direction: row; gap: 10px;padding:0.7rem;" class="modal-footer">
                <button type="button" class="btn btn-outline-secondary heading" style="display: flex;
            padding: 8px 16px;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex: 1 0 0;
            align-self: stretch;
            border-radius: var(--radius-medium, 8px);
            color: var(--gray-700, #344054);
  text-align: center;
  font-size: 14px;
  font-style: normal;
  font-weight: 600;
  line-height: normal;
  
            border: 1px solid var(--gray-300, #D0D5DD);" data-dismiss="modal">
                    Cancel
                </button>
                <button type="button" class="btn" style="
                display: flex;
  height: 46px;
  padding: 10px 16px;
  justify-content: center;
  align-items: center;
  gap: 8px;
  color: var(--content-inverted-primary, #FFF);
  text-align: center;
  font-size: 14px;
  font-style: normal;
  font-weight: 600;
  line-height: 20px; /* 142.857% */
  letter-spacing: 0.1px;
  flex: 1 0 0;
  border-radius: var(--radius-medium, 8px);
  background: var(--Red, #FF6565);
                " data-dismiss="modal" onclick="deleteNudge()">
                    Delete Nudge
                </button>
            </div>
        </div>
    </div>
</div>

 <!--custom nudge -->
 <div class="modal fade docs-example-modal-lg" tabindex="-1" role="dialog" id="customnudge" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" style="border-radius: 14px">
      <div class="modal-header">
        <h5 class="modal-title h6" id="myLargeModalLabel">
          Custom Nudge
        </h5>
        <img src="../img/icons performance mgmt/desktop/close_40x40.svg" data-dismiss="modal" />
      </div>
      <div class="modal-body" style="
  border: 1px solid var(--stroke-primary, #ececec);
  display: flex;
  background: var(--surface-primary, #fff);
  flex-direction: column;
  align-items: flex-start;
  gap: 32px;
">

        <div style="display: flex;
flex-direction: column;
align-items: flex-start;
gap: 8px;
align-self: stretch;

">
          <div class="text-16-700">Choose Nudge Type</div>
          <div style="width: 100%;">
          <div disabled data-toggle="dropdown" aria-expanded="false"  style="display: flex;
height: 48px;
padding: 14px 20px;
width: 100%;
align-items: center;
gap: 10px;
align-self: stretch;
font-size: 14px;
border-radius: 12px;
border: 1px solid var(--Gray-400, #98A2B3);
background: var(--Gray-50, #F9FAFB);" id="nudgeTypeM" class="text-gray-14-500">Select the type of nudge you'd like to send.</div>
<div class="dropdown-menu" style="flex-direction: column; width: 90%; padding: 5px 12px; border-radius: 16px;">
<div style="display: flex;
padding: 12px;
align-items: center;
gap: 10px;
align-self: stretch;" onclick="SetNudgeInfo('type','Congratulatory Message')">
<div style="display: flex;
width: 32px;
height: 32px;
padding: 8px;
justify-content: center;
align-items: center;
flex-shrink: 0;
border-radius: 28px;
border: 4px solid var(--Success-50, #ECFDF3);
background: var(--Success-100, #D1FADF);">
<img src="../NudgeType/CongratulatoryMessage.svg">
</div>
<div style="color: var(--Gray-700, #344054);
font-size: 14px;
font-style: normal;
font-weight: 600;
line-height: 20px; ">
Congratulatory Message
</div>
</div>
<div style="display: flex;
padding: 12px;
align-items: center;
gap: 10px;
align-self: stretch;" onclick="SetNudgeInfo('type','Appreciation Note')">
<div style="display: flex;
width: 32px;
height: 32px;
padding: 8px;
justify-content: center;
align-items: center;
flex-shrink: 0;
border-radius: 28px;
border: 4px solid var(--Success-50, #ECFDF3);
background: var(--Success-100, #D1FADF);">
<img src="../NudgeType/AppreciationNote.svg">
</div>
<div style="color: var(--Gray-700, #344054);
font-size: 14px;
font-style: normal;
font-weight: 600;
line-height: 20px; ">
Appreciation Note
</div>
</div>
<div style="display: flex;
padding: 12px;
align-items: center;
gap: 10px;
align-self: stretch;" onclick="SetNudgeInfo('type','Improvement Suggestion')">
<div style="display: flex;
width: 32px;
height: 32px;
padding: 8px;
justify-content: center;
align-items: center;
flex-shrink: 0;
border-radius: 28px;
border: 4px solid var(--Warning-50, #FFFAEB);
background: var(--Warning-100, #FEF0C7);">
<img src="../NudgeType/ImprovementSuggestion.svg">
</div>
<div style="color: var(--Gray-700, #344054);
font-size: 14px;
font-style: normal;
font-weight: 600;
line-height: 20px; ">
Improvement Suggestion/Constructive Critique
</div>
</div>
<div style="display: flex;
padding: 12px;
align-items: center;
gap: 10px;
align-self: stretch;" onclick="SetNudgeInfo('type','Cautionary Alert')">
<div style="display: flex;
width: 32px;
height: 32px;
padding: 8px;
justify-content: center;
align-items: center;
flex-shrink: 0;
border-radius: 28px;
border: 4px solid var(--Error-50, #FEF3F2);
background: var(--Error-100, #FEE4E2);
">
<img src="../NudgeType/CautionaryAlert.svg">
</div>
<div style="color: var(--Gray-700, #344054);
font-size: 14px;
font-style: normal;
font-weight: 600;
line-height: 20px; ">
Cautionary Alert/Urgent Attention Needed
</div>
</div>
</div>
</div>
</div>
       

        <div style="display: flex;
flex-direction: column;
align-items: flex-start;
gap: 8px;
align-self: stretch;

">
          <div class="text-16-700">Nudge Message</div>
          <input placeholder="Title/Warning" style="display: flex;
          width: 100%;
          padding: 14px 20px;
          align-items: flex-start;
          gap: 10px;
          font-size: 14px;
          align-self: stretch;
          border-radius: 12px;
          border: 1px solid var(--Gray-400, #98A2B3);
          background: var(--Gray-50, #F9FAFB);
          " id="titleNudge" onchange="SetNudgeInfo('title',event.target.value)" class="text-16-700"></input>
          <textarea placeholder="Compose your message or warning for the nudge." style="display: flex;
height: 85px;
width: 100%;
font-size: 14px;
padding: 14px 20px;
align-items: flex-start;
gap: 10px;
align-self: stretch;
border-radius: 12px;
border: 1px solid var(--Gray-400, #98A2B3);
background: var(--Gray-50, #F9FAFB);
" id="descriptionNudge" onchange="SetNudgeInfo('description',event.target.value)"></textarea>
        </div>
<div style="display: flex;
flex-direction: column;
align-items: flex-start;
gap: 12px;
align-self: stretch;">
<div style="color: var(--Gray-800, #1D2939);
font-size: 16px;
font-style: normal;
font-weight: 600;
line-height: normal;
">Perview</div>
<div style="display: flex;
width: 386px;
padding: 16px;
align-items: flex-start;
gap: 4px;
border-radius: var(--Radius-medium, 8px);
border: 1px solid var(--Gray-200, #EAECF0);
background: var(--White, #FFF);">
<div style="display: flex;
width: 32px;
height: 32px;
padding: 8px;
justify-content: center;
align-items: center;
flex-shrink: 0;
border-radius: 28px;
border: 4px solid var(--Gray-50, #F9FAFB);
background: var(--Gray-100, #F2F4F7);" id="perviewNudgeType">
<img src="../NudgeType/perview.svg">
</div>
<div style="display: flex;flex-direction:column ;gap:2px;">
<div style="color: var(--Gray-700, #344054);

font-size: 14px;
font-style: normal;
font-weight: 600;
line-height: 20px; /* 142.857% */
" id="perviewTitle">Title/Warning</div>
<div style="align-self: stretch;
color: var(--Gray-500, #667085);

font-size: 14px;
font-style: normal;
font-weight: 500;
line-height: 20px; /* 142.857% */
" id="perviewDescription">
Your composed message
</div>
</div>
</div>
</div>
      </div>
      
      <div class="modal-footer" style="padding: 1rem">
        <button class="btn btn-outline-primary" style="
    display: flex;
    height: 48px;
    padding: 8px 16px;
    align-items: center;
    gap: 8px;
    border-radius: 14px;
  " data-dismiss="modal">
          Cancel
        </button>
        <button class="btn btn-primary" disabled id="SendNudge" style="
    display: flex;
    height: 48px;
    padding: 8px 16px;
    align-items: center;
    gap: 8px;
    border-radius: 14px;
  " data-dismiss="modal" onclick="SendNudge()">
          Send Nudge
        </button>
      </div>
    </div>
  </div>
</div>

  <!-- Badges Logs Modal -->
  <% function ChangeDate(date) {
    const options = { day: "numeric", month: "long", year: "numeric" };
    const formattedDate = new Date(date).toLocaleDateString(undefined, options);
    return formattedDate;
  } %>
  <div class="modal fade docs-example-modal-lg" tabindex="-1" role="dialog" id="BadgesLogs" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="width: 100vw;">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content" style="max-height: 70vh;overflow: auto;">
        <div class="modal-header" style="display: flex;width: 100%;justify-content: space-between;align-items: center;">
          <div style="color: var(--gray-900, #101828);
font-size: 24px;
font-style: normal;
font-weight: 700;
line-height: normal;">Badge Log</div>
          <img src="../img/icons performance mgmt/desktop/close_40x40.svg" data-dismiss="modal">
        </div>

        <div class="modal-body" style="background-color: #FAFAFA;padding: 0;max-height: 80vh;overflow: auto;">

          <table style="width: 100%;">
            <tr style="background: var(--gray-100, #F2F4F7);color: var(--gray-600, #475467);
            font-size: 12px;
            font-style: normal;
            font-weight: 500;
            line-height: 18px; /* 150% */;">
              <th style="width: 45%;">Source</th>
              <th style="width: 25%;">Badges</th>
              <th style="width: 30%;">Allotment date</th>
            </tr>

            <% for(badgelog of badgeslogs){%>
            <tr style="
  background: #FFF;border-bottom: 1px solid var(--gray-300, #D0D5DD);
">
              <td style="width: 45%;display: flex;
              height: 72px;
              padding: 16px 24px;
              align-items: center;
              align-self: stretch;
              ">
                <div style="display: flex;
flex-direction: column;
align-items: flex-start;
align-self: stretch;">
                  <div style="color: var(--gray-900, #101828);
font-size: 16px;
font-style: normal;
font-weight: 500;
line-height: 18px; /* 112.5% */"><%=badgelog.title%></div>
                  <div style="color: var(--gray-500, #667085);
font-size: 14px;
font-style: normal;
font-weight: 400;
line-height: 20px; /* 142.857% */"><%=badgelog.description.length>0?badgelog.description:ChangeDate(badgelog.date)%></div>
                </div>
              </td>
              <td style="display: flex;
              height: 72px;
              width: 25%;
              padding: 16px 24px;
              align-items: center;
              align-self: stretch;
              color: var(--content-on-light-primary, #181818);
    font-size: 16px;
    font-style: normal;
    font-weight: 600;
    line-height: 16px; /* 100% */"><%=badgelog.badges%> <img src='../img/gem.svg' style="width: 24px;height: 24px;"></td>
              <td style="display: flex;
              height: 72px;
              width: 30%;
              padding: 16px 24px;
              align-items: center;
              align-self: stretch;
              color: var(--gray-500, #667085);
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px; /* 142.857% */"><%=ChangeDate(badgelog.allotedDate)%></td>

            </tr>
            <%}%>

          </table>
        </div>
        
      </div>
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="deleteTask" tabindex="-1" role="dialog" aria-labelledby="deleteTaskLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteTaskLabel">Delete Task</h5>
        </div>
        <div class="modal-body">
          Warning: This will delete the Task and the changes are irrecoverable
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn " style="background:#FF6565;color:white;font-weight:500">Delete</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Large modal -->

  <div class="modal fade docs-example-modal-lg" tabindex="-1" role="dialog" id="tasksubmitmodal" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content" style="background-color: #FAFAFA;">

        <div style="margin:30px 50px -20px 30px;display: flex;justify-content: space-between;">
          <h2 class="modal-title h6 b-700" id="myLargeModalLabel">Video Link*</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true" style="font-size: 35px;
          color: black;
          font-weight: 700;">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div style="color: var(--gray-700, #344054);
          font-size: 18px;
          font-style: normal;
          font-weight: 700;
          line-height: normal;">
            <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 100 100" id="video">
              <path d="M84.9 26.4L68 37.3V34c0-4.4-3.6-8-8-8H20c-4.4 0-8 3.6-8 8v32c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-3.3l16.9 10.9c1.9 1 3.1-.7 3.1-1.7V28c0-1-1.1-2.8-3.1-1.6zM64 66c0 2.2-1.8 4-4 4H20c-2.2 0-4-1.8-4-4V34c0-2.2 1.8-4 4-4h40c2.2 0 4 1.8 4 4v32zm20 2.3L68 58V42l16-10.3v36.6z">
              </path>
              <path fill="#48bf84" d="M1224-650v1684H-560V-650h1784m8-8H-568v1700h1800V-658z"></path>
            </svg>
            Record your Tasks video and submit it.
          </div>
          <div style="margin-top:10px">
            <svg xmlns="http://www.w3.org/2000/svg" width="34.13px" height="23.9px" viewBox="5.368 13.434 53.9 37.855" id="youtube">
              <path fill="#FFF" d="M41.272 31.81c-4.942-2.641-9.674-5.069-14.511-7.604v15.165c5.09-2.767 10.455-5.301 14.532-7.561h-.021z">
              </path>
              <path fill="FF0000" d="M41.272 31.81c-4.942-2.641-14.511-7.604-14.511-7.604l12.758 8.575c.001 0-2.324 1.289 1.753-.971z">
              </path>
              <path fill="#CD201F" d="M27.691 51.242c-10.265-.189-13.771-.359-15.926-.803-1.458-.295-2.725-.95-3.654-1.9-.718-.719-1.289-1.816-1.732-3.338-.38-1.268-.528-2.323-.739-4.9-.323-5.816-.4-10.571 0-15.884.33-2.934.49-6.417 2.682-8.449 1.035-.951 2.239-1.563 3.591-1.816 2.112-.401 11.11-.718 20.425-.718 9.294 0 18.312.317 20.426.718 1.689.317 3.273 1.267 4.203 2.492 2 3.146 2.035 7.058 2.238 10.118.084 1.458.084 9.737 0 11.195-.316 4.836-.57 6.547-1.288 8.321-.444 1.12-.823 1.711-1.479 2.366a7.085 7.085 0 0 1-3.76 1.922c-8.883.668-16.426.813-24.987.676zM41.294 31.81c-4.942-2.641-9.674-5.09-14.511-7.625v15.166c5.09-2.767 10.456-5.302 14.532-7.562l-.021.021z">
              </path>
            </svg>
            <span style="color:#48bf84">Record & Upload on Youtube as unlisted </span><a href="http://www.youtube.com" target="_blank"><img src="../img/icons/arrow_outward.png" /></a>
          </div>
          <div>
            <div class="container" id="Youtubetutorial" style='display: none;'>
              <div class="row">
                <div class="col">
                  <p style="font-weight: 700;font-size: 14px;margin-bottom: 0px;margin-top:4px">Recording:</p>
                  <div style="display:flex">
                    <img src="../img/icons/vector.svg" style="width:12px ;height:12px ;margin-top:5px;margin-right:8px;" />
                    <span>Mac:<span style="font-weight: 700;font-size: 14px;">Cmd+ Shift+ 5</span></span>
                  </div>
                  <div style="display:flex">
                    <img src="../img/icons/Vector.png" style="width:12px ;height:12px;margin-top:5px ;margin-right:8px;" />
                    <span> Windows:<span style="font-weight: 700;font-size: 14px;">Windows btn + G</span></span>
                  </div>
                </div>
                <div class="col-7">
                  <p style="font-weight: 700;font-size: 14px;margin-bottom: 0px;margin-top:4px">Uploading:</p>
                  <div style="display:flex">
                    <img src="../img/icons/image 476.svg" style="width: 57.27px;
                height: 21.66px;margin-top:5px;margin-left:4px;">
                    <p style="font-size: 14px;margin-bottom: 0px;margin-top:4px ">Click Create on top right</p></span>
                  </div>
                  <div>
                    <p style="font-size: 14px;margin-bottom: 0px;margin-top:4px">Follow the steps on youtube to upload</p>
                    <div style="display:flex">
                      <img src="../img/icons/image 477.png" style="width: 57.27px;
                height: 21.66px;margin-top:5px;margin-left:4px;">
                      <span>
                        <p style="font-size: 14px;margin-bottom: 0px;margin-top:4px">In Visibility tab select unlisted and
                          copy link</p>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div style="color: #48BF84;
            font-size: 16px;
            font-style: normal;
            font-weight: 600;
            margin-top:5px;
            display: flex;
            align-items: center;gap:5px;
            line-height: normal;" id="TutorialButton" onclick="ChangeVisbility('Youtubetutorial','TutorialButton')">See
              Tutorial <i class="fa fa-angle-down " style="font-size: 24px;"></i></div>
            <div style="display: flex;
        justify-content: center;
        align-items: center;">
              <h6>OR</h6>
            </div>
            <div>
              <div style="display:flex"><img src="../img/icons/loom_icon.png" style="margin:8px;width:25px" />
                <h4 style="font-weight: 700; margin-top:5px">loom</h4><a style="margin-top:8px;margin-left:5px" href="http://loom.com" target="_blank">Use loom <img src="../img/icons/arrow_outward.png" /></a>
              </div>

            </div>
            <div class="input-group">
              <input type="text" style="display: flex;
              height: 48px;
              padding: 14px 20px;
              align-items: center;
              gap: 10px;
              width:93%;
              align-self: stretch;
              border-radius: 12px;
              border: 1px solid #ECECEC;
              background: #FFF;" id="linkSubmit" oninput="ChangeButtonState('submitlinkbutton',event)" placeholder="Paste your YouTube or Loom video link here..">
              <div class="input-group-append">
                <span class="input-group-text" onclick="ClearValue('linkSubmit')" style="font-size: 15px;
            font-weight: 600;
            border:none;
            background-color: transparent;
            color: black">X</span>
              </div>
            </div>

          </div>
        </div>
        <div class="modal-footer" style="padding:0.5rem">

          <button type="button" style="display: flex;
          padding: 16px 40px;
          justify-content: center;
          align-items: center;
          gap: 10px;
          width:150px;
          border-radius: 12px;" class="btn btn-outline-primary" data-dismiss="modal">
            Cancel
          </button>

          <button type="button" id="submitlinkbutton" onclick="BetterFunction()" data-dismiss="modal" class="btn btn-primary" disabled style="display: flex;
          padding: 16px 40px;
          justify-content: center;
          align-items: center;
          gap: 10px;
          width:150px;
          border-radius: 12px;">
            Submit
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Loom Submission  for eod modal -->

  <div class="modal fade docs-example-modal-lg" tabindex="-1" role="dialog" id="tasksubmiteodmodal" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header" style="display: flex;width: 100%;justify-content: space-between;align-items: center;">
          <div style="color: var(--gray-900, #101828);
  font-size: 24px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;">EOD Update Submission</div>
          <img src="../img/icons performance mgmt/desktop/close_40x40.svg" data-dismiss="modal">
        </div>

        <div class="modal-body" style="background-color: #FAFAFA;">
          <div style="color: var(--gray-700, #344054);
          font-size: 18px;
          font-style: normal;
          font-weight: 700;
          line-height: normal;">
            <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 100 100" id="video">
              <path d="M84.9 26.4L68 37.3V34c0-4.4-3.6-8-8-8H20c-4.4 0-8 3.6-8 8v32c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-3.3l16.9 10.9c1.9 1 3.1-.7 3.1-1.7V28c0-1-1.1-2.8-3.1-1.6zM64 66c0 2.2-1.8 4-4 4H20c-2.2 0-4-1.8-4-4V34c0-2.2 1.8-4 4-4h40c2.2 0 4 1.8 4 4v32zm20 2.3L68 58V42l16-10.3v36.6z">
              </path>
              <path fill="#48bf84" d="M1224-650v1684H-560V-650h1784m8-8H-568v1700h1800V-658z"></path>
            </svg>
            Record your Tasks video and submit it.
          </div>
          <div style="margin-top:10px">
            <svg xmlns="http://www.w3.org/2000/svg" width="34.13px" height="23.9px" viewBox="5.368 13.434 53.9 37.855" id="youtube">
              <path fill="#FFF" d="M41.272 31.81c-4.942-2.641-9.674-5.069-14.511-7.604v15.165c5.09-2.767 10.455-5.301 14.532-7.561h-.021z">
              </path>
              <path fill="FF0000" d="M41.272 31.81c-4.942-2.641-14.511-7.604-14.511-7.604l12.758 8.575c.001 0-2.324 1.289 1.753-.971z">
              </path>
              <path fill="#CD201F" d="M27.691 51.242c-10.265-.189-13.771-.359-15.926-.803-1.458-.295-2.725-.95-3.654-1.9-.718-.719-1.289-1.816-1.732-3.338-.38-1.268-.528-2.323-.739-4.9-.323-5.816-.4-10.571 0-15.884.33-2.934.49-6.417 2.682-8.449 1.035-.951 2.239-1.563 3.591-1.816 2.112-.401 11.11-.718 20.425-.718 9.294 0 18.312.317 20.426.718 1.689.317 3.273 1.267 4.203 2.492 2 3.146 2.035 7.058 2.238 10.118.084 1.458.084 9.737 0 11.195-.316 4.836-.57 6.547-1.288 8.321-.444 1.12-.823 1.711-1.479 2.366a7.085 7.085 0 0 1-3.76 1.922c-8.883.668-16.426.813-24.987.676zM41.294 31.81c-4.942-2.641-9.674-5.09-14.511-7.625v15.166c5.09-2.767 10.456-5.302 14.532-7.562l-.021.021z">
              </path>
            </svg>
            <span style="color:#48bf84">Record & Upload on Youtube as unlisted </span><a href="http://www.youtube.com" target="_blank"><img src="../img/icons/arrow_outward.png" /></a>
          </div>
          <div>
            <div class="container" id="Youtubetutorialeod" style='display: none;'>
              <div class="row">
                <div class="col">
                  <p style="font-weight: 700;font-size: 14px;margin-bottom: 0px;margin-top:4px">Recording:</p>
                  <div style="display:flex">
                    <img src="../img/icons/vector.svg" style="width:12px ;height:12px ;margin-top:5px;margin-right:8px;" />
                    <span>Mac:<span style="font-weight: 700;font-size: 14px;">Cmd+ Shift+ 5</span></span>
                  </div>
                  <div style="display:flex">
                    <img src="../img/icons/Vector.png" style="width:12px ;height:12px;margin-top:5px ;margin-right:8px;" />
                    <span> Windows:<span style="font-weight: 700;font-size: 14px;">Windows btn + G</span></span>
                  </div>
                </div>
                <div class="col-7">
                  <p style="font-weight: 700;font-size: 14px;margin-bottom: 0px;margin-top:4px">Uploading:</p>
                  <div style="display:flex">
                    <img src="../img/icons/image 476.svg" style="width: 57.27px;
                height: 21.66px;margin-top:5px;margin-left:4px;">
                    <p style="font-size: 14px;margin-bottom: 0px;margin-top:4px ">Click Create on top right</p></span>
                  </div>
                  <div>
                    <p style="font-size: 14px;margin-bottom: 0px;margin-top:4px">Follow the steps on youtube to upload</p>
                    <div style="display:flex">
                      <img src="../img/icons/image 477.png" style="width: 57.27px;
                height: 21.66px;margin-top:5px;margin-left:4px;">
                      <span>
                        <p style="font-size: 14px;margin-bottom: 0px;margin-top:4px">In Visibility tab select unlisted and
                          copy link</p>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div style="color:  #48BF84;
            font-size: 16px;
            font-style: normal;
            font-weight: 600;
            margin-top:5px;
            display: flex;
            align-items: center;gap:5px;
            line-height: normal;" id="TutorialButtoneod" onclick="ChangeVisbility('Youtubetutorialeod','TutorialButtoneod')">See Tutorial <i class="fa fa-angle-down " style="font-size: 24px;"></i></div>
            <div style="display: flex;
        justify-content: center;
        align-items: center;">
              <h6>OR</h6>
            </div>
            <div>
              <div style="display:flex"><img src="../img/icons/loom_icon.png" style="margin:8px;width:25px" />
                <h4 style="font-weight: 700; margin-top:5px">loom</h4><a style="margin-top:8px;margin-left:5px" href="http://loom.com" target="_blank">Use loom <img src="../img/icons/arrow_outward.png" /></a>
              </div>

            </div>
            <div class="input-group" style="margin-top: 10px;">
              <input type="text" id="eodlinkinput" style="display: flex;
              height: 48px;
              padding: 14px 20px;
              align-items: center;
              gap: 10px;
              width:93%;
              align-self: stretch;
              border-radius: 12px;
              border: 1px solid #ECECEC;
              background: #FFF;" id="linkSubmiteod" oninput="ChangeVisbilityEodButton('submiteodbutton','eodlinkinput')" placeholder="Paste your YouTube or Loom video link here..">
              <div class="input-group-append">
                <span class="input-group-text" onclick="ClearValue('linkSubmiteod')" style="font-size: 15px;
            font-weight: 600;
            border:none;
            background-color: transparent;
            color: black">X</span>
              </div>
            </div>

          </div>
          <div style="display: flex;
          flex-direction: column;
          align-items: flex-start;
          gap: 20px;
          margin-top:10px;
          align-self: stretch;">
            <div style="color: var(--gray-800, #1D2939);
          font-size: 14px;
          font-style: normal;
          font-weight: 600;
          line-height: normal;">Summarize Today's Tasks in Key Points <span style="color: var(--error-500, #F04438);">*</span><span style="color: var(--gray-500, #667085);">(min
                3)</span></div>
            <div style="width:100%;display: flex;flex-direction: column;gap:10px;align-items: flex-start;color:black" id="KeyPointBody">
             
            </div>
            <button class="btn btn-outline-primary" style="width:140px;border-radius: 12px;display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;" onclick="AddKeyPoints()"><span style="font-size: 24px;"> + </span>Add</button>
       </div>
        </div>
        <div class="modal-footer" style="padding:0.5rem">

          <button type="button" style="display: flex;
                padding: 16px 40px;
                justify-content: center;
                align-items: center;
                gap: 10px;
                width:150px;
                border-radius: 12px;" class="btn btn-outline-primary" data-dismiss="modal">
            Cancel
          </button>

          <button type="button" onclick="BetterFunction()" id="submiteodbutton" class="btn btn-primary" disabled style="display: flex;
                padding: 16px 40px;
                justify-content: center;
                align-items: center;
                gap: 10px;
                width:150px;
                border-radius: 12px;" data-dismiss="modal">
            Submit
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade docs-example-modal" id="cantSubmitTask" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered ">
      <div class="modal-content" style="width:700px">
        <div class="modal-header">
          <h5 class="modal-title h6" id="mySmallModalLabel">Changes not possible</h5>
        </div>
        <div class="modal-body">
          You are trying to provide video link in past date which is not possible. Go to present date to provide video
          link.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-primary" data-dismiss="modal">No thanks</button>
          <a href='/performanceBoardemployee/<%=today.date%>'><button type="button" class="btn btn-primary">Go to Present
              Date</button></a>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="modal-monthly-overview" tabindex="-1" role="dialog" aria-labelledby="modal-change-username" aria-hidden="true" style="margin-left: 20px">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
      <form>
        <div class="modal-content model-xl" >
          <div class="modal-header" style="display:flex;justify-content: space-between;align-items: center;">
            <div style="
            display: flex;
            align-items: center;
            gap: 20px;
          ">
              <input type="month" id="modal-monthSelect" style="width: 170px;
           padding: 10px;
           color: var(--gray-900, #101828);
 font-size: 16px;
 height: 40px;
 font-style: normal;
 font-weight: 400;
 line-height: 24px;border-radius: var(--radius-medium, 8px);
border: 1px solid var(--gray-300, #D0D5DD);
background: var(--White, #FFF);
/* Shadow/xs */
box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);" onchange="modalstreakchange(event.target.value)" value="<%= (new Date()).toISOString().substr(0, 7) %>">


              <span class="modal-heading">Monthly Overview</span>

            </div>

            <div style="display: flex;gap:20px">
              <div style="display: flex; flex-direction: column;justify-content: center;align-items: center;gap:5px">
                <div class="modal-heading" id="modal-total-badges"><img src="../img/gem.svg" style="width:24px">
                  <%= user.badges %>
                </div>
                <div style="color: #181818;font-size:12px" id="modal-streak-month">
                  Total Badges Earned in
                </div>
              </div>
              <div id="rating">
                <button type="button" class="btn" style="
                 display: flex;
                 flex-direction: column;
padding: 6px 16px;
justify-content: center;
align-items: center;
gap: 8px;
border-radius: 12px;
background: #0F0F0F;
                ">
                  <div id="modal-rating-avg" style="color:#FACC15;display: flex;gap:5px;font-size: 20px;">

                    <img src="../img/icons performance mgmt/desktop/d_star_full.svg" />
                  </div>
                  <div style="
                      font-weight: 500;
                      font-size: 12px;
                      color: #edf1f5;
                      flex: none;
                    ">
                    Monthly Avarage
                  </div>
                </button>
              </div>
              <img src="../img/icons performance mgmt/desktop/close_40x40.svg" data-dismiss="modal" style="cursor: pointer;">
            </div>
          </div>
          <div class="modal-body" style="max-height:80vh;overflow: auto;">
            <!-- <div class="row" style="gap: 20px" id="feedback-modal">
              <div class="modal-box">
                <div><img src="../img/icons performance mgmt/desktop/mini_streak.svg" /></div>
                <div>
                  <div id="modal-mini-streak" class="modal-heading"> Days</div>
                  <div>Shortest Streak</div>
                </div>
              </div>
              <div class="modal-box ">
                <div><img src="../img/icons performance mgmt/desktop/max_streak.svg" /></div>
                <div>
                  <div id="modal-maxi-streak" class="modal-heading"> Days</div>
                  <div>Longest Streak</div>
                </div>
              </div>
              <div class="modal-box ">
                <div><img src="../img/icons performance mgmt/desktop/modal-badges.svg" /></div>
                <div>
                  <div id="modal-streak-rewards" class="modal-heading">Badges</div>
                  <div>Streakes Reward</div>
                </div>
              </div>
            </div> -->
           <div style="display: flex;
           width: 100%;
           padding-left: 24px;
           align-items: flex-start;
           gap: 16px;" id="MonthlyOverviewCards">
          <div style="display: flex;
          padding: 12px 16px;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          gap: 15px;
          border-radius: var(--Radius-medium, 8px);
          background: #FFF;
          box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);">
        <div style="color: var(--Gray-500, #667085);
        font-size: 18px;
        font-style: normal;
        font-weight: 600;
        line-height: 24px; /* 133.333% */">February</div> 
        <div style="display: flex;
        align-items: center;
        gap: 10px;">
        
      </div> 
        </div> 
          </div>
            <div class="streak-count" id="modal-streak-count" style="margin-top:20px;
         margin-top:30px;
        gap: 32px 0px;
        align-self: stretch;
        flex-wrap: wrap;">

            </div>
            <!-- <div style="display: flex;
      padding: 4px 16px;
      align-items: center;
      gap: 4px;
      margin-top: 30px;
      width:fit-content;
      border-radius: 8px;
      color:black;
      font-weight: 600;
      background: #D9FDEB;">Break previous month’s Longest streak of 15 Days to earn <img src="../img/gem.svg"> badges
              extra</div> -->
          </div>

        </div>
      </form>
    </div>
  </div>

   <!-- Configure Performance Score -->
 <div class="modal fade docs-example-modal-lg" tabindex="-1" role="dialog" id="ConfigurePerformanceScore" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" >
      <div class="modal-header" style="display: flex;width: 100%;justify-content: space-between;align-items: center;">
        <div style="color: var(--gray-900, #101828);
font-size: 24pxpx;
font-style: normal;
font-weight: 700;
line-height: normal;">Configure Performance Score</div>
        <img src="../img/icons performance mgmt/desktop/close_40x40.svg" data-dismiss="modal">
      </div>
      <div class="modal-body" style="padding:32px;
      flex-direction: column;
      max-height: 70vh;overflow: auto;
      align-items: flex-start;
      gap: 24px;
      flex-shrink: 0;
      display: flex;
      ">
       <input type="month" style="display: flex;
       padding: 10px 16px;
       justify-content: center;
       align-items: center;
       gap: 8px;
       border-radius: 8px;
       border: 1px solid var(--Gray-300, #D0D5DD);
       background: var(--White, #FFF);
       box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);
       " id="SPMonthYear" onchange="GetPerformanceModalData(event.target.value)">
       <div style="display: flex;
       flex-direction: column;
       justify-content: center;
       align-items: flex-start;
       gap: 12px;">
       <div style="color: var(--Gray-800, #1D2939);
       font-size: 16px;
       font-style: normal;
       font-weight: 600;
       line-height: normal;">Select Approach to Calculate Performance Score</div>
       <div style="display: flex;
       align-items: center;
       gap: 12px;">
       <div style="display: flex;
       padding: 12px;
       cursor: pointer;
       flex-direction: column;
       justify-content: center;
       align-items: center;
       gap: 4px;
       border-radius: 8px;
       " id="SPAutomaticBox" onclick="SPType(0)">
       <div style="display: flex;
       width:min(100%,344px);
       align-items: flex-start;
       gap: 8px;">
       <input type="radio" name="performancetype" style="margin-top: 5px;" id="SPAutomaticBoxInput" >
       <div style="display: flex;flex-direction: column;align-items: flex-start;">
      <div style="color: var(--Gray-700, #344054);
      font-size: 14px;
      font-style: normal;
      font-weight: 600;
      line-height: 20px; /* 142.857% */">Automatic</div>
      <div style="color: var(--Gray-500, #667085);
      font-size: 14px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 142.857% */">Let the system effortlessly calculate performance scores based on selected parameters and weights.</div>
      </div>
      </div>
      </div>
      <div style="display: flex;
       padding: 12px;
       flex-direction: column;
       justify-content: center;
       align-items: center;
       gap: 4px;
       border-radius: 8px;
cursor: pointer;
       " id="SPManualBox" onclick="SPType(1)">
      <div style="display: flex;
      width:min(100%,344px);
      align-items: flex-start;
      gap: 8px;" >
      <input type="radio" name="performancetype" style="margin-top: 5px;" id="SPManualBoxInput" >
      <div style="display: flex;flex-direction: column;align-items: flex-start;">
     <div style="color: var(--Gray-700, #344054);
     font-size: 14px;
     font-style: normal;
     font-weight: 600;
     line-height: 20px; /* 142.857% */">Manual</div>
     <div style="color: var(--Gray-500, #667085);
     font-size: 14px;
     font-style: normal;
     font-weight: 500;
     line-height: 20px; /* 142.857% */">Take control with manual adjustments. Enter scores and select categories for a personalized touch</div>
     </div>
     </div>
     </div>
      </div>
      </div>
      
      <div style="display: flex;
      align-items: center;
      gap: 8px;">
     <input type="checkbox" class="SPFutureMonths" id="SPFutureMonths" onclick="SPFutureMonths()">
     <div style="color: var(--Gray-600, #475467);
     font-size: 14px;
     font-style: normal;
     font-weight: 500;
     line-height: normal;">Continue Selected Settings for Future Months</div> 
     </div>
     <div style="display: flex;
     align-items: center;
     gap: 36px;" id="SPScoreBody">
     <div style="display: flex;
     align-items: center;
     gap: 24px;">
     <div style="color: var(--Gray-800, #1D2939);
     font-size: 16px;
     font-style: normal;
     font-weight: 600;
     line-height: normal;">Performance Score</div>
     <div style="display: flex;align-items: center;gap:8px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" onclick="UpdateSPscore('SPScoreInput',-1)">
        <path d="M11.9998 21.9976C17.5226 21.9976 21.9998 17.5204 21.9998 11.9976C21.9998 6.47471 17.5226 1.99756 11.9998 1.99756C6.47691 1.99756 1.99976 6.47471 1.99976 11.9976C1.99976 17.5204 6.47691 21.9976 11.9998 21.9976Z" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M7.99976 11.9976H15.9998" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
       <input type="number" style="color: var(--Content-On-Light-Primary, #181818);
     font-size: 24px;
     font-style: normal;
     font-weight: 600;
     line-height: 16px;width: 50px;" id="SPScoreInput" onchange="SPscore(event.target.value)">      
     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" onclick="UpdateSPscore('SPScoreInput',1)">
        <path d="M11.9998 21.9976C17.5226 21.9976 21.9998 17.5204 21.9998 11.9976C21.9998 6.47471 17.5226 1.99756 11.9998 1.99756C6.47691 1.99756 1.99976 6.47471 1.99976 11.9976C1.99976 17.5204 6.47691 21.9976 11.9998 21.9976Z" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M11.9998 7.99756V15.9976" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M7.99976 11.9976H15.9998" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
   </div>
  
   <div style="display: flex;
   align-items: center;
   gap: 24px;">
   <div style="color: var(--Gray-800, #1D2939);
   font-size: 16px;
   font-style: normal;
   font-weight: 600;
   line-height: normal;">Performance Level</div>
 <div style="display: flex;align-items: center;justify-content: center;gap:4px;" >
     <div style="display: flex;
     flex-direction: column;
     align-items: center;
     gap: 4px;"
      id="SPLevel">
     <span style="color: var(--Error-500, #EF4444); background: var(--Error-50, #FEF3F2); padding: 2px 8px 2px 6px; border-radius: 16px;">
       <svg xmlns="http://www.w3.org/2000/svg" width="8" height="9" viewBox="0 0 8 9" fill="none"><circle cx="4" cy="4.1582" r="3" fill="var(--Error-500, #EF4444)" /></svg> Poor    </span>
     </div>
     <i class="fa fa-chevron-down " id="SetManualPerformanceScore" style="cursor: pointer;"  data-toggle="dropdown" aria-hidden="true"></i>
     <div class="dropdown-menu" style="align-items: center;flex-direction: column;gap:12px;padding: 12px;">
      <div style="display: flex;
       flex-direction: column;
       cursor: pointer;
       align-items: center;
       gap: 4px;"
       onclick="SPLevel(0)" >
       <span style="color: var(--Error-500, #EF4444); background: var(--Error-50, #FEF3F2); padding: 2px 8px 2px 6px; border-radius: 16px;">
         <svg xmlns="http://www.w3.org/2000/svg" width="8" height="9" viewBox="0 0 8 9" fill="none"><circle cx="4" cy="4.1582" r="3" fill="var(--Error-500, #EF4444)" /></svg> Poor    </span>
       </div>
       <div style="display: flex;
        flex-direction: column;
        cursor: pointer;
        align-items: center;
        gap: 4px;"
        onclick="SPLevel(1)">
        <span style="color: var(--Warning-500, #FDB022); background: var(--Warning-50, #FFFAEB); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.33203" cy="4" r="3" fill="#FDB022"/></svg> Fair
             </span>
       
        </div>
        <div style="display: flex;
        flex-direction: column;
        cursor: pointer;
        align-items: center;
        gap: 4px;"
        onclick="SPLevel(2)">
        <span style="color: #2E90FA; background: var(--Blue-50, #EFF8FF); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.66797" cy="4" r="3" fill="#2E90FA"/></svg> Great
            </span>
        </div>
        <div style="display: flex;
        flex-direction: column;
        cursor: pointer;
        align-items: center;
        gap: 4px;
        "
        onclick="SPLevel(3)"
        >
       
        
       <span style="color: #48bf84; background: var(--Success-50, #ECFDF3); padding: 2px 8px 2px 6px; border-radius: 16px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8" fill="none"><circle cx="4" cy="4" r="3" fill="#48BF84"/></svg> Superb
    </span>
       
        </div>
        </div>
    </div>
    
    </div>
  </div>
  <div style="display: flex;
   flex-direction: column;
   align-items: flex-start;
   gap: 32px;" id="SPMatrixBody">
   <div style="display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: flex-start;
   gap: 2px;">
   <div style="color: var(--Gray-800, #1D2939);
   font-size: 16px;
   font-style: normal;
   font-weight: 600;
   line-height: normal;">Calculate Performance Score using</div>
   <div style="color: var(--Gray-600, #475467);
   font-size: 14px;
   font-style: normal;
   font-weight: 500;
   line-height: normal;">Select parameters and Set the weights for each selected parameter for automated calculation.</div>
 
 </div>
 <div style="display: flex;
 flex-direction: column;
 width: min(500px,100%);
 align-items: flex-start;
 gap: 4px;">
 <div style="display: flex;align-items: center;justify-content: space-between;width: 100%;" >
 <div style="color: var(--Gray-800, #1D2939);
 font-size: 14px;
 font-style: normal;
 font-weight: 500;
 line-height: normal;">Parameters</div>
 <div style="color: var(--Gray-800, #1D2939);
 font-size: 14px;
 width: 100px;
 font-style: normal;
 font-weight: 500;
 line-height: normal;">Weightage</div>
 </div>
 
 <% let Matrix=[{Parameters:"Average monthly rating",Weightage:"25",status:'checked'},{Parameters:"Total Badges earned for Looms",Weightage:"25",status:'checked'},{Parameters:"Average Tasks Speed",Weightage:"25",status:'checked'},{Parameters:"Average Tasks Quality",Weightage:"25",status:'checked'},{Parameters:"Total Badges earned for tasks",Weightage:"25",status:'checked'},{Parameters:"Leaves Taken",Weightage:"25",status:'checked'},{Parameters:"Looms missed",Weightage:"25",status:'checked'}]%>
  <% Matrix.forEach((element,index) => { %>
 <div style="display: flex;
 justify-content: center;
 align-items: center;
 width: 100%;
 justify-content: space-between;" id="SPMatrix<%=index%>">
 <div style="display: flex;
 align-items: center;
 gap: 8px;">
 <input type="checkbox" <%=element.status%> class="SPCheckbox" id="SPCheckbox<%=index%>" onclick="CheckUncheckMatrixWeightage('<%=index%>')">
 <div style="color: var(--Gray-600, #475467);
 font-family: Manrope;
 font-size: 14px;
 font-style: normal;
 font-weight: 500;
 line-height: normal;"><%=element.Parameters%></div>
 </div>
 <div style="display: flex;
 height: 52px;
 padding: 16px 24px;
 justify-content: center;
 align-items: center;">
 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" onclick="UpdateWeightage('<%=index%>',-1)">
   <path d="M11.9998 21.9976C17.5226 21.9976 21.9998 17.5204 21.9998 11.9976C21.9998 6.47471 17.5226 1.99756 11.9998 1.99756C6.47691 1.99756 1.99976 6.47471 1.99976 11.9976C1.99976 17.5204 6.47691 21.9976 11.9998 21.9976Z" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
   <path d="M7.99976 11.9976H15.9998" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>
 <input type="text" id="SPWeightage<%=index%>" onchange="UpdateWeightageInputField('<%=index%>',event.target.value)" style="width: 50px;text-align: center;" value="<%=element.Weightage%>">
 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" onclick="UpdateWeightage('<%=index%>',1)">
   <path d="M11.9998 21.9976C17.5226 21.9976 21.9998 17.5204 21.9998 11.9976C21.9998 6.47471 17.5226 1.99756 11.9998 1.99756C6.47691 1.99756 1.99976 6.47471 1.99976 11.9976C1.99976 17.5204 6.47691 21.9976 11.9998 21.9976Z" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
   <path d="M11.9998 7.99756V15.9976" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
   <path d="M7.99976 11.9976H15.9998" stroke="#344054" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>
 </div>
 </div>
 <%})%>
 <div style="display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 0px 20px;
 align-self: stretch;">
 <div style="color: var(--Gray-600, #475467);
 font-size: 14px;
 font-style: normal;
 font-weight: 500;
 line-height: normal;">Total Weight</div>
 <div style="color: var(--Gray-600, #475467);
 font-size: 14px;
 width: 100px;
 font-style: normal;
 font-weight: 500;
 line-height: normal;" id="SPWeightageTotal">100</div>
 </div>
 </div>
 </div>
   </div>
      <div class="modal-footer" style="padding:0.5rem">

        <button type="button" style="display: flex;
        height: 48px;
        padding: 8px 16px;
        align-items: center;
        gap: 8px;
        border-radius: 12px;" class="btn btn-outline-primary" data-dismiss="modal">
          Cancel
        </button>

        <button type="button"  data-dismiss="modal" class="btn btn-primary"  style="display: flex;
        height: 48px;
        padding: 8px 16px;
        align-items: center;
        gap: 8px;
        border-radius: 12px;" onclick="SavePerformanceScoreModal()" id="SPButton" disabled>
          Save
        </button>
      </div>
    </div>
  </div>
</div>

  <%- include('partials/manager-rating-feedback'); -%>
  <%- include('partials/review_request'); -%>
  <script>
    window.addEventListener('DOMContentLoaded', MakeCenter());
    $(function() {
      $('[data-toggle="tooltip"]').tooltip()
    })
    var datePicker = document.querySelectorAll('.datePicker');
    document.getElementById("monthSelect").addEventListener("change", streakchange);
    const streakRatingTab = document.getElementById("tab_streak_rating");
    const dailySummaryTab = document.getElementById("tab_daily_summary");
    const streakRatingBody = document.getElementById("monthly-overview");
    const dailySummaryBody = document.getElementById("DailySummaryBody");

    streakRatingTab.addEventListener("click", function() {
      streakRatingBody.style.display = 'flex';
      dailySummaryBody.style.display = 'none';
      streakRatingTab.classList.add('active');
      dailySummaryTab.classList.remove('active');
    });

    dailySummaryTab.addEventListener("click", function() {
      dailySummaryBody.style.display = 'block';
      streakRatingBody.style.display = 'none';
      dailySummaryTab.classList.add('active');
      streakRatingTab.classList.remove('active');
    });


    function setStreak()
    {
      streakchange()
    }
    function streakchange() {

      $("#loadingModal").modal('show');
      var selectedMonth = document.getElementById("monthSelect").value;
      const streakHeader = document.getElementById('streakHeader');
      let streakDays;
      fetch('/streakmonth/' + selectedMonth + '/' + '<%=employee._id%>')
        .then(response => response.json())
        .then(data => {
          streakDays = data.streakdays;

          let day = 0;
          let streakCountHTML = "";
          let streakCount = 0;
          let targetdate;
          SetStreakDates('streak-count', streakDays)
          let today = getCurrentDay();
          if (selectedMonth.split('-')[1] == today.date.split('-')[1]) {
            for (let i = 0; i < streakDays.length; i++) {
              if (streakDays[i].date >= today.date) {
                if (streakDays[i].date === today.date) {
                  streakCount = day;
                }
                if (!streakDays[i].isdone) {
                  day += 1;
                } else {
                  day = 0;
                }

                if (day === 3) {
                  targetdate = streakDays[i].date.slice(-2);
                  day = 3;
                  break;
                } else if (day === 5) {
                  targetdate = streakDays[i].date.slice(-2);
                  day = 7;
                  break;
                } else if (day === 10) {
                  targetdate = streakDays[i].date.slice(-2);
                  day = 15;
                  break;
                } else if (day === 15) {
                  targetdate = streakDays[i].date.slice(-2);
                  day = 22;
                  break;
                } else if (day === 23) {
                  targetdate = streakDays[i].date.slice(-2);
                  day = 35;
                  break;
                }
              } else if (streakDays[i].isdone) {
                day += 1;
              } else {
                day = 0;
              }
            }

            streakHeader.innerHTML = `Current Streak: <span style="color:#48bf84;margin-left:5px">${streakCount} Days <img src='../img/icons performance mgmt/desktop/Streak states.svg'/></span> `
            document.getElementById('streakHeaderStreak').innerHTML = `Continue 4.5+ <img src="../img/Star.svg" width="17px" /> streak till<span style="font-size:17px; font-weight: 700"> ${targetdate} </span> to get +<span style="font-size:17px; font-weight: 700;">${day}</span> <img src="../img/gem.svg" style="width: 17px;" />`
            document.getElementById('streakHeaderStreak').style.display = 'flex';
          } else {
            let longestStreak = 0;
            let streak = 0;
            for (let i = 0; i < streakDays.length; i++) {
              if (streakDays[i].isdone) {
                streak += 1;
              } else {
                longestStreak = longestStreak > streak ? longestStreak : streak;
                streak = 0;
              }
            }

            streakHeader.innerHTML = `Longest Streak: <span style="color:#48bf84">${longestStreak} Days <img src='../img/icons performance mgmt/desktop/Streak states.svg'/></span> `
            document.getElementById('streakHeaderStreak').style.display = 'none';
          }


          $("#loadingModal").modal('hide');
        })
        .catch(error => {
          // Handle any errors
          console.error(error);
        });

    }

    const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];



    function modalstreakchange(selectedMonth) {
      let streakDays;
      fetch('/streakmonth/' + selectedMonth + '/' + '<%=employee._id%>')
        .then(response => response.json())
        .then(data => {
          streakDays = data.streakdays;

          SetModalStreakDates('modal-streak-count', streakDays);
          SetModalStreakData(selectedMonth, streakDays)
        })
        .catch(error => {
          // Handle any errors
          console.error(error);
        });
    }

    function PerformanceViewStreakModal(id) {
      let streakDays;
      let selectedMonth=document.getElementById("monthSelect").value;
      fetch('/streakmonth/' + selectedMonth + '/' + '<%=employee._id%>')
        .then(response => response.json())
        .then(data => {
          streakDays = data.streakdays;

          SetModalStreakDates(id, streakDays);
        })
        .catch(error => {
          // Handle any errors
          console.error(error);
        });
    }

    datePicker[0].value = '<%=currentday.date%>'
    if(datePicker.length>1)
    datePicker[1].value = '<%=currentday.date%>'

    function changeLocation(selectedDate) {

      const performanceBoard = `/performanceBoard/?id=<%=user._id%>&date=${selectedDate}`;
      window.location.href = performanceBoard;
    }
    let month = new Date().getMonth();


    function getCurrentDay() {
      let days = 0;
      let streakCountHTML = "";
      let today = new Date();
      today = new Date(today.getTime() + today.getTimezoneOffset() * 60000); // Convert to GMT

      const year = today.getFullYear();
      let month = today.getMonth() + 1;
      let day = today.getDate();


      if (month < 10) {
        month = `0${month}`;
      }
      if (day < 10) {
        day = `0${day}`;
      }

      today = {
        date: `${year}-${month}-${day}`
      };
      return today;
    }

    function OpenCard(id) {
      let badgesbox = document.getElementById(id);
      if (badgesbox.style.display == 'none')
        badgesbox.style.display = 'flex';
      else
        badgesbox.style.display = 'none';
    }


    function ExpendBlock(lessid, moreid) {
      let readless = document.querySelectorAll(lessid);
      let readmore = document.querySelectorAll(moreid);

      if (readless[0].style.display == 'none') {
        readmore.forEach((read) => {
          read.style.display = 'none';
        })
        readless[0].style.display = 'initial';
      } else {
        readmore.forEach((read) => {
          read.style.display = 'flex';
        })
        readless[0].style.display = 'none';
      }

    }

    
    let streakDays = `<%-JSON.stringify(streakDays)%>`;
    streakDays = JSON.parse(streakDays);
    const myProgressBar = document.getElementById("progressbar");
    let currentWeek = 0;

    
    let weeksStreakData = [];

    function MoveWeekStreak(move, id) {
      currentWeek += move;
      if (currentWeek < 0)
        currentWeek += weeksStreakData.length;
      else if (currentWeek >= weeksStreakData.length)
        currentWeek -= weeksStreakData.length;
      document.getElementById(id).innerHTML = weeksStreakData[currentWeek];
    }

    function SetStreakDates(id, streakDays) {
      weeksStreakData = [];
      let days = 0;
      let today = getCurrentDay();
      streakCountHTML = '';
      let container = document.getElementById(id);
      let dayToStartNextWeek = 0;
      let weekNo = 0;
      let ClassAdded = false;
      for (let i = 0; i < streakDays.length; i++) {

        let date = new Date(streakDays[i].date);
        if (date.getDay() != 1)
          dayToStartNextWeek++;
        else
          break;
      }
      if (dayToStartNextWeek == 0)
        dayToStartNextWeek = 5;
      for (let i = 0; i < streakDays.length; i++) {
        let styleblendmode = streakDays[i].ratingReviewStatus == 'Pending' ? '' : 'luminosity'

        if (streakDays[i].isdone || streakDays[i].date >= today.date) {
          days += 1;
        } else {
          days = 0;
        }

        let ratingClass = 'rating-status'
        let rating = streakDays[i].rating ? streakDays[i].rating : 0;
        let starpath = "../img/black_star.svg"
        if (rating != 0) {
          if (rating >= 4.5) {
            ratingClass += ' golden-rating-status'
          } else if (rating >= 3.5) {
            ratingClass += ' skyblue-rating-status'
          } else if (rating >= 2.5) {
            ratingClass += ' orange-rating-status'
          } else {
            starpath = '../img/white_star.svg'
            ratingClass += ' red-rating-status'
          }
        }
        let taskStatus = streakDays[i].taskStatus;
        let taskStatusSrc = '';
        let taskDivClass = '';

        if (streakDays[i].date < today.date) {
          taskDivClass = 'perv_day';
          for (let j = 1; j < 4; j++) {
            if (!taskStatus[j] || taskStatus.length <= j) {
              if (j === 1) {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sunrise_perv.svg';
                break;
              } else if (j === 2) {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sun_perv.svg';
                break;
              } else {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sunset_perv.svg';
                break;
              }
            }
          }
          let tasksubmmitedcount = 0;
          for (let i = 1; i < taskStatus.length; i++) {
            if (taskStatus[i])
              tasksubmmitedcount++;
          }

          if (taskStatusSrc == '' && (taskStatus.length == 4 || streakDays[i].rating > 0)) {
            if (streakDays[i].rating > 0 && streakDays[i].rating >= 2.5 && streakDays[i].rating <= 3.5) {
              taskDivClass = 'current_day';
              taskStatusSrc = '../img/icons performance mgmt/desktop/Completed_yellow.svg';
            } else if (streakDays[i].rating > 0 && streakDays[i].rating < 2.5) {
              taskDivClass = 'perv_day';
              taskStatusSrc = '../img/icons performance mgmt/desktop/Completed_red.svg';
            } else {
              taskDivClass = 'complete_day';
              taskStatusSrc = '../img/icons performance mgmt/desktop/Completed_green.svg';
            }
          } else if (taskStatusSrc == '' || tasksubmmitedcount <= 1) {
            taskDivClass = 'perv_day';
            taskStatusSrc = '../img/icons performance mgmt/desktop/Cross_red.svg';
          }
        } else if (streakDays[i].date === today.date) {
          taskDivClass = 'current_day';

          for (let j = 0; j < 4; j++) {
            if (!taskStatus[j] || taskStatus.length <= j) {
              if (j === 1) {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sunrise.svg';
              } else if (j === 2) {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sun.svg';
              } else {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sunset.svg';
              }
            }
          }
          if (taskStatusSrc == '' && taskStatus.length == 4) {
            taskDivClass = 'complete_day';
            taskStatusSrc = '../img/icons performance mgmt/desktop/Completed_green.svg';
          }
        }

        if (streakDays[i].onLeave) {
          taskDivClass = 'perv_day';
          if(streakDays[i].leaveType=='paid')
          taskStatusSrc = '../img/icons performance mgmt/desktop/PTO.svg';
          else
          taskStatusSrc = '../img/icons performance mgmt/desktop/UTO.svg';
        }


        if (!ClassAdded && id == 'streak-count') {

          streakCountHTML += `<div class="streak-dates-box">`
          if (dayToStartNextWeek > 3) {
            weekNo++;
            if (streakDays[i].date <= today.date)
            
            streakCountHTML += `<div style="color: var(--gray-400, #98A2B3);
  font-size: 11.077px;
  display:flex;
  width:100px;
  position:absolute;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  letter-spacing: 1.662px;">Week ${weekNo}</div>`
          }
          ClassAdded = true;
        }

        streakCountHTML += ` <div>
    <div style="display: flex; gap: 5px; justify-content: center; align-items: center; margin-bottom: 10px; width: 60px; height: 30px;">
      ${streakDays[i].ratingReviewStatus !== '' ?
            `<div style="
          display: flex;
          width: 24px;
          height: 24px;
          padding: 4px 0px;
          justify-content: center;
          align-items: center;
          gap: 4px;
          border-radius: 4px;
          background: var(--indigo-50, #EEF4FF);  
          mix-blend-mode: ${styleblendmode};
        "
        data-dismiss='modal'
        data-dismiss='modal' data-target='#review-rating-modal' data-toggle='modal'  onclick="SetContentToModal( '<%=employee._id%>', '${streakDays[i].date}' )"> 
          <img src="../img/icons performance mgmt/desktop/ratingReviewPerformance.svg">
        </div>` : ''}
      ${streakDays[i].onLeave && streakDays[i].date < today.date ?
            `<div class="dropdown">
          ${streakDays[i].countTaskStatus > 0 ?
              `<div 
              style="
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                color: #FF6565;
                font-size: 14px;
                font-weight: 500;
                width:90px;
              "
              onclick="ChangeVisibility('dropdownRaiseIssue-${streakDays[i].date}')">
              ${streakDays[i].leaveType ? streakDays[i].leaveType=='paid'?'PTO':'UTO': ''}  
            </div>
            <div class="dropdown-menu" id="dropdownRaiseIssue-${streakDays[i].date}" style="display: none; width: 330px; padding: 16px; flex-direction: column; justify-content: center; align-items: flex-start; gap: 16px; border-radius: 8px; background: #FFF7F7; box-shadow: 0px 2px 4px -2px rgba(16, 24, 40, 0.06), 0px 4px 8px -2px rgba(16, 24, 40, 0.10);">
            <div class="text-red-14-700">No Loom Update - Leave Deducted</div>
            <div class="text-red-14-700">
              You haven't uploaded ${streakDays[i].countTaskStatus < 3 ? 'any' : ''} Loom video updates for this day.
              Your leave quota will be deducted as per company policy.
            </div>
            <div style="display: flex; height: 40px; padding: 11px 16px; align-items: center; gap: 8px; cursor: pointer; border-radius: 12px; border: 1px solid #FF6565; background: #FFF;" class="text-red-14-700" data-toggle="modal" data-target="#RaiseIssueOnLeave" onclick="SetRaiseIssueOnLeaveDate('${streakDays[i].date}'); ChangeVisibility('dropdownRaiseIssue-${streakDays[i].date}')"> 
              Raise an Issue
            </div>
          </div> ` :
              `<div 
              style="
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                color: #FF6565;
                font-size: 14px;
                font-weight: 500;
                width:90px;
              ">
              ${streakDays[i].leaveType ? streakDays[i].leaveType=='paid'?'PTO':'UTO': ''}  
            </div>`
            }
         </div>` :
            `<div 
              style="
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                color: #FF6565;
                font-size: 14px;
                font-weight: 500;
                width:90px;
              "
              onclick="ChangeVisibility('dropdownRaiseIssue-${streakDays[i].date}')">
              ${streakDays[i].leaveType ? streakDays[i].leaveType=='paid'?'PTO':'UTO': ''} 
            </div>`}
    </div>
  
  `

        if (days == 3 || days == 5 || days == 10 || days == 15 || days == 23) {
          if (streakDays[i].date > today.date) {
            streakCountHTML += `
            <div data-dismiss='modal' onclick="openmodal('${streakDays[i].date}')" data-toggle='modal' data-target='#managerModalRating' style="align-items: center;
              display: flex;
              flex-direction: column;">
              <div style="font-size: 14px; padding: 0px 4px" class="circle small">
                <div>+${days == 3 ? 3 : days == 5 ? 7 : days == 10 ? 15 : days == 15 ? 22 : days == 23 ? 32 : 0}<img src='../img/gem.svg'/></div>
                <img src='../img/icons performance mgmt/desktop/Streak states_notDone.svg' />
                <div>${streakDays[i].date.slice(-2)}</div>
              </div>
              <div class=" ${ratingClass}" >${rating != 0 ? rating + `<img style="width:15px;margin-bottom:4px"  src=${starpath}>` : ''}</div>
            </div>
            </div>
          `;
          } else {
            streakCountHTML += `
            <div data-dismiss='modal'  onclick="openmodal('${streakDays[i].date}')" data-toggle='modal' data-target='#managerModalRating' style="align-items: center;
              display: flex;
              flex-direction: column;">
              <div style="font-size: 14px; padding: 0px 4px" class="circle big ${streakDays[i].isdone ? 'green' : 'text-green'}">
                <div>+${days == 3 ? 3 : days == 5 ? 7 : days == 10 ? 15 : days == 15 ? 22 : days == 23 ? 32 : 0}<img src='../img/gem.svg'/></div>
                <img src='../img/icons performance mgmt/desktop/Streak states.svg' />
                <div>${streakDays[i].date.slice(-2)}</div>
              </div>
              <div class=" ${ratingClass}" >${rating != 0 ? rating + `<img style="width:15px;margin-bottom:4px"  src=${starpath}>` : ''}</div>
            </div>
          </div>
          `;
          }

          if (i + 1 != streakDays.length) {
            if (id == 'streak-count') {
              if (!(dayToStartNextWeek == 1 || i + 1 == streakDays.length)) {
                streakCountHTML += `<div class="streakcount-line" style="border: 1px dashed #48BF84"></div>`;
              }
            } else {
              streakCountHTML += `<div class="streakcount-line" style="border: 1px dashed #48BF84"></div>`;
            }
          }
        } else {
          streakCountHTML += `
          <div  data-dismiss='modal'  onclick="openmodal('${streakDays[i].date}')" data-toggle='modal' data-target='#managerModalRating' style="align-items: center;
            display: flex;
            flex-direction: column;" class="streakcount-box" >
            <div class="circle small ${streakDays[i].isdone ? 'streak-green' : taskDivClass}">
              <img src="${streakDays[i].isdone ? '../img/icons performance mgmt/desktop/Streak states.svg' : streakDays[i].date > today.date ? '../img/icons performance mgmt/desktop/Streak states_notDone.svg' : taskStatusSrc}" />
              <div>${streakDays[i].date.slice(-2)}</div>
            </div>
            <div class=" ${ratingClass}" >${rating != 0 ? rating + `<img style="width:15px;margin-bottom:4px" src=${starpath}>` : ''}</div>
          </div>
        </div>
        `;

          if (i + 1 != streakDays.length) {
            let linehtml = '';
            if (streakDays[i].isdone) {
              linehtml += `<div class="streakcount-line" style="border: 1px dashed #48bf84"></div>`;
            } else {
              linehtml += `<div class="streakcount-line" style="border: 1px dashed #999"></div>`;
            }
            if (id == 'streak-count') {
              if (!(dayToStartNextWeek == 1 || i + 1 == streakDays.length)) {
                streakCountHTML += linehtml;
              }
            } else {
              streakCountHTML += linehtml
            }
          }
        }
        if (id == 'streak-count') {
          if (dayToStartNextWeek == 1 || i + 1 == streakDays.length) {
            streakCountHTML += `</div>`;
            weeksStreakData.push(streakCountHTML)
            streakCountHTML = '';
            dayToStartNextWeek = 5;
            ClassAdded = false;
          } else
            dayToStartNextWeek--;
        }
        
      }
 currentWeek =getWeekOfMonth(today.date);
 
      container.innerHTML = weeksStreakData[currentWeek];
    }

    function getWeekOfMonth(date) {
      date=new Date(date)
  const firstDay = new Date(date.getFullYear(), date.getMonth(), 1);
  const dayOfWeek = firstDay.getDay();
  const daysInFirstWeek = 7 - dayOfWeek;
  const dayOfMonth = date.getDate();

  return Math.ceil((dayOfMonth - daysInFirstWeek) / 7) ;
}

    SetStreakDates('streak-count', streakDays);
    SetModalStreakDates('modal-streak-count', streakDays);
    SetModalStreakData(month + 1, streakDays)

    function SetModalStreakData(selectedMonth, streakDays) {
      let today = getCurrentDay();
      let longestStreak = 0;
      let shortestStreak = 30;
      let currentStreak = 0;
      let totalRating = 0;
      let totalBadges = 0;
      let streakrewards = 0;
      let streakStart = null;
      let streakEnd = null;
      let currentdays = 0;
      let cnt = 0;
      for (let i = 0; i < streakDays.length; i++) {
        // if (streakDays[i].date <= today.date)
        //   currentdays++;
        totalRating += streakDays[i].rating;
        totalBadges += streakDays[i].badges;
        if (streakDays[i].rating > 0)
          cnt++;
        // if (streakDays[i].isdone) {
        //   currentStreak++;
        //   if (currentStreak > longestStreak) {
        //     longestStreak = currentStreak;
        //   }
        // } else {

        //   if (currentStreak > 0) {
        //     if (currentStreak < shortestStreak) {
        //       shortestStreak = currentStreak;
        //     }
        //     currentStreak = 0;
        //   }
        // }
        // if (currentStreak == 3)
        //   streakrewards += 3;
        // else if (currentStreak == 5)
        //   streakrewards += 7;
        // else if (currentStreak == 10)
        //   streakrewards += 15;
        // else if (currentStreak == 15)
        //   streakrewards += 22;
        // else if (currentStreak == 23)
        //   streakrewards += 32;
      }

      const averageRating = cnt == 0 ? 0 : totalRating / cnt;
      //totalBadges += streakrewards;

      const modaltotalBadges = document.getElementById('modal-total-badges');
      const modalavgrating = document.getElementById('modal-rating-avg')
      // const modalministreak = document.getElementById('modal-mini-streak')
      // const modalmaxistreak = document.getElementById('modal-maxi-streak')
      // const modalstreakrewards = document.getElementById('modal-streak-rewards');
      // const modalStreakMonth = document.getElementById('modal-streak-month');

     // modalStreakMonth.innerHTML = `Total Badges Earned in ${months[Number(selectedMonth) - 1]}`
      modaltotalBadges.innerHTML = `${totalBadges} <img src="../img/gem.svg" style='width:24px'>`
      modalavgrating.innerHTML = `${averageRating.toFixed(2)}  <img src="../img/icons performance mgmt/desktop/d_star_full.svg"/>`
      // modalministreak.innerHTML = `${shortestStreak == 30 ? 0 : shortestStreak} Days`;
      // modalmaxistreak.innerHTML = `${longestStreak} days`
      // modalstreakrewards.innerHTML = `${streakrewards} Badges`
    }

    function SetModalStreakDates(id, streakDays) {

      let days = 0;
      let today = getCurrentDay();
      streakCountHTML = '';
      let container = document.getElementById(id);


      for (let i = 0; i < streakDays.length; i++) {
        let styleblendmode = streakDays[i].ratingReviewStatus == 'Pending' ? '' : 'luminosity'

        if (streakDays[i].isdone || streakDays[i].date >= today.date) {
          days += 1;
        } else {
          days = 0;
        }

        let ratingClass = 'rating-status'
        let rating = streakDays[i].rating ? streakDays[i].rating : 0;
        let starpath = "../img/black_star.svg"
        if (rating != 0) {
          if (rating >= 4.5) {
            ratingClass += ' golden-rating-status'
          } else if (rating >= 3.5) {
            ratingClass += ' skyblue-rating-status'
          } else if (rating >= 2.5) {
            ratingClass += ' orange-rating-status'
          } else {
            starpath = '../img/white_star.svg'
            ratingClass += ' red-rating-status'
          }
        }
        let taskStatus = streakDays[i].taskStatus;
        let taskStatusSrc = '';
        let taskDivClass = '';

        if (streakDays[i].date < today.date) {
          taskDivClass = 'perv_day';
          for (let j = 1; j < 4; j++) {
            if (!taskStatus[j] || taskStatus.length <= j) {
              if (j === 1) {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sunrise_perv.svg';
                break;
              } else if (j === 2) {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sun_perv.svg';
                break;
              } else {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sunset_perv.svg';
                break;
              }
            }
          }
          let tasksubmmitedcount = 0;
          for (let i = 1; i < taskStatus.length; i++) {
            if (taskStatus[i])
              tasksubmmitedcount++;
          }

          if (taskStatusSrc == '' && (taskStatus.length == 4 || streakDays[i].rating > 0)) {
            if (streakDays[i].rating > 0 && streakDays[i].rating >= 2.5 && streakDays[i].rating <= 3.5) {
              taskDivClass = 'current_day';
              taskStatusSrc = '../img/icons performance mgmt/desktop/Completed_yellow.svg';
            } else if (streakDays[i].rating > 0 && streakDays[i].rating < 2.5) {
              taskDivClass = 'perv_day';
              taskStatusSrc = '../img/icons performance mgmt/desktop/Completed_red.svg';
            } else {
              taskDivClass = 'complete_day';
              taskStatusSrc = '../img/icons performance mgmt/desktop/Completed_green.svg';
            }
          } else if (taskStatusSrc == '' || tasksubmmitedcount <= 1) {
            taskDivClass = 'perv_day';
            taskStatusSrc = '../img/icons performance mgmt/desktop/Cross_red.svg';
          }
        } else if (streakDays[i].date === today.date) {
          taskDivClass = 'current_day';
          for (let j = 0; j < 4; j++) {
            if (!taskStatus[j] || taskStatus.length <= j) {
              if (j === 1) {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sunrise.svg';
              } else if (j === 2) {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sun.svg';
              } else {
                taskStatusSrc = '../img/icons performance mgmt/desktop/sunset.svg';
              }
            }
          }
          if (taskStatusSrc == '' && taskStatus.length == 4) {
            taskDivClass = 'complete_day';
            taskStatusSrc = '../img/icons performance mgmt/desktop/Completed_green.svg';
          }
        }

        if (streakDays[i].onLeave) {
          taskDivClass = 'perv_day';
          if(streakDays[i].leaveType=='paid')
          taskStatusSrc = '../img/icons performance mgmt/desktop/PTO.svg';
          else
          taskStatusSrc = '../img/icons performance mgmt/desktop/UTO.svg';
        }


        streakCountHTML += ` <div>
    <div style="display: flex; gap: 5px; justify-content: center; align-items: center; margin-bottom: 10px; width: 60px; height: 30px;">
      ${streakDays[i].ratingReviewStatus !== '' ?
            `<div style="
          display: flex;
          width: 24px;
          height: 24px;
          padding: 4px 0px;
          justify-content: center;
          align-items: center;
          gap: 4px;
          border-radius: 4px;
          background: var(--indigo-50, #EEF4FF);  
          mix-blend-mode: ${styleblendmode};
        "
        data-dismiss='modal'
        data-target='#Rating-Reviewed-modal-step1'
        data-toggle='modal'
        onclick="SetRatingReviwedModal(
          '${streakDays[i].badges}',
          '${streakDays[i].rating}',
          '${streakDays[i].managerFeedback}",
          '${streakDays[i].date}',
          '<%=employee._id%>'
        )"> 
          <img src="../img/icons performance mgmt/desktop/ratingReviewPerformance.svg">
        </div>` : ''}
      ${streakDays[i].onLeave && streakDays[i].date < today.date ?
            `<div class="dropdown">
          ${streakDays[i].countTaskStatus > 0 ?
              `<div 
              style="
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                color: #FF6565;
                font-size: 14px;
                font-weight: 500;
                width:90px;
              "
              onclick="ChangeVisibility('dropdownRaiseIssue-${streakDays[i].date}')">
              ${streakDays[i].leaveType ? streakDays[i].leaveType=='paid'?'PTO':'UTO': ''} 
            </div>
            <div class="dropdown-menu" id="dropdownRaiseIssue-${streakDays[i].date}" style="display: none; width: 330px; padding: 16px; flex-direction: column; justify-content: center; align-items: flex-start; gap: 16px; border-radius: 8px; background: #FFF7F7; box-shadow: 0px 2px 4px -2px rgba(16, 24, 40, 0.06), 0px 4px 8px -2px rgba(16, 24, 40, 0.10);">
            <div class="text-red-14-700">No Loom Update - Leave Deducted</div>
            <div class="text-red-14-700">
              You haven't uploaded ${streakDays[i].countTaskStatus < 3 ? 'any' : ''} Loom video updates for this day.
              Your leave quota will be deducted as per company policy.
            </div>
            <div style="display: flex; height: 40px; padding: 11px 16px; align-items: center; gap: 8px; cursor: pointer; border-radius: 12px; border: 1px solid #FF6565; background: #FFF;" class="text-red-14-700" data-toggle="modal" data-target="#RaiseIssueOnLeave" onclick="SetRaiseIssueOnLeaveDate('${streakDays[i].date}'); ChangeVisibility('dropdownRaiseIssue-${streakDays[i].date}')"> 
              Raise an Issue
            </div>
          </div> ` :
              `<div 
              style="
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                color: #FF6565;
                font-size: 14px;
                font-weight: 500;
                width:90px;
              ">
              ${streakDays[i].leaveType ? streakDays[i].leaveType=='paid'?'PTO':'UTO': ''}  
            </div>`
            }
         </div>` :
            `<div 
              style="
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                color: #FF6565;
                font-size: 14px;
                font-weight: 500;
                width:90px;
              "
              onclick="ChangeVisibility('dropdownRaiseIssue-${streakDays[i].date}')">
              ${streakDays[i].leaveType ? streakDays[i].leaveType=='paid'?'PTO':'UTO': ''}  
            </div>`}
    </div>
  
  `

        if (days == 3 || days == 5 || days == 10 || days == 15 || days == 23) {
          if (streakDays[i].date > today.date) {
            streakCountHTML += `
            <div data-dismiss='modal' onclick="getPerformanceByDate('${streakDays[i].date}')" data-toggle='modal' data-target='#RatingInfoModal' style="align-items: center;
              display: flex;
              flex-direction: column;">
              <div style="font-size: 14px; padding: 0px 4px" class="circle small">
                <div>+${days == 3 ? 3 : days == 5 ? 7 : days == 10 ? 15 : days == 15 ? 22 : days == 23 ? 32 : 0}<img src='../img/gem.svg'/></div>
                <img src='../img/icons performance mgmt/desktop/Streak states_notDone.svg' />
                <div>${streakDays[i].date.slice(-2)}</div>
              </div>
              <div class=" ${ratingClass}" >${rating != 0 ? rating + `<img style="width:15px;margin-bottom:4px"  src=${starpath}>` : ''}</div>
            </div>
            </div>
          `;
          } else {
            streakCountHTML += `
            <div data-dismiss='modal'  onclick="getPerformanceByDate('${streakDays[i].date}')" data-toggle='modal' data-target='#RatingInfoModal' style="align-items: center;
              display: flex;
              flex-direction: column;">
              <div style="font-size: 14px; padding: 0px 4px" class="circle big ${streakDays[i].isdone ? 'green' : 'text-green'}">
                <div>+${days == 3 ? 3 : days == 5 ? 7 : days == 10 ? 15 : days == 15 ? 22 : days == 23 ? 32 : 0}<img src='../img/gem.svg'/></div>
                <img src='../img/icons performance mgmt/desktop/Streak states.svg' />
                <div>${streakDays[i].date.slice(-2)}</div>
              </div>
              <div class=" ${ratingClass}" >${rating != 0 ? rating + `<img style="width:15px;margin-bottom:4px"  src=${starpath}>` : ''}</div>
            </div>
          </div>
          `;
          }

          if (i + 1 != streakDays.length) {
            streakCountHTML += `<div class="streakcount-line" style="border: 1px dashed #48BF84"></div>`;
          }
        } else {
          streakCountHTML += `
          <div  data-dismiss='modal'  onclick="getPerformanceByDate('${streakDays[i].date}')" data-toggle='modal' data-target='#RatingInfoModal' style="align-items: center;
            display: flex;
            flex-direction: column;" class="streakcount-box" >
            <div class="circle small ${streakDays[i].isdone ? 'streak-green' : taskDivClass}">
              <img src="${streakDays[i].isdone ? '../img/icons performance mgmt/desktop/Streak states.svg' : streakDays[i].date > today.date ? '../img/icons performance mgmt/desktop/Streak states_notDone.svg' : taskStatusSrc}" />
              <div>${streakDays[i].date.slice(-2)}</div>
            </div>
            <div class=" ${ratingClass}" >${rating != 0 ? rating + `<img style="width:15px;margin-bottom:4px" src=${starpath}>` : ''}</div>
          </div>
        </div>
        `;

          if (i + 1 != streakDays.length) {
            if (streakDays[i].isdone) {
              streakCountHTML += `<div class="streakcount-line" style="border: 1px dashed #48bf84"></div>`;
            } else {
              streakCountHTML += `<div class="streakcount-line" style="border: 1px dashed #999"></div>`;
            }
          }
        }

      }
      container.innerHTML = streakCountHTML
    }

    async function openmodal(date) {
      let employeeID = '<%= employee._id %>';
      let response = await fetch(`/fetch/recordbydate/${date}/${employeeID}`, {
        method: "GET",
        headers: {
          "Content-Type": "application/json"
        },
      });
      let data = await response.json();
      let admin = {
        image: '<%=employee.image%>',
        firstName: '<%=employee.firstName%>'
      }

      const adminPerformance = {
        admin: admin,
        performanceRecord: data.performanceRecord
      };
      sendData(JSON.stringify(adminPerformance), employeeID, date);


    }



   // removeIcons('.onhover')
  


    function CloseBox(className, iconid, property) {
      let box = document.querySelectorAll(className);
      let icon = document.getElementById(iconid);
      icon.classList.toggle("fa-angle-down");
      icon.classList.toggle("fa-angle-up");
      if (box[0].style.display == "none")
        box.forEach(body => {
          body.style.display = property
        })
      else
        box.forEach(body => {
          body.style.display = "none"
        })
    }

    function ChangeTab() {
      let InitiativesTab = document.getElementById('InitiativesTab');
      let ProjectsTab = document.getElementById('ProjectsTab');
      let InitiativesBody = document.getElementById('InitiativeBody');
      let ProjectsBody = document.getElementById('ProjectsBody');
      if (InitiativesBody.style.display == 'flex') {
        InitiativesTab.classList.remove('active');
        ProjectsTab.classList.add('active');
        InitiativesBody.style.display = 'none';
        ProjectsBody.style.display = 'flex';
      } else {
        InitiativesTab.classList.add('active');
        ProjectsTab.classList.remove('active');
        InitiativesBody.style.display = 'flex';
        ProjectsBody.style.display = 'none';
      }
    }
    const linkInput = document.getElementById('linkSubmit');
    let keypoint = `<%= performanceRecord.keyPoints ? JSON.stringify(performanceRecord.keyPoints) : "[]" %>`;

    let tempElement = document.createElement("textarea");
    tempElement.innerHTML = keypoint;
    keypoint = tempElement.value;

    try {
      keypoint = JSON.parse(keypoint);
    } catch (error) {
      console.error("Error parsing keypoint:", error);
    }

    let keypoints = keypoint.length > 2 ? keypoint : ['', '', ''];
    let link = '';


    function showIcons(classname) {
        const box = document.querySelectorAll(classname);
        box.forEach((element) => {
            element.style.display = 'flex';
        });
    }

    function removeIcons(classname) {
        const box = document.querySelectorAll(classname);
        box.forEach((element) => {
            element.style.display = 'none';
        });
    }

    function AddKeyPoints() {
      keypoints.push('');
      UpdateKeyPointBody();
    }

    function DeleteKeyPoint(id) {
      keypoints.splice(id - 1, 1);
      UpdateKeyPointBody();
      ChangeVisbilityEodButton('submiteodbutton', 'eodlinkinput');
    }

    function UpdateKeyPointBody() {
      let keypointbody = document.getElementById('KeyPointBody');
      let innerhtml = '';

      for (let i = 0;i < keypoints.length;i++) {
        let keyno = i + 1;

        innerhtml += ` <div style="display: flex;align-items: center;gap:4px;width:100%">
              <div id="keypointno${keyno}">${keyno}.</div>
              <div style="width:100%;    display: flex;
              align-items: center;
              gap: 10px;" onmouseover="showIcons('.keypoint${keyno}')" onmouseout="removeIcons('.keypoint${keyno}')">
                <input style="display: flex;
      height: 48px;
      padding: 14px 20px;
      align-items: center;
      gap: 10px;
      flex: 1 0 0;
      border-radius: 12px;
      border: 1px solid #ECECEC;
      background: #FFF;" placeholder="E.g., Resolved XYZ issue" oninput="ChangeKeyPoint(${keyno},event)" value='${keypoints[keyno - 1] ? keypoints[keyno - 1] : ''}'>
                <img style="display: none;" src="../Project icons/Delete.svg" id="keypoint${keyno}" class="keypoint${keyno}" onclick="DeleteKeyPoint(${keyno})">
              </div>
            </div>`
      }
      keypointbody.innerHTML = innerhtml;
    }
   
    UpdateKeyPointBody();

    function ChangeKeyPoint(id, event) {
      keypoints[id - 1] = event.target.value.replace('"', '\\\"');
      ChangeVisbilityEodButton('submiteodbutton', 'eodlinkinput');
    }

    function ChangeVisbilityEodButton(id, inputid) {
      let submitButton = document.getElementById(id);
      const inputValue = document.getElementById(inputid).value.trim();
      link = inputValue;
      let count = 0;
      for (let i = 0; i < keypoints.length; i++) {
        if (keypoints[i].length > 0)
          count++;
      }
      if (inputValue.length > 0 && count > 2) {
        submitButton.disabled = false;
      } else {
        submitButton.disabled = true;
      }
    }

    function ChangeVisbility(boxid, buttonid) {
      const box = document.getElementById(boxid);
      const button = document.getElementById(buttonid);
      if (box.style.display == 'none') {
        box.style.display = "flex";
        button.innerHTML = "Close Tutorial <i class='fa fa-angle-up '> </i>";
      } else {
        box.style.display = "none";
        button.innerHTML = "Show Tutorial <i class='fa fa-angle-down '> </i>";
      }
    }

    function ChangeButtonState(id, event) {
      let submitButton = document.getElementById(id);
      const inputValue = event.target.value.trim();
      link = inputValue;
      if (inputValue.length > 0) {
        submitButton.disabled = false;
      } else {
        submitButton.disabled = true;
      }
    }

    function ClearValue(id) {
      document.getElementById(id).value = '';
    }
    var taskno;

    function showtaskno(i, link) {
      taskno = i;
      if (i == 3) {
        document.getElementById('eodlinkinput').value = link;
      } else
        linkInput.value = link;

    }
    const submitButton = document.getElementById('submitlinkbutton');


    // Throttling function used : if user click submit button 3-4 times continuously then it will submit only once in 1 sec : https://www.youtube.com/watch?v=81NGEXAaa3Y&list=PLlasXeu85E9eV5xUEgrWUB8NAUvNZGsK0&index=10&ab_channel=AkshaySaini
    function Throttling(f, delay) {
      let flag = true;
      return function() {
        let context = this;
        let args = arguments;
        if (flag) {
          f.apply(context, args);
          flag = false;
          setTimeout(() => {
            flag = true;
          }, delay)
        }
      }
    }

    let BetterFunction = Throttling(SubmitTaskLink, 1000);

    async function SubmitTaskLink() {
      const data = {
        link: link,
        taskno: taskno,
        date: '<%=selectedDate%>',
        keyPoints: keypoints
      };

      try {
        const response = await fetch('/submit/dailytasklink', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });
        response = await response.json();
        
        
        if(response.message=='Submitted')
        {
         $('#successModal').modal("show");
        }
        else{
         $('#errorModal').modal("show");
        }

     } catch (error) {
       
       alert('Error:', error.message);
       $("#errorModal").modal("show");
     }
   }




    const button = document.getElementById('feedbackrating')
    var it = 0;


    function getpervday(date) {
      const currentDate = new Date(date);
      currentDate.setDate(currentDate.getDate() - 1);

      const year = currentDate.getFullYear();
      const month = String(currentDate.getMonth() + 1).padStart(2, '0');
      const day = String(currentDate.getDate()).padStart(2, '0');

      const previousDateString = `${year}-${month}-${day}`;
      return previousDateString;
    }
    async function updateperviousDayPopUp(employeeId, date) {

      const response = await fetch('/performance/previousDayPopUp', {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          employeeId,
          date
        }),
      });


    }
  </script>
   <script>
    const pIndicatorfeedback = document.getElementById('feedback-textarea');
    const pIndicatorfeedbackm = document.getElementById('feedback-textaream');
    let feedbackId = null,nudgeId=null;
    let feedbacks=[];
    let nudges=[];
    let feedbackval='';
    function ChangeFeedback(value)
    {
      feedbackval=value;
    }
    function getData()
    {
      fetch('/get/feedback/nudge/<%=employee._id%>')
      .then(res => res.json())
      .then(data => {
        console.log(data);
        feedbacks=data.feedbacks;
        nudges=data.nudges;
        SetFeedbackNudges();
       
      })
      .catch(err => {
        alert('Error:', err.message);
      });
    }
    getData()
    function SetFeedbackNudges() {
  let body = document.getElementById('NudegFeedbackBody');
  let bodym = document.getElementById('NudegFeedbackBodym');
  let innerHTML = '';

  for (let nudge of nudges) {
    let style = '';
    let type = nudge.type;

    if (type == 'Congratulatory Message') {
      style = 'background: var(--Success-100, #D1FADF); border: 4px solid var(--Success-50, #ECFDF3)';
    } else if (type == 'Appreciation Note') {
      style = 'background: var(--Success-100, #D1FADF); border: 4px solid var(--Success-50, #ECFDF3)';
    } else if (type == 'Improvement Suggestion') {
      style = 'background: var(--Success-100, #FEF0C7); border: 4px solid var(--Success-50, #FFFAEB)';
    } else {
      style = 'background: var(--Error-100, #FEE4E2); border: 4px solid var(--Error-50, #FEF3F2)';
    }

    innerHTML += `<div style="padding: 16px; background: white; border-radius: 8px; border: 1px #EAECF0 solid; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex; width: 100%;" onmouseover="showIcons('.deleteIcon${nudge._id}')" onmouseout="removeIcons('.deleteIcon${nudge._id}')">
      <div style="flex: 1 1 0; justify-content: flex-start; align-items: flex-start; gap: 16px; display: flex">
        <div style="width: 28px; justify-content: center; align-items: center; display: flex">
          <div style="flex: 1 1 0; align-self: stretch; padding: 8px; ${style}; justify-content: center; align-items: center; display: inline-flex;border-radius:28px;">
            <div style="width: 16px; height: 16px; position: relative; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: flex;">
              <img src="../NudgeType/${nudge.type.replace(/\s+/g, '')}.svg">
            </div>
          </div>
        </div>
        <div style="flex: 1 1 0; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: inline-flex;">
          <div class="d-flex justify-content-between align-self-stretch">
          <div style="align-self: stretch; color: #344054; font-size: 14px; font-weight: 500; line-height: 20px; word-wrap: break-word;">${nudge.title}</div>
          <i style="color: #D0D5DD; cursor: pointer; display: none;" data-toggle="modal" data-target="#delete-nudge" class="deleteIcon${nudge._id} fas fa-solid fa-trash delete-button" data-whatever="${nudge._id}" onclick="SetNudgeIdToDelete('${nudge._id}')"></i>
         </div>
          <div style="align-self: stretch; color: #667085; font-size: 14px; font-weight: 400; line-height: 20px; word-wrap: break-word;">${nudge.description}</div>
        </div>
      </div>
    </div>`;
  }

  for (let feedback of feedbacks) {
    innerHTML += `<div onmouseover="showIcons('.deleteIcon${feedback._id}')" onmouseout="removeIcons('.deleteIcon${feedback._id}')" class="comment-container" id="comment-${feedback._id}" style="padding: 16px; background: white; border-radius: 8px; border: 1px #EAECF0 solid; justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex; width: 100%;">
      <div style="flex: 1 1 0; justify-content: flex-start; align-items: flex-start; gap: 16px; display: flex;">
        <img style="width: 32px; height: 32px; border-radius: 160px;" src="${feedback.managerInfo?.image}">
        <div style="flex: 1 1 0; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: inline-flex;">
          <div class="d-flex justify-content-between align-self-stretch">
            <div style="align-self: stretch; color: #344054; font-size: 14px; font-weight: 500; line-height: 20px; word-wrap: break-word;">${feedback.managerInfo?.name}</div>
            <i style="color: #D0D5DD; cursor: pointer; display: none;" data-toggle="modal" data-target="#delete-comment" class="deleteIcon${feedback._id} fas fa-solid fa-trash delete-button" data-whatever="${feedback._id}" onclick="SetCommentIdToDelete('${feedback._id}')"></i>
          </div>
          <div style="align-self: stretch; color: #667085; font-size: 14px; font-weight: 400; line-height: 20px; word-wrap: break-word;">${feedback.comment}</div>
        </div>
      </div>
    </div>`;
  }

  body.innerHTML = innerHTML;
  bodym.innerHTML = innerHTML;
}
 
    let NudgeInfo={employeeId:'<%=employee._id%>'};
    function SetCommentIdToDelete(id){
      feedbackId = id;
    }
    function SetNudgeIdToDelete(id){
      nudgeId = id;
    }
   async function submitFeedback(){
     try{
let feedback=feedbackval;
      if(feedback.length==0)
      return;
      const data = {
        comment:feedback,
        employeeId: '<%=employee._id%>',
        managerInfo:{id:'<%=managerVisitingInfo._id%>',name:'<%=managerVisitingInfo.displayName%>',image:'<%=managerVisitingInfo.image%>'}
      };
     let res=await  fetch('/performanceBoard/feedback', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
      })
      res=await  res.json();
        feedbacks.push(res.feedback);
        pIndicatorfeedback.value=''
        pIndicatorfeedbackm.value=''
        SetFeedbackNudges();
    }
    catch(err) {
        console.log(err);
      }
     
    }

    function deleteFeedback(){
      $('loadingModal').modal('show');
      fetch('/performanceBoard/feedback', {
        method: 'DELETE',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({feedbackId}),
      }).then(res => {
        if(res.status === 200){
          if(res.status === 200){
          feedbacks=feedbacks.filter(feedback=>feedback._id!==feedbackId);
         SetFeedbackNudges()
        }
        }
      }).catch(err => {
       console.log(err);
      });
    }

   async function deleteNudge(){
     try{
     let res= await fetch('/create/nudge', {
        method: 'DELETE',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({nudgeId}),
      })
      res=await res.json();
      if(res.success){
          nudges=nudges.filter(nudge=>nudge._id!==nudgeId);
         SetFeedbackNudges()
      }
        }
     catch(err){
       console.log(err);
      };
    }

   async function SendNudge()
    {
      try{
       let res=await fetch('/create/nudge',{
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(NudgeInfo),
       })
       res=await res.json();
          nudges.push(res.nudge);
          SetFeedbackNudges();
          NudgeInfo={employeeId:'<%=employee._id%>'};
      }
      catch(error)
      {
        console.log(error);
      }
    }

    function SetNudgeInfo(type, value) {
    if (type !== '' && value !== '') {
        NudgeInfo[type] = value;
    }

    let titlebox = document.getElementById('nudgeTypeM');
    titlebox.innerHTML = NudgeInfo.type||"Select the type of nudge you'd like to send.";
    titlebox.className=NudgeInfo.type&&NudgeInfo.type.length>0?'text-16-700':'text-gray-14-500';
    let icon = document.getElementById('perviewNudgeType');
    let title = document.getElementById('perviewTitle');
    let description = document.getElementById('perviewDescription');
    let titleNudge=document.getElementById('titleNudge');
    let descriptionNudge=document.getElementById('descriptionNudge');
    if (NudgeInfo.type && NudgeInfo.type.length > 0) {
      let nudgeType=NudgeInfo.type;
     
        if(nudgeType=='Congratulatory Message')
      { 
      icon.innerHTML=`<img src="../NudgeType/CongratulatoryMessage.svg">`
        icon.style.background = `var(--Success-100, #D1FADF)`;
        icon.style.border = `4px solid var(--Success-50, #ECFDF3)`;
        
      }
      else if(nudgeType=='Appreciation Note')
      {
       
        icon.innerHTML=`<img src="../NudgeType/AppreciationNote.svg">`
        icon.style.background=`var(--Success-100, #D1FADF)`
        icon.style.border=`4px solid var(--Success-50, #ECFDF3)`
      }
      else if(nudgeType=='Improvement Suggestion')
      { 
        icon.innerHTML=`<img src="../NudgeType/ImprovementSuggestion.svg">`
        icon.style.background=`var(--Success-100, #FEF0C7)`
        icon.style.border=`4px solid var(--Success-50, #FFFAEB)`
      }
      else{
       
        
        icon.innerHTML=`<img src="../NudgeType/CautionaryAlert.svg">`
        icon.style.background=`var(--Error-100, #FEE4E2)`
        icon.style.border=`4px solid var(--Error-50, #FEF3F2)`
      }
       
    } else {
        icon.innerHTML = `<img src="../NudgeType/perview.svg">`;
        icon.style.border = `4px solid var(--Gray-50, #F9FAFB)`;
        icon.style.background = `var(--Gray-100, #F2F4F7)`;
    }

    title.innerHTML = NudgeInfo.title || 'Title/warning';
    description.innerHTML = NudgeInfo.description || 'Your composed message';
    if(NudgeInfo.title)
    titleNudge.value = NudgeInfo.title 
    else
    titleNudge.placeholder='Title/warning',titleNudge.value=''
    if(NudgeInfo.description)
    descriptionNudge.value = NudgeInfo.description 
    else{
    descriptionNudge.placeholder='Your composed message',descriptionNudge.value=''
    }
    let button = document.getElementById('SendNudge');
    button.disabled = !(NudgeInfo.type && NudgeInfo.title && NudgeInfo.description);
}


  </script>

  <!----Set Perofmance Score -->
  <script>
    let monthYear=document.getElementById('monthSelect').value;
    let FutureAllow='<%=employee.performanceTypeForFutureMonths%>';
    let performanceScoreModal={employeeId:'<%=employee._id%>',monthYear:monthYear,performanceScore:0,performanceCalculateType:'Automatic',performanceMatrix:[] };
    let topScore={};
    let PerformanceInsightsMonths=[];
    let currentPerformanceMonth=new Date(monthYear);
    for (let i = -2; i <=10; i++) {
     currentPerformanceMonth.setDate(currentPerformanceMonth.getMonth() + i);
     let month=currentPerformanceMonth.getMonth();
    let year = currentPerformanceMonth.getFullYear();
    let monthYear = `${year}-${(month + 1).toString().padStart(2, '0')}`;
    let monthYearText = new Date(year, month).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
    PerformanceInsightsMonths.push({ monthYear, monthYearText });
   }

async function GetPerformanceInsightsMonths() {
  let response = await fetch(`/PerformanceInsightsMonths/?months=${PerformanceInsightsMonths}`);
  response = await response.json();
  PerformanceInsightsMonths = response.PerformanceInsightsMonths;
  console.log(PerformanceInsightsMonths);
  SetPerformanceInsightsMonths();
  }
setTimeout(() => {
  GetPerformanceInsightsMonths()
}, 2000);

    function SetPerformanceScoreAndTopPerformer()
    {
      let PerformanceLevelm=document.getElementById('PerformanceLevelm');
      let PerformanceLevel=document.getElementById('PerformanceLevel');
      PerformanceLevelm.innerHTML=performanceScoreModal.level.info;
      PerformanceLevel.innerHTML=performanceScoreModal.level.info;
       let bgEmployee='',bgTopPerformer='' 
       let performanceScore=performanceScoreModal.score;
        if(performanceScore>90) 
        {bgEmployee='linear-gradient(270deg, #48BF84 -0.04%, #ECFDF3 100%)'} 
        else if(performanceScore>80) 
        {bgEmployee='linear-gradient(270deg, #2E90FA -0.04%, #EFF8FF 100%)'} 
        else if(performanceScore>50)
         {  bgEmployee='linear-gradient(270deg, #FDB022 -0.04%, #FFFAEB 100%)'} 
         else {bgEmployee='linear-gradient(270deg, #D92D20 -0.04%, #FEF3F2 100%)'} 
           if(topScore.score>90) 
          {bgTopPerformer='linear-gradient(270deg, #48BF84 -0.04%, #ECFDF3 100%)'} 
          else if(topScore.score>80) 
          {bgTopPerformer='linear-gradient(270deg, #2E90FA -0.04%, #EFF8FF 100%)'} 
          else if(topScore.score>50)
           {  bgTopPerformer='linear-gradient(270deg, #FDB022 -0.04%, #FFFAEB 100%)'} 
           else {bgTopPerformer='linear-gradient(270deg, #D92D20 -0.04%, #FEF3F2 100%)'}
      let SetGraphm=document.getElementById('SetGraphm');

      innerhtml=`<div class="group-2">
                    <div class="overlap-group" style="width: 90%;"><img class="img" src="../img/Skill badge icons/ph_target.svg" style="left:90%"/></div>
                    <div class="text">Expected Performance</div>
                    <div class="tooltip" >
                      <div class="content">
                        <div class="text-wrapper">90</div>
                      </div>
                     
                    </div>
                  </div>
                  <div class="group-3">
                    <div class="avatar-wrapper" style="display: flex;justify-content: flex-end;align-items: center
                    ;width:${topScore.score}% ;background:${bgTopPerformer}" >
                      <img style="width: 32px;
                      height: 32px;
                      border-radius: 32px;
                      margin-right: 10px;" src="${topScore.image}" />
                    </div>
                    <div class="text-2">Top performer</div>
                    <div class="tooltip-3" style="left:${topScore.score}%">
                      <div class="div-wrapper" >
                        <div class="text-wrapper">${topScore.score}</div>
                      </div>
                     
                    </div>
                  </div>
                  <div class="group-4">
                    <div class="overlap-2">
                      <div class="rectangle" id="PerformanceScoreGraph" style="background: linear-gradient(270deg, #F79009 -0.04%, #FEEFC7 100%);display: flex;justify-content: flex-end;align-items: center;overflow: hidden;
          width:${performanceScore}%;background:${bgEmployee}" >
           <img style="width: 32px;
           height: 32px;
           border-radius: 32px;
           margin-right: 10px;" src="<%=employee.image%>" />
          </div>
                      <div class="avatar-2"></div>
                      <div class="tooltip-4" style="left:${performanceScore}%">
                        <div class="content-2">
                          <div class="text-wrapper" id="PerformanceScoreEmployee">${performanceScore}</div>
                        </div>
                       
                      </div>
                    </div>
                    <div class="text"><%=employee.firstName%> Performance</div>
                  </div>`
      
      SetGraphm.innerHTML=innerhtml;           
    }
    function SetReportofMonth(performanceScore) {
      performanceScore = parseFloat(performanceScore);
     console.log(performanceScore)
    var sportsPoints = (performanceScore/100).toFixed(2),
		svgSportsPath = document.getElementById('sports')
	document.getElementById('performanceScoreText').innerHTML = performanceScore;
   
var sports = new ProgressBar.Path(svgSportsPath, {
  easing: 'easeInOut',
  duration: 1000,
	text: { value: '20' }
});
sports.set(0);

sports.animate(sportsPoints); 

var svgSportsPathm = document.getElementById('sportsm')
	document.getElementById('performanceScoreTextm').innerHTML = performanceScore;
   
var sportsm = new ProgressBar.Path(svgSportsPathm, {
  easing: 'easeInOut',
  duration: 1000,
	text: { value: '20' }
});
sportsm.set(0);
sportsm.animate(sportsPoints); 
      
        let color;
        if (performanceScore <= 50)
          color = '#D92D20'
        else if (performanceScore <= 80)
          color = '#FDB022';
        else if (performanceScore <=90)
          color = '#2E90FA';
        else 
          color = '#48BF84';
          svgSportsPath.setAttribute('stroke',color );
          svgSportsPathm.setAttribute('stroke',color );
          SetPerformanceScoreAndTopPerformer()
        }
    
     function SetPerformanceInsightsMonths()
     {
      let PerformanceInsightsMonthBody=document.getElementById('PerformanceInsightsMonths');
      let innerhtml='';
      for(let performance of PerformanceInsightsMonths)
      {
        innerhtml+=`
        <div style="display: flex;
          padding: 12px 16px;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          gap: 15px;
          border-radius: var(--Radius-medium, 8px);
          background: #FFF;
          box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);" class="PerformanceInsightsMonth" id="PerformanceInsightsMonth${performance.monthYear}" onclick="GetPerformanceModalData(${performance.monthYear})">
        <div style="color: var(--Gray-500, #667085);
        font-size: 18px;
        font-style: normal;
        font-weight: 600;
        line-height: 24px; /* 133.333% */">${performance.monthYearText}</div> 
        <div style="display: flex;
        align-items: center;
        gap: 10px;">
        ${performance.IconStyle}
        ${performance.level.info}
      </div> 
        </div>
        `
      }
      PerformanceInsightsMonthBody.innerHTML=innerhtml;
      GetPerformanceModalData(monthYear)
     }   
    
    async function GetPerformanceModalData(monthYear)
    {
      let PerformanceInsightsMonths=document.querySelectorAll('.PerformanceInsightsMonth');
      for(let performance of PerformanceInsightsMonths)
      {
        performance.classList.remove('activePerformanceInsightsMonth');
      }
      let PerformanceInsightsMonth=document.getElementById('PerformanceInsightsMonth'+monthYear);
      PerformanceInsightsMonth.classList.add('activePerformanceInsightsMonth');
    let response=await fetch('/performanceModal/?id=<%=employee._id%>&monthYear='+monthYear);
    document.getElementById('SPMonthYear').value=monthYear;
    response=await response.json();
    topScore=response.topScore;
    performanceScoreModal=response.performanceScoreModal;
    SetReportofMonth(performanceScoreModal.score)
    SetPerformanceDatatoModal()
    }
    
  function SetPerformanceDatatoModal()
    {
     let SPScoreInput=document.getElementById('SPScoreInput')
     let SPLevel=document.getElementById('SPLevel')
 SPScoreInput.value=performanceScoreModal.score;
 SPLevel.innerHTML=performanceScoreModal.level.info;
 let matrix=performanceScoreModal.MatrixWeightage;
for(let i=0;i<7;i++)
{
  let SPCheckbox=document.getElementById('SPCheckbox'+i);
  let  SPWeightage=document.getElementById('SPWeightage'+i);
  SPCheckbox.checked=matrix[i]!=0;
  SPWeightage.value=matrix[i];
}
let index=performanceScoreModal.performanceCalculateType=='Manual'?1:0;
SPType(index)

    }
  function SPLevel(i)
    {
      let SPLevel=document.getElementById('SPLevel')
      let innerhtml='';
      if (i==3) { 
        innerhtml=`<span style="color: #48bf84; background: var(--Success-50, #ECFDF3); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8" fill="none"><circle cx="4" cy="4" r="3" fill="#48BF84"/></svg> Superb
      </span>`
      } else if (i==2) { 
        innerhtml=` <span style="color: #2E90FA; background: var(--Blue-50, #EFF8FF); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.66797" cy="4" r="3" fill="#2E90FA"/></svg> Great
            </span>`
          
      } else if (i==1) { 
        innerhtml=`  <span style="color: var(--Warning-500, #FDB022); background: var(--Warning-50, #FFFAEB); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.33203" cy="4" r="3" fill="#FDB022"/></svg> Fair
             </span>`
         
    }else  if (i==0) { 
        innerhtml=`  <span style="color: var(--Error-500, #EF4444); background: var(--Error-50, #FEF3F2); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="8" height="9" viewBox="0 0 8 9" fill="none"><circle cx="4" cy="4.1582" r="3" fill="var(--Error-500, #EF4444)" /></svg> Poor    </span>`
     }
      SPLevel.innerHTML=innerhtml
      performanceScoreModal.level.info=innerhtml;
    }
  function UpdateWeightage(index,amount)
  {
    let inputField=document.getElementById('SPWeightage'+index);
    let weightage=parseFloat(inputField.value);
    let totalWeightage=CheckMatrixWeightage();
    if(totalWeightage+amount<=100)
    {
      weightage+=amount;
      inputField.value=weightage;
      performanceScoreModal.MatrixWeightage[index]=weightage;
      UpdatePerformanceScore();
      let totalWeightage=CheckMatrixWeightage();
      document.getElementById('SPWeightageTotal').innerHTML=totalWeightage;
    }
    else
    alert('Weightage should be between 0 to 100')
  }
  function CheckUncheckMatrixWeightage(index)
  {
    let SPCheckbox=document.getElementById('SPCheckbox'+index);
    let  SPWeightage=document.getElementById('SPWeightage'+index);
    if(SPCheckbox.checked)
    {
      SPWeightage.value=0;
      performanceScoreModal.MatrixWeightage[index]=0;
      SPWeightage.disabled=true;
    }
    else{
      SPWeightage.disabled=false;
    }
    UpdatePerformanceScore();
  }
  function CheckMatrixWeightage()
  {
let totalWeightage=0;
for(let i=0;i<5;i++)
{
  totalWeightage+=parseFloat(performanceScoreModal.MatrixWeightage[i]);
}
return totalWeightage
  }
  function UpdateWeightageInputField(index,value)
  {
    if(!isNaN(parseFloat(value)))
    {
      let inputField=document.getElementById('SPWeightage'+index);
      let weightage=parseFloat(value);
      performanceScoreModal.MatrixWeightage[index]=weightage;
      let totalWeightage=CheckMatrixWeightage();
      if(totalWeightage<=100)
      {
        inputField.value=weightage;
        UpdatePerformanceScore();
      document.getElementById('SPWeightageTotal').innerHTML=totalWeightage;
      }
      else
      {
        alert('Weightage should be less then 100')
        inputField.value=0;
        performanceScoreModal.MatrixWeightage[index]=0;
        UpdatePerformanceScore();
      }
    }
    else{
      let inputField=document.getElementById('SPWeightage'+index);
      inputField.value=0;
      performanceScoreModal.MatrixWeightage[index]=0;
      UpdatePerformanceScore();
    }
  }
  function SPType(index)
  { 
   let ManualBody=document.getElementById('SPManualBox');
   let AutomaticBody=document.getElementById('SPAutomaticBox');
   let performanceMatrixBody=document.getElementById('SPMatrixBody');
   let SPScoreBody=document.getElementById('SPScoreBody');
   let SPFutureMonths=document.getElementById('SPFutureMonths');
   
   performanceScoreModal.performanceCalculateType=index==1?'Manual':'Automatic';
   if(index==1)
   {
      ManualBody.className='SPActive'
      AutomaticBody.className='SPInActive'
      performanceMatrixBody.classList.add('disabled')
      SPScoreBody.classList.remove('disabled')
      document.getElementById('SetManualPerformanceScore').style.display='flex';
      document.getElementById('SPAutomaticBoxInput').checked=false;
      document.getElementById('SPManualBoxInput').checked=true;
      if(FutureAllow=='true'||FutureAllow){
   SPFutureMonths.checked=performanceScoreModal.performanceCalculateType=='Manual'
   }
   else
   SPFutureMonths.checked=false;
   }
   else{
    UpdatePerformanceScore();
    ManualBody.className='SPInActive'
    AutomaticBody.className='SPActive'
    performanceMatrixBody.classList.remove('disabled')
    SPScoreBody.classList.add('disabled')
    document.getElementById('SetManualPerformanceScore').style.display='none';
    document.getElementById('SPAutomaticBoxInput').checked=true;
      document.getElementById('SPManualBoxInput').checked=false;
      if(FutureAllow=='true'||FutureAllow){
   SPFutureMonths.checked=performanceScoreModal.performanceCalculateType=='Automatic'
   }
   else
   SPFutureMonths.checked=false;
   }
  
   CheckButtonAbility()
  }
  function UpdateSPscore(id,value)
  {
    let inputField=document.getElementById(id);
    let score=parseFloat(inputField.value);
    score+=value;
    score=Math.min(100,score);
    score=Math.max(score,0);
    inputField.value=score;
    performanceScoreModal.score=score;
  }
  function SPscore(value)
  {
    let SPScoreInput=document.getElementById('SPScoreInput')
    value=Math.min(100,value);
    value=Math.max(value,0);
    SPScoreInput.value=value;
    performanceScoreModal.score=value;
    
  }
  function UpdatePerformanceScore()
  {  CheckButtonAbility()
    if(performanceScoreModal.performanceCalculateType=='Automatic'){
    let performanceScore = (
      performanceScoreModal.MatrixWeightage[0]*parseFloat(performanceScoreModal.performanceMatrix[0])  +
      performanceScoreModal.MatrixWeightage[3]*parseFloat(performanceScoreModal.performanceMatrix[3]) +
      performanceScoreModal.MatrixWeightage[2]*parseFloat(performanceScoreModal.performanceMatrix[2]) +
      parseFloat(performanceScoreModal.performanceMatrix[1])*performanceScoreModal.MatrixWeightage[1] + 
  (parseFloat(performanceScoreModal.performanceMatrix[4])>15?1:parseFloat(performanceScoreModal.performanceMatrix[4])/15)*performanceScoreModal.MatrixWeightage[4]
    ).toFixed(0);
 let totalLoomMissed=parseFloat(performanceScoreModal?.performanceMatrix[6]);
    if (totalLoomMissed > 5) {
      performanceScore += parseFloat(totalLoomMissed* performanceScoreModal?.MatrixWeightage[6]);
    }
let totalLeaves=parseFloat(performanceScoreModal?.performanceMatrix[5]);
    if (totalLeaves > 1) {
      performanceScore += parseFloat(totalLeaves * performanceScoreModal?.MatrixWeightage[5]);
    }
    performanceScore=Math.max(0,performanceScore);
    
    if (performanceScore > 100) performanceScore = 0;

    performanceScore = isNaN(performanceScore) ? 0 : performanceScore;
    let level={};
    if (performanceScore > 90) { 
        level.info=`<span style="color: #48bf84; background: var(--Success-50, #ECFDF3); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8" fill="none"><circle cx="4" cy="4" r="3" fill="#48BF84"/></svg> Superb
      </span>`
      } else if (performanceScore > 80) {
        level.info=` <span style="color: #2E90FA; background: var(--Blue-50, #EFF8FF); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.66797" cy="4" r="3" fill="#2E90FA"/></svg> Great
            </span>`
          
      } else if (performanceScore > 50) {
        level.info=`  <span style="color: var(--Warning-500, #FDB022); background: var(--Warning-50, #FFFAEB); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none"><circle cx="4.33203" cy="4" r="3" fill="#FDB022"/></svg> Fair
             </span>`
         
    } else {
      level.info=`  <span style="color: var(--Error-500, #EF4444); background: var(--Error-50, #FEF3F2); padding: 2px 8px 2px 6px; border-radius: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="8" height="9" viewBox="0 0 8 9" fill="none"><circle cx="4" cy="4.1582" r="3" fill="var(--Error-500, #EF4444)" /></svg> Poor    </span>`
     }
     performanceScoreModal.level=level;
      performanceScoreModal.score=performanceScore;
    }
    
      let SPScoreInput=document.getElementById('SPScoreInput')
      SPScoreInput.value=performanceScoreModal?.score;
      let SPLevel=document.getElementById('SPLevel')
      SPLevel.innerHTML=performanceScoreModal?.level.info;
    
  }
  function SPFutureMonths()
  {
    let box=document.getElementById('SPFutureMonths');
    FutureAllow=box.checked;
  }
  function CheckButtonAbility()
  {
    if(performanceScoreModal.performanceCalculateType=='Automatic')
    {
      let totalWeightage=CheckMatrixWeightage();
     if(totalWeightage<=100)
      document.getElementById('SPButton').disabled=false;
      else
      document.getElementById('SPButton').disabled=true;
    }
    else{
      document.getElementById('SPButton').disabled=false;
    }
  }
  async function SavePerformanceScoreModal()
  {
    try{
   let res=await fetch('/performanceModal',{
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({id:performanceScoreModal?._id,data:performanceScoreModal,FutureAllow}),
      })
      if(performanceScoreModal.monthYear==monthYear)
      {
        if(performanceScoreModal.score>topScore.score)
        {
          topScore=performanceScoreModal;
          topScore.image='<%=employee.image%>';
          topScore.name='<%=employee.firstName%>';
        }
      SetReportofMonth(performanceScoreModal?.score)
      }
    }
    catch(error)
    {
      console.log(error);
    }
     
  }
 
  function SetPerformanceScoreMatrixModal()
  {
    
  }
 </script>


  <!-- Include JavaScript files -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

  <!-- Core JS - includes jquery, bootstrap, popper, in-view and sticky-kit -->
  <script src="../js/purpose.core.js"></script>
  <!-- Page JS -->
  <script src="../libs/autosize/dist/autosize.min.js"></script>

  <script src="../libs/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>
  <script src="../libs/progressbar.js/dist/progressbar.min.js"></script>
  <script src="../libs/apexcharts/dist/apexcharts.min.js"></script>
  <script src="../libs/moment/min/moment.min.js"></script>

  <script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
  <script src="../libs/fullcalendar/dist/fullcalendar.min.js"></script>
  <!-- Purpose JS -->
  <script src="../js/purpose.js"></script>
  <!-- Demo JS - remove it when starting your project -->
  <script src="../js/demo.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>



</body>

</html>